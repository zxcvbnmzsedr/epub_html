
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#28145;&#20837;&#29702;&#35299;&#32593;&#32476;&#36890;&#35759;&#27169;&#22411;&#30340;&#26680;&#24515;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <p>
 &#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#65292;&#25105;&#20204;&#22823;&#33268;&#22320;&#20171;&#32461;&#20102;&#25972;&#27454;RPC&#26694;&#26550;&#22312;&#23454;&#38469;&#24320;&#21457;&#20013;&#21487;&#33021;&#20250;&#36935;&#21040;&#30340;&#38382;&#39064;&#28857;&#65292;&#20363;&#22914;
 <strong>
  &#36127;&#36733;&#22343;&#34913;
 </strong>
 <strong>
  &#65292;&#27880;&#20876;&#20013;&#24515;&#65292;&#26381;&#21153;
 </strong>
 <strong>
  &#32447;&#31243;
 </strong>
 <strong>
  &#19982;&#22788;&#29702;&#38431;&#21015;
 </strong>
 &#31561;&#12290;&#20026;&#20102;&#20943;&#23569;&#21518;&#32493;&#24320;&#21457;&#24037;&#20316;&#20013;&#30340;&#22256;&#38590;&#65292;&#25105;&#20204;&#23613;&#21487;&#33021;&#22312;&#20889;&#20195;&#30721;&#20043;&#21069;&#20808;&#36827;&#34892;&#28165;&#26224;&#22320;&#35774;&#35745;&#21644;&#24605;&#32771;&#12290;
</p>
<p>
 &#26082;&#28982;&#25105;&#20204;&#38656;&#35201;&#20570;&#30340;&#26159;&#25645;&#24314;&#22522;&#26412;&#30340;&#32593;&#32476;&#36890;&#35759;&#27169;&#22411;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#20808;&#23545;&#24050;&#26377;&#30340;&#20960;&#31181;&#32593;&#32476;io&#25216;&#26415;&#21407;&#29702;&#26377;&#19968;&#23450;&#30340;&#20102;&#35299;&#65292;&#19979;&#36793;&#25105;&#20250;&#20808;&#20174;Java&#20869;&#37096;&#30340;&#20960;&#27454;&#32593;&#32476;IO&#25216;&#26415;&#24320;&#23637;&#35752;&#35770;&#12290;
</p>
<h3>
 &#38459;&#22622;IO&#25216;&#26415;
</h3>
<p>
 &#39318;&#20808;&#25105;&#20889;&#20102;&#19968;&#27573;&#31616;&#21333;&#30340;&#22522;&#20110;BIO&#23454;&#29616;&#30340;&#38459;&#22622;IO&#26381;&#21153;&#31471;&#31243;&#24207;&#20195;&#30721;&#65306;
</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">package</span> org.idea.irpc.framework.core.bio;

<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.InputStream;
<span class="hljs-keyword">import</span> java.io.OutputStream;
<span class="hljs-keyword">import</span> java.net.ServerSocket;
<span class="hljs-keyword">import</span> java.net.Socket;
<span class="hljs-keyword">import</span> java.util.concurrent.ExecutorService;
<span class="hljs-keyword">import</span> java.util.concurrent.Executors;


 <span class="hljs-comment">/**
 *  <span class="hljs-doctag">@Author</span> linhao
 *  <span class="hljs-doctag">@Date</span> created in 10:24 &#19978;&#21320; 2021/11/27
 */</span>

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BioServer</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ExecutorService executors = Executors.newFixedThreadPool(<span class="hljs-number">10</span>);

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException </span>{
        ServerSocket serverSocket = <span class="hljs-keyword">new</span> ServerSocket();
        serverSocket.bind(<span class="hljs-keyword">new</span> InetSocketAddress(<span class="hljs-number">1009</span>));
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
               <span class="hljs-comment">//&#22581;&#22622;&#29366;&#24577;&#28857;--1</span>
                Socket socket = serverSocket.accept();
                System.out.println(<span class="hljs-string">"&#33719;&#21462;&#26032;&#36830;&#25509;"</span>);
                executors.execute(<span class="hljs-keyword">new</span> Runnable() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{

                        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>){
                            InputStream inputStream = <span class="hljs-keyword">null</span>;
                            <span class="hljs-keyword">try</span> {
                                <span class="hljs-comment">//&#22581;&#22622;&#30340;&#29366;&#24577;&#28857;--2</span>
                                inputStream = socket.getInputStream();
                                <span class="hljs-keyword">byte</span>[] result = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[<span class="hljs-number">1024</span>];
                                <span class="hljs-keyword">int</span> len = inputStream.read(result);
                                <span class="hljs-keyword">if</span>(len!=-<span class="hljs-number">1</span>){
                                    System.out.println(<span class="hljs-string">"[response] "</span>+<span class="hljs-keyword">new</span> String(result,<span class="hljs-number">0</span>,len));
                                    OutputStream outputStream = socket.getOutputStream();
                                    outputStream.write(<span class="hljs-string">"response data"</span>.getBytes());
                                    outputStream.flush();
                                }
                            } <span class="hljs-keyword">catch</span> (IOException e) {
                                e.printStackTrace();
                                <span class="hljs-keyword">break</span>;
                            }
                        }
                    }
                });
            }
        }<span class="hljs-keyword">catch</span> (Exception e){
            e.printStackTrace();
        }
    }
}
</code></pre>
<p>
 &#36825;&#27573;&#20195;&#30721;&#24403;&#20013;&#30340;&#20027;&#35201;&#20851;&#27880;&#28857;&#22312;&#20110;accept&#20989;&#25968;&#21644;read&#20989;&#25968;&#65292;&#22240;&#20026;&#20256;&#32479;&#30340;bio&#25216;&#26415;&#20250;&#22312;&#36825;&#20004;&#20010;&#27169;&#22359;&#20013;&#21457;&#29983;&#22581;&#22622;&#24773;&#20917;&#12290;
</p>
<p>
 &#26381;&#21153;&#31471;&#21019;&#24314;&#20102;socket&#20043;&#21518;&#20250;&#22581;&#22622;&#22312;&#31561;&#24453;&#22806;&#30028;&#36830;&#25509;&#30340;accept&#20989;&#25968;&#29615;&#33410;&#65292;&#22823;&#27010;&#27969;&#31243;&#25105;&#25972;&#29702;&#20102;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/22b2e1e6-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#24403;&#23458;&#25143;&#31471;&#36830;&#25509;&#19978;&#20102;&#26381;&#21153;&#31471;&#20043;&#21518;&#65292;accept&#30340;&#22581;&#22622;&#29366;&#24577;&#25165;&#20250;&#25918;&#24320;&#65292;&#28982;&#21518;&#36827;&#20837;read&#29615;&#33410;&#65288;&#35835;&#21462;&#23458;&#25143;&#31471;&#21457;&#36865;&#36807;&#26469;&#30340;&#32593;&#32476;&#25968;&#25454;&#65289;&#12290;
</p>
<p>
 &#23458;&#25143;&#31471;&#22914;&#26524;&#19968;&#30452;&#27809;&#26377;&#21457;&#36865;&#25968;&#25454;&#36807;&#26469;&#65292;&#37027;&#20040;&#26381;&#21153;&#31471;&#30340;read&#35843;&#29992;&#26041;&#27861;&#23601;&#20250;&#19968;&#30452;&#22788;&#20110;&#22581;&#22622;&#29366;&#24577;&#65292;&#20504;&#33509;&#25968;&#25454;&#36890;&#36807;&#32593;&#32476;&#25269;&#36798;&#20102;&#32593;&#21345;&#32531;&#20914;&#21306;&#65292;&#27492;&#26102;&#21017;&#20250;&#23558;&#25968;&#25454;&#20174;&#20869;&#26680;&#24577;&#25335;&#36125;&#33267;&#29992;&#25143;&#24577;&#65292;&#28982;&#21518;&#36820;&#22238;&#32473;read&#35843;&#29992;&#26041;&#12290;
</p>
<p>
 <img alt="" src="EPUB/22d16260-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#19981;&#36807;&#36825;&#37324;&#23384;&#22312;&#20102;&#19968;&#20010;&#38382;&#39064;&#65292;&#22914;&#26524;&#23458;&#25143;&#31471;&#21333;&#32431;&#22320;&#36830;&#25509;&#19978;&#20102;&#26381;&#21153;&#31471;&#65292;&#20294;&#26159;&#27809;&#26377;&#21457;&#36865;&#25968;&#25454;&#32473;&#21040;&#30446;&#26631;&#26426;&#22120;&#65292;&#27492;&#26102;&#26381;&#21153;&#31471;&#23601;&#20250;&#19968;&#30452;&#22788;&#20110;&#22581;&#22622;&#29366;&#24577;&#12290;&#25152;&#20197;&#36825;&#37324;&#25105;&#20204;&#38656;&#35201;&#24341;&#20986;&#19968;&#31181;&#21483;&#20570;&#38750;&#38459;&#22622;io&#30340;&#25216;&#26415;&#12290;
</p>
<h3>
 &#38750;&#38459;&#22622;IO&#25216;&#26415;
</h3>
<p>
 &#20551;&#35774;&#35753;&#25105;&#20204;&#26469;&#23545;&#19978;&#36793;&#30340;
 <strong>
  &#38459;&#22622;
 </strong>
 <strong>
  io
 </strong>
 <strong>
  &#25216;&#26415;
 </strong>
 &#36827;&#34892;&#24615;&#33021;&#25552;&#21319;&#26041;&#38754;&#30340;&#25913;&#36896;&#30340;&#35805;&#65292;&#20854;&#23454;&#26159;&#21487;&#20197;&#23581;&#35797;&#22312;accept&#20989;&#25968;&#33719;&#21462;&#21040;&#23458;&#25143;&#31471;&#36830;&#25509;&#20043;&#21518;&#65292;&#20877;&#21435;&#21019;&#24314;&#19968;&#20010;&#32447;&#31243;&#19987;&#38376;&#29992;&#20110;&#22788;&#29702;read&#20989;&#25968;&#12290;&#25972;&#20307;&#27969;&#31243;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/2301f556-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#30475;&#21040;&#36825;&#37324;&#65292;&#20320;&#26159;&#21542;&#20250;&#26377;&#30097;&#24785;&#65292;
 <strong>
  &#26469;&#19968;&#20010;&#35831;&#27714;&#25165;&#21019;&#24314;&#19968;&#20010;&#32447;&#31243;&#65292;&#36825;&#37096;&#20998;&#24037;&#20316;&#20026;&#20160;&#20040;&#19981;&#20132;&#32473;&#32447;&#31243;&#27744;&#21435;&#23436;&#25104;&#21602;&#65311;
 </strong>
</p>
<p>
 &#27809;&#38169;&#65292;&#32447;&#31243;&#27744;&#30830;&#23454;&#21487;&#20197;&#24110;&#21161;&#25105;&#20204;&#25552;&#21069;&#21019;&#24314;&#22909;&#19968;&#23450;&#25968;&#37327;&#30340;&#32447;&#31243;&#65292;&#24403;&#35831;&#27714;&#37327;&#22686;&#22823;&#30340;&#26102;&#20505;&#36824;&#33021;&#26377;&#38431;&#21015;&#32531;&#20914;&#65292;&#20197;&#21450;&#22686;&#21152;worker&#32447;&#31243;&#30340;&#25928;&#26524;&#65292;&#20174;&#32780;&#21487;&#20197;&#38477;&#20302;&#36825;&#22359;&#30340;&#23454;&#29616;&#38590;&#24230;&#12290;&#20294;&#26159;&#36825;&#26679;&#30340;&#35774;&#35745;&#20381;&#28982;&#26159;&#23384;&#22312;&#19981;&#36275;&#28857;&#65292;&#22240;&#20026;&#22312;&#29992;&#25143;&#24577;&#23618;&#38754;&#35843;&#29992;&#30340;
 <strong>
  read
 </strong>
 &#20989;&#25968;&#20381;&#26087;&#26159;&#22581;&#22622;&#30340;&#12290;&#23601;&#29616;&#38454;&#27573;&#32780;&#35328;&#65292;
 <strong>
  &#36825;&#31181;&#25216;&#26415;&#26041;&#26696;&#36824;&#19981;&#33021;&#31216;&#20043;&#20026;&#38750;&#38459;&#22622;IO&#25216;&#26415;&#12290;
 </strong>
</p>
<p>
 &#27492;&#26102;&#30340;
 <strong>
  read
 </strong>
 &#20989;&#25968;&#22312;&#35843;&#29992;&#30340;&#26102;&#20505;&#22914;&#26524;&#27809;&#26377;&#30446;&#26631;&#25968;&#25454;&#25269;&#36798;&#65292;&#21017;&#20250;&#19968;&#30452;&#22788;&#20110;
 <strong>
  &#38459;&#22622;&#29366;&#24577;
 </strong>
 &#65292;&#37027;&#20040;&#22914;&#20309;&#23545;&#20854;&#36827;&#34892;&#35774;&#35745;&#21319;&#32423;&#23454;&#29616;&#38750;&#38459;&#22622;&#25928;&#26524;&#21602;&#65311;
</p>
<p>
 &#20854;&#23454;&#22312;JDK&#30340;
 <strong>
  NIO
 </strong>
 &#27169;&#22411;&#20013;&#23601;&#26377;&#30456;&#20851;&#30340;&#35774;&#35745;&#23384;&#22312;&#65292;&#19979;&#36793;&#25105;&#36148;&#20986;&#19968;&#27573;&#31616;&#21333;&#30340;NIO&#26381;&#21153;&#31471;&#20195;&#30721;&#65306;
</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">package</span> org.idea.irpc.framework.core.nio;

<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.net.InetSocketAddress;
<span class="hljs-keyword">import</span> java.nio.ByteBuffer;
<span class="hljs-keyword">import</span> java.nio.channels.SelectionKey;
<span class="hljs-keyword">import</span> java.nio.channels.Selector;
<span class="hljs-keyword">import</span> java.nio.channels.ServerSocketChannel;
<span class="hljs-keyword">import</span> java.nio.channels.SocketChannel;
<span class="hljs-keyword">import</span> java.util.Iterator;
<span class="hljs-keyword">import</span> java.util.Set;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NioSocketServer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Thread</span> </span>{
    ServerSocketChannel serverSocketChannel = <span class="hljs-keyword">null</span>;
    Selector selector = <span class="hljs-keyword">null</span>;
    SelectionKey selectionKey = <span class="hljs-keyword">null</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initServer</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException </span>{
        selector = Selector.open();
        serverSocketChannel = ServerSocketChannel.open();
        <span class="hljs-comment">//&#35774;&#32622;&#20026;&#38750;&#38459;&#22622;&#27169;&#24335;,&#40664;&#35748;serverSocketChannel&#26159;&#37319;&#29992;&#20102;&#38459;&#22622;&#27169;&#24335;</span>
        serverSocketChannel.configureBlocking(<span class="hljs-keyword">false</span>);
        serverSocketChannel.socket().bind(<span class="hljs-keyword">new</span> InetSocketAddress(<span class="hljs-number">8888</span>));
        selectionKey = serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">//&#40664;&#35748;&#36825;&#37324;&#20250;&#22581;&#22622;</span>
                <span class="hljs-keyword">int</span> selectKey = selector.select();
                <span class="hljs-keyword">if</span> (selectKey &gt; <span class="hljs-number">0</span>) {
                    <span class="hljs-comment">//&#33719;&#21462;&#21040;&#25152;&#26377;&#30340;&#22788;&#20110;&#23601;&#32490;&#29366;&#24577;&#30340;channel&#65292;selectionKey&#20013;&#21253;&#21547;&#20102;channel&#30340;&#20449;&#24687;</span>
                    Set&lt;SelectionKey&gt; keySet = selector.selectedKeys();
                    Iterator&lt;SelectionKey&gt; iter = keySet.iterator();
                    <span class="hljs-comment">//&#23545;selectionkey&#36827;&#34892;&#36941;&#21382;</span>
                    <span class="hljs-keyword">while</span> (iter.hasNext()) {
                        SelectionKey selectionKey = iter.next();
                        <span class="hljs-comment">//&#38656;&#35201;&#28165;&#31354;&#65292;&#38450;&#27490;&#19979;&#27425;&#37325;&#22797;&#22788;&#29702;</span>
                        iter.remove();
                        <span class="hljs-comment">//&#23601;&#32490;&#20107;&#20214;&#65292;&#22788;&#29702;&#36830;&#25509;</span>
                        <span class="hljs-keyword">if</span> (selectionKey.isAcceptable()) {
                            accept(selectionKey);
                        }
                        <span class="hljs-comment">//&#35835;&#20107;&#20214;&#65292;&#22788;&#29702;&#25968;&#25454;&#35835;&#21462;</span>
                        <span class="hljs-keyword">if</span> (selectionKey.isReadable()) {
                            read(selectionKey);
                        }
                        <span class="hljs-comment">//&#20889;&#20107;&#20214;&#65292;&#22788;&#29702;&#20889;&#25968;&#25454;</span>
                        <span class="hljs-keyword">if</span> (selectionKey.isWritable()) {
                        }
                    }
                }
            } <span class="hljs-keyword">catch</span> (IOException e) {
                e.printStackTrace();
                <span class="hljs-keyword">try</span> {
                    serverSocketChannel.close();
                } <span class="hljs-keyword">catch</span> (IOException e1) {
                    e1.printStackTrace();
                }
            }

        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span><span class="hljs-params">(SelectionKey key)</span> </span>{
        <span class="hljs-keyword">try</span> {
            ServerSocketChannel serverSocketChannel = (ServerSocketChannel) key.channel();
            SocketChannel socketChannel = serverSocketChannel.accept();
            System.out.println(<span class="hljs-string">"conn is acceptable"</span>);
            socketChannel.configureBlocking(<span class="hljs-keyword">false</span>);
            <span class="hljs-comment">//&#23558;&#24403;&#21069;&#30340;channel&#20132;&#32473;selector&#23545;&#35937;&#30417;&#31649;&#65292;&#24182;&#19988;&#26377;selector&#23545;&#35937;&#31649;&#29702;&#23427;&#30340;&#35835;&#20107;&#20214;</span>
            socketChannel.register(selector, SelectionKey.OP_READ);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">read</span><span class="hljs-params">(SelectionKey selectionKey)</span> </span>{
        <span class="hljs-keyword">try</span> {
            SocketChannel channel = (SocketChannel) selectionKey.channel();
            ByteBuffer byteBuffer = ByteBuffer.allocate(<span class="hljs-number">100</span>);
            <span class="hljs-keyword">int</span> len = channel.read(byteBuffer);
            <span class="hljs-keyword">if</span> (len &gt; <span class="hljs-number">0</span>) {
                byteBuffer.flip();
                <span class="hljs-keyword">byte</span>[] byteArray = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[byteBuffer.limit()];
                byteBuffer.get(byteArray);
                System.out.println(<span class="hljs-string">"NioSocketServer receive from client:"</span> + <span class="hljs-keyword">new</span> String(byteArray,<span class="hljs-number">0</span>,len));
                selectionKey.interestOps(SelectionKey.OP_READ);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">try</span> {
                serverSocketChannel.close();
                selectionKey.cancel();
            } <span class="hljs-keyword">catch</span> (IOException e1) {
                e1.printStackTrace();
            }
            e.printStackTrace();
        }
    }


    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String args[])</span> <span class="hljs-keyword">throws</span> IOException </span>{
        NioSocketServer server = <span class="hljs-keyword">new</span> NioSocketServer();
        server.initServer();
        server.start();
    }
}

</code></pre>
<p>
 &#22312;&#21518;&#26399;&#29256;&#26412;&#30340;JDK&#20013;&#65292;&#24320;&#21457;&#32773;&#23545;read&#20989;&#25968;&#36827;&#34892;&#20102;&#21319;&#32423;&#65292;&#24403;&#35843;&#29992;read&#20989;&#25968;&#26102;&#65292;&#22914;&#26524;&#27809;&#26377;&#21457;&#29616;&#30446;&#26631;&#26041;&#21457;&#36865;&#36807;&#26469;&#30340;&#25968;&#25454;&#20449;&#24687;&#65292;&#21017;&#20250;&#31435;&#21363;&#36820;&#22238;&#19968;&#20010;&#25968;&#23383;&#20540; -1&#65292;&#32780;&#24182;&#19981;&#20250;&#19968;&#30452;&#22788;&#20110;&#22581;&#22622;&#29366;&#24577;&#12290;
</p>
<p>
 &#19979;&#36793;&#25105;&#23558;&#25972;&#20010;&#27969;&#31243;&#22270;&#32472;&#21046;&#20986;&#26469;&#32473;&#22823;&#23478;&#30475;&#65306;
</p>
<p>
 <img alt="image.png" src="EPUB/23222e52-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#22909;&#20102;&#65292;&#29616;&#22312;&#25105;&#20204;&#26469;&#24605;&#32771;&#19979;&#20195;&#30721;&#20250;&#24590;&#20040;&#36208;&#65292;&#24403;socket&#30340;&#26381;&#21153;&#31471;&#21551;&#21160;&#20043;&#21518;&#65292;&#20250;&#23545;&#27599;&#20010;socket&#36830;&#25509;&#30340;&#23545;&#35937;&#37117;&#24320;&#21551;&#19968;&#20010;&#32447;&#31243;&#65292;&#28982;&#21518;&#22312;&#19968;&#20010;&#24490;&#29615;&#37324;&#38754;&#21435;&#35843;&#29992;read&#20989;&#25968;&#65292;&#27492;&#26102;&#30340;read&#20989;&#25968;&#35843;&#29992;&#19981;&#20250;&#36827;&#20837;&#38459;&#22622;&#29366;&#24577;&#20102;&#65292;&#20294;&#26159;&#20284;&#20046;&#36824;&#26159;&#27809;&#26377;&#35299;&#20915;&#26681;&#26412;&#24615;&#38382;&#39064;&#65306;&#27599;&#27425;&#26469;&#35831;&#27714;&#37117;&#35201;&#21019;&#24314;&#19968;&#20010;&#32447;&#31243;&#26469;&#30417;&#21548;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#12290;&#22914;&#26524;&#23458;&#25143;&#31471;&#22312;&#24314;&#31435;&#36830;&#25509;&#20043;&#21518;&#38271;&#26102;&#38388;&#27809;&#26377;&#20256;&#36755;&#25968;&#25454;&#65292;&#27492;&#26102;&#23545;&#20110;&#26381;&#21153;&#31471;&#32780;&#35328;&#23601;&#20250;&#36896;&#25104;&#36164;&#28304;&#28010;&#36153;&#30340;&#24773;&#20917;&#12290;
</p>
<p>
 <strong>
  &#27599;&#27425;&#35831;&#27714;&#37117;&#38656;&#35201;&#24314;&#31435;&#19968;&#20010;&#32447;&#31243;&#65292;&#22914;&#20309;&#20248;&#21270;&#65311;
 </strong>
</p>
<p>
 &#25105;&#20204;&#19981;&#22952;&#21487;&#20197;&#23558;accept&#21644;read&#20998;&#25104;&#20004;&#20010;&#27169;&#22359;&#26469;&#22788;&#29702;&#65292;&#24403;accept&#20989;&#25968;&#25509;&#25910;&#21040;&#26032;&#30340;&#36830;&#25509;&#65288;&#20854;&#23454;&#26412;&#36136;&#23601;&#26159;&#19968;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;fd&#65289;&#20043;&#21518;&#65292;&#23558;&#20854;&#25918;&#20837;&#19968;&#20010;&#38598;&#21512;&#65292;&#28982;&#21518;&#20250;&#26377;&#19968;&#20010;&#21518;&#21488;&#20219;&#21153;&#32479;&#19968;&#23545;&#36825;&#20010;&#38598;&#21512;&#20013;&#30340;fd&#36941;&#21382;&#25191;&#34892;read&#20989;&#25968;&#25805;&#20316;&#12290;
</p>
<p>
 &#27492;&#26102;&#25972;&#20307;&#30340;&#27969;&#31243;&#25105;&#32472;&#21046;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/23301774-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#30475;&#21040;&#36825;&#37324;&#65292;&#19981;&#30693;&#36947;&#20320;&#26159;&#21542;&#20250;&#24102;&#26377;&#30097;&#24785;&#28857;&#65306;&#24490;&#29615;&#35843;&#29992;read&#26041;&#27861;&#23682;&#19981;&#26159;&#24490;&#29615;&#36827;&#34892;
 <strong>
  &#29992;&#25143;&#24577;&#21644;&#20869;&#26680;&#24577;&#30340;&#20999;&#25442;
 </strong>
 &#65311;&#22114;&#65292;&#36825;&#26679;&#19981;&#26029;&#22320;&#36827;&#34892;&#19978;&#19979;&#25991;&#20999;&#25442;&#20063;&#19981;&#26159;&#20160;&#20040;&#22909;&#30340;&#35774;&#35745;&#24605;&#36335;&#21834;&#65292;&#33021;&#21542;&#23558;&#36825;&#20010;&#24490;&#29615;&#30340;&#35843;&#29992;&#30340;&#25805;&#20316;&#20132;&#32473;&#20869;&#26680;&#24577;&#21435;&#22788;&#29702;&#21602;&#65311;
</p>
<h4>
 select&#27169;&#22411;
</h4>
<p>
 &#22312;Linux&#20869;&#26680;&#20013;&#35774;&#35745;&#20102;&#19968;&#20010;&#21483;&#20570;select&#30340;&#20989;&#25968;&#65292;&#36825;&#20010;&#20989;&#25968;&#22312;&#20869;&#26680;&#24577;&#20013;&#23545;fd&#38598;&#21512;&#36827;&#34892;&#36941;&#21382;&#65292;&#22914;&#26524;&#23545;&#24212;&#30340;fd&#25509;&#25910;&#21040;&#23458;&#25143;&#31471;&#30340;&#25269;&#36798;&#25968;&#25454;&#65292;&#21017;&#20250;&#36820;&#22238;&#32473;&#29992;&#25143;&#24577;&#35843;&#29992;&#26041;&#65288;&#27880;&#24847;&#29992;&#25143;&#24577;&#21457;&#36865;select&#35843;&#29992;&#30340;&#26102;&#20505;&#20381;&#28982;&#20250;&#22788;&#20110;&#22581;&#22622;&#29366;&#24577;&#65289;&#12290;
</p>
<blockquote>
 <p>
  &#20851;&#20110;select&#20989;&#25968;&#30340;&#23448;&#26041;&#20171;&#32461;&#22320;&#22336;&#65306;
  <a href="https://www.man7.org/linux/man-pages/man2/select.2.html" rel="nofollow noopener noreferrer" target="_blank">
   https://www.man7.org/linux/man-pages/man2/select.2.html
  </a>
 </p>
</blockquote>
<p>
 &#24403;&#32593;&#21345;&#27809;&#26377;&#25509;&#25910;&#21040;&#26032;&#30340;&#25968;&#25454;&#25253;&#25991;&#35831;&#27714;&#26102;&#65292;&#29992;&#25143;&#24577;&#25191;&#34892;select&#20989;&#25968;&#20250;&#22788;&#20110;&#22581;&#22622;&#29366;&#24577;&#20013;&#65292;&#27492;&#26102;&#20869;&#26680;&#24577;&#20250;&#23545;fd&#38598;&#21512;&#36827;&#34892;&#24490;&#29615;&#36941;&#21382;&#65292;&#23545;&#27599;&#20010;&#36830;&#25509;&#19978;&#30340;fd&#37117;&#25191;&#34892;read&#25805;&#20316;&#65292;&#21028;&#26029;&#26159;&#21542;&#26377;&#26032;&#30340;&#25968;&#25454;&#25253;&#25991;&#25269;&#36798;&#12290;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/23594018-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#22914;&#26524;&#27492;&#26102;&#26377;&#26032;&#30340;&#25968;&#25454;&#25253;&#25991;&#25269;&#36798;&#32593;&#21345;&#32531;&#20914;&#21306;&#65292;&#21017;&#20250;&#23558;&#25968;&#25454;&#20449;&#24687;&#25335;&#36125;&#21040;&#20869;&#26680;&#24577;&#25351;&#23450;&#30340;&#20869;&#23384;&#22359;&#21306;&#22495;&#20013;&#65292;&#24182;&#19988;&#36820;&#22238;&#32473;&#35843;&#29992;select&#20989;&#25968;&#30340;&#29992;&#25143;&#24577;&#31243;&#24207;&#12290;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;&#65288;&#22270;&#20013;&#32511;&#33394;&#37096;&#20998;&#26159;&#25968;&#25454;&#25269;&#36798;&#32593;&#21345;&#30340;&#37096;&#20998;&#65289;
</p>
<p>
 <img alt="" src="EPUB/23761fa8-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#25152;&#20197;&#32508;&#19978;&#25152;&#36848;&#65292;
 <strong>
  &#19968;&#27425;select&#20989;&#25968;&#35843;&#29992;&#65292;&#20250;&#21457;&#29983;&#19968;&#27425;&#31995;&#32479;&#20869;&#26680;&#35843;&#29992;&#65292;&#21644;&#20869;&#26680;&#24577;&#20869;&#37096;&#30340;n&#22810;&#27425;&#23601;&#32490;&#25991;&#20214;&#31526;&#30340;read&#20989;&#25968;&#35843;&#29992;
 </strong>
 &#65292;&#36825;&#20010;&#27969;&#31243;&#25105;&#32472;&#21046;&#20102;&#19968;&#24133;&#22270;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/2392d490-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#30475;&#21040;&#36825;&#37324;&#65292;&#20320;&#24212;&#35813;&#23545;select&#20989;&#25968;&#26377;&#20123;&#20102;&#35299;&#20102;&#21543;&#65292;&#37027;&#20040;&#25105;&#20204;&#20877;&#26469;&#32842;&#32842;&#20160;&#20040;&#26159;poll&#21644;epoll&#12290;
</p>
<h4>
 poll&#27169;&#22411;
</h4>
<p>
 <strong>
  poll
 </strong>
 &#20063;&#26159;&#21644;
 <strong>
  select
 </strong>
 &#30456;&#20284;&#65292;&#36890;&#36807;&#19968;&#27425;&#31995;&#32479;&#35843;&#29992;&#65292;&#28982;&#21518;&#22312;&#20869;&#26680;&#24577;&#20013;&#23545;&#36830;&#25509;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#38598;&#21512;&#36827;&#34892;&#36941;&#21382;&#21028;&#26029;&#26159;&#21542;&#26377;&#23601;&#32490;&#29366;&#24577;&#30340;&#36830;&#25509;&#25509;&#25910;&#21040;&#20102;&#32593;&#21345;&#25968;&#25454;&#12290;&#20294;&#26159;select&#20989;&#25968;&#20013;&#21482;&#33021;&#30417;&#21548;1024&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#65288;&#20043;&#25152;&#20197;&#26159;1024&#65292;&#25105;&#25512;&#26029;&#26159;&#20026;&#20102;&#23613;&#37327;&#36991;&#20813;&#36807;&#22810;&#30340;&#38598;&#21512;&#22312;&#29992;&#25143;&#24577;&#21644;&#20869;&#26680;&#24577;&#20043;&#38388;&#30340;&#25335;&#36125;&#24773;&#20917;&#21457;&#29983;&#65289;&#65292;&#32780;
 <strong>
  poll
 </strong>
 &#20989;&#25968;&#21017;&#26159;&#21435;&#38500;&#25481;&#20102;&#36825;&#22359;&#30340;&#38480;&#21046;&#12290;
</p>
<blockquote>
 <p>
  &#20851;&#20110;poll&#20989;&#25968;&#30340;&#23448;&#26041;&#25991;&#26723;&#22320;&#22336;&#65306;
  <a href="https://www.man7.org/linux/man-pages/man2/poll.2.html" rel="nofollow noopener noreferrer" target="_blank">
   https://www.man7.org/linux/man-pages/man2/poll.2.html
  </a>
 </p>
</blockquote>
<h4>
 epoll&#27169;&#22411;
</h4>
<p>
 &#36890;&#36807;&#19978;&#36793;&#23545;select&#20171;&#32461;&#65292;&#21487;&#20197;&#21457;&#29616;&#23427;&#34429;&#28982;&#23558;&#20043;&#21069;
 <strong>
  &#22312;&#29992;&#25143;&#24577;&#24490;&#29615;&#35843;&#29992;&#20869;&#26680;&#24577;&#30340;&#35774;&#35745;&#25913;&#36827;&#20026;&#20102;&#22312;&#29992;&#25143;&#24577;&#21457;&#36215;&#35843;&#29992;&#35302;&#21457;&#20869;&#26680;&#24577;&#20013;&#30340;&#24490;&#29615;&#36941;&#21382;
 </strong>
 &#65292;&#20294;&#26159;&#20381;&#28982;&#23384;&#22312;&#20197;&#19979;&#20960;&#20010;&#19981;&#36275;&#28857;&#12290;
</p>
<ul>
 <li>
  <p>
   select&#20989;&#25968;&#22312;&#20174;&#29992;&#25143;&#24577;&#25335;&#36125;fd&#38598;&#21512;&#20256;&#20837;&#20869;&#26680;&#24577;&#20043;&#21518;&#65292;&#21518;&#32493;&#20027;&#35201;&#20851;&#27880;&#30340;&#28857;&#23601;&#26159;&#21738;&#20010;fd&#30340;&#23601;&#32490;&#29366;&#24577;&#21457;&#29983;&#20102;&#25913;&#21464;&#12290;
   <strong>
    &#20030;&#20010;&#24212;&#29992;&#22330;&#26223;&#35299;&#37322;&#19979;&#65306;&#20869;&#26680;&#24577;&#20013;&#24050;&#32463;&#23384;&#22312;&#19968;&#20010;fd&#38598;&#21512;&#65292;&#36825;&#20010;&#38598;&#21512;&#20013;&#30340;&#20219;&#19968;fd&#30340;&#29366;&#24577;&#21457;&#29983;&#21464;&#26356;&#65292;&#21017;&#25972;&#20010;fd&#38598;&#21512;&#37117;&#38656;&#35201;&#36820;&#22238;&#32473;&#21040;&#29992;&#25143;&#24577;&#65292;&#36825;&#20010;&#25335;&#36125;&#36807;&#31243;&#20250;&#23558;&#29366;&#24577;&#27809;&#26377;&#21464;&#21270;&#30340;fd&#20063;&#36820;&#22238;&#12290;
   </strong>
  </p>
 </li>
 <li>
  <p>
   select&#20989;&#25968;&#22312;&#20869;&#26680;&#24577;&#20013;&#20381;&#28982;&#26159;&#36890;&#36807;&#36941;&#21382;&#30340;&#26041;&#24335;&#26469;&#21028;&#26029;&#31350;&#31455;&#21738;&#20010;fd&#24050;&#32463;&#22788;&#20110;&#23601;&#32490;&#29366;&#24577;&#12290;
  </p>
 </li>
</ul>
<p>
 &#22240;&#27492;&#65292;epoll&#27169;&#22411;&#23601;&#26159;&#22522;&#20110;&#36825;&#20123;&#19981;&#36275;&#28857;&#30340;&#22522;&#30784;&#19978;&#21435;&#36827;&#34892;&#20248;&#21270;&#30340;&#12290;
</p>
<ul>
 <li>
  &#29992;&#25143;&#24577;&#26080;&#38656;&#23558;&#25972;&#20221;fd&#25968;&#25454;&#22312;&#29992;&#25143;&#24577;&#21644;&#20869;&#26680;&#24577;&#20043;&#38388;&#36827;&#34892;&#25335;&#36125;&#65292;&#21482;&#20250;&#25335;&#36125;&#21457;&#29983;&#21464;&#21270;&#30340;fd&#25968;&#25454;&#12290;
 </li>
 <li>
  &#20869;&#26680;&#24577;&#20013;&#19981;&#20877;&#26159;&#36890;&#36807;&#24490;&#29615;&#36941;&#21382;&#30340;&#26041;&#24335;&#26469;&#21028;&#26029;&#21738;&#20123;fd&#22788;&#20110;&#23601;&#32490;&#29366;&#24577;&#65292;&#32780;&#26159;&#36890;&#36807;&#24322;&#27493;&#20107;&#20214;&#36890;&#30693;&#30340;&#26041;&#24335;&#21578;&#30693;&#12290;
 </li>
 <li>
  &#20869;&#26680;&#24577;&#20250;&#23558;&#26377;&#25968;&#25454;&#25269;&#36798;&#30340;fd&#36820;&#22238;&#21040;&#29992;&#25143;&#24577;&#65292;&#27492;&#26102;&#29992;&#25143;&#24577;&#21487;&#20197;&#20943;&#23569;&#19981;&#24517;&#35201;&#30340;&#36941;&#21382;&#25805;&#20316;&#12290;
 </li>
</ul>
<blockquote>
 <p>
  &#20851;&#20110;epoll&#27169;&#22411;&#30340;&#23448;&#26041;&#22320;&#22336;&#65306;
  <a href="https://www.man7.org/linux/man-pages/man7/epoll.7.html" rel="nofollow noopener noreferrer" target="_blank">
   https://www.man7.org/linux/man-pages/man7/epoll.7.html
  </a>
 </p>
</blockquote>
<p>
 &#37027;&#20040;epoll&#30340;&#20869;&#37096;&#21040;&#24213;&#26159;&#22914;&#20309;&#23558;&#36825;&#20123;&#25216;&#26415;&#28857;&#36827;&#34892;&#20248;&#21270;&#30340;&#21602;&#65311;&#36825;&#37324;&#23601;&#38656;&#35201;&#28145;&#20837;&#20102;&#35299;&#19979;epoll&#20869;&#37096;&#30340;&#19977;&#20010;&#20989;&#25968;&#20195;&#34920;&#12290;
</p>
<ul>
 <li>
  <strong>
   epoll_create
  </strong>
  <strong>
   &#65306;
  </strong>
  &#21019;&#24314;epoll&#30340;&#23454;&#20363;&#23545;&#35937;&#12290;
 </li>
</ul>
<ul>
 <li>
  <strong>
   epoll_ctl
  </strong>
  <strong>
   &#65306;
  </strong>
  &#26681;&#25454;epoll_id&#21435;&#28155;&#21152;&#65292;&#20462;&#25913;&#65292;&#21024;&#38500;&#21508;&#20010;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
 </li>
</ul>
<ul>
 <li>
  <strong>
   epoll_wait
  </strong>
  <strong>
   &#65306;
  </strong>
  &#31561;&#24453;&#22806;&#30028;&#30340;io&#25968;&#25454;&#35831;&#27714;&#65292;&#26377;&#20123;&#31867;&#20284;&#20110;select()&#25805;&#20316;&#12290;
 </li>
</ul>
<p>
 epoll&#27169;&#22411;&#30340;&#20869;&#37096;&#20250;&#26377;&#19968;&#20010;&#21483;&#20570;eventPoll&#30340;&#23545;&#35937;&#65292;&#23427;&#30340;&#20869;&#37096;&#23384;&#22312;&#30528;&#19968;&#20010;&#31561;&#24453;&#38431;&#21015;&#65292;&#31561;&#24453;&#38431;&#21015;&#30340;&#23545;&#35937;&#20854;&#23454;&#23601;&#26159;&#19968;&#22534;&#31561;&#24453;&#30528;&#22806;&#37096;&#38142;&#25509;&#30340;socket&#20449;&#24687;&#12290;
</p>
<p>
 &#24403;&#20854;&#20013;&#30340;&#26576;&#20010;socket&#25509;&#25910;&#21040;&#20102;&#22806;&#30028;&#20256;&#36755;&#36827;&#20837;&#30340;&#25968;&#25454;&#20449;&#24687;&#65292;&#23601;&#20250;&#23558;eventPoll&#20869;&#37096;&#31561;&#24453;&#38431;&#21015;&#30340;&#25968;&#25454;&#36716;&#31227;&#21040;cpu&#23545;&#24212;&#30340;&#24037;&#20316;&#38431;&#21015;&#20013;&#12290;
</p>
<p>
 &#30475;&#36215;&#26469;&#20854;&#23454;epoll&#30340;&#24037;&#20316;&#27969;&#31243;&#36824;&#26159;&#21644;select&#24046;&#19981;&#22810;&#65292;&#20294;&#26159;&#23545;&#20110;socket&#30340;&#38598;&#21512;&#20449;&#24687;&#23384;&#20648;&#21364;&#26377;&#25152;&#19981;&#21516;&#12290;epoll&#24213;&#23618;&#20351;&#29992;&#20102;&#32418;&#40657;&#26641;&#30340;&#25968;&#25454;&#32467;&#26500;&#65292;&#36825;&#31181;&#32467;&#26500;&#21487;&#20197;&#25353;&#29031;&#20107;&#20214;&#31867;&#22411;&#23545;socket&#30340;&#38598;&#21512;&#20449;&#24687;&#36827;&#34892;&#22686;&#21024;&#25913;&#26597;&#65292;&#30456;&#23545;&#39640;&#25928;&#31283;&#23450;&#12290;
</p>
<p>
 &#20026;&#20102;&#26041;&#20415;&#22823;&#23478;&#29702;&#35299;epoll&#30340;&#25191;&#34892;&#36807;&#31243;&#65292;&#36825;&#37324;&#25105;&#32472;&#21046;&#20102;&#19968;&#24352;&#22270;&#24102;&#22823;&#23478;&#29702;&#35299;&#65306;
</p>
<ul>
 <li>
  &#39318;&#20808;&#26159;&#35843;&#29992;epoll_create&#20989;&#25968;&#65292;&#23427;&#20250;&#22312;&#20869;&#26680;&#24577;&#20013;&#24320;&#36767;&#19968;&#22359;&#31354;&#38388;&#12290;
 </li>
</ul>
<p>
 <img alt="image.png" src="EPUB/23acec68-17d9-11ed-92a9-acde48001122">
</p>
<ul>
 <li>
  &#24403;&#29992;&#25143;&#24577;&#35843;&#29992;epoll_ctl&#20989;&#25968;&#30340;&#26102;&#20505;&#65292;&#23601;&#20250;&#24448;&#36825;&#20010;&#20869;&#23384;&#22359;&#21306;&#22495;&#20013;&#25918;&#20837;fd&#12290;
 </li>
</ul>
<p>
 <img alt="image.png" src="EPUB/23c934d6-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#36825;&#20010;&#20989;&#25968;&#23427;&#30340;&#20869;&#37096;&#20854;&#23454;&#36824;&#32454;&#20998;&#20026;&#20102;&#19977;&#20010;&#37096;&#20998;&#65288;EPOLL_CTL_ADD&#12289;EPOLL_CTL_MOD&#12289;EPOLL_CTL_DEL&#65289;&#65292;&#36825;&#19977;&#20010;&#26356;&#32454;&#30340;&#20989;&#25968;&#23558;fd&#38598;&#21512;&#30340;&#20462;&#25913;&#25805;&#20316;&#25286;&#35299;&#24471;&#26356;&#32454;&#31890;&#24230;&#21270;&#12290;
</p>
<ul>
 <li>
  &#29992;&#25143;&#24577;&#35843;&#29992;epoll_wait&#20989;&#25968;&#20043;&#21518;&#20250;&#36827;&#20837;&#19968;&#20010;&#38459;&#22622;&#29366;&#24577;&#65292;&#21482;&#26377;&#31561;&#32593;&#21345;&#25968;&#25454;&#25269;&#36798;&#20043;&#21518;&#65292;epollo_wait&#20989;&#25968;&#25165;&#20250;&#36820;&#22238;&#32593;&#32476;&#25968;&#25454;&#12290;
 </li>
</ul>
<p>
 <img alt="image.png" src="EPUB/23e0788a-17d9-11ed-92a9-acde48001122">
</p>
<p>
 &#21478;&#22806;epollo_wait&#22312;&#35299;&#20915;&#22823;&#37327;fd&#25335;&#36125;&#30340;&#38382;&#39064;&#19978;&#24341;&#20837;&#20102;mmap&#30340;&#25216;&#26415;&#36827;&#34892;&#20248;&#21270;&#12290;mmap&#23558;&#29992;&#25143;&#31354;&#38388;&#30340;&#19968;&#22359;&#22320;&#22336;&#21644;&#20869;&#26680;&#31354;&#38388;&#30340;&#19968;&#22359;&#22320;&#22336;&#21516;&#26102;&#26144;&#23556;&#21040;&#30456;&#21516;&#30340;&#19968;&#22359;&#29289;&#29702;&#20869;&#23384;&#22320;&#22336;&#65288;&#19981;&#31649;&#26159;&#29992;&#25143;&#31354;&#38388;&#36824;&#26159;&#20869;&#26680;&#31354;&#38388;&#37117;&#26159;&#34394;&#25311;&#22320;&#22336;&#65292;&#26368;&#32456;&#35201;&#36890;&#36807;&#22320;&#22336;&#26144;&#23556;&#26144;&#23556;&#21040;&#29289;&#29702;&#22320;&#22336;&#65289;&#65292;&#20351;&#24471;&#36825;&#22359;&#29289;&#29702;&#20869;&#23384;&#23545;&#20869;&#26680;&#21644;&#23545;&#29992;&#25143;&#22343;&#21487;&#35265;&#65292;&#20943;&#23569;&#29992;&#25143;&#24577;&#21644;&#20869;&#26680;&#24577;&#20043;&#38388;&#30340;&#25968;&#25454;&#20132;&#25442;&#12290;
</p>
<h3>
 <strong>
  Netty&#26694;&#26550;&#30340;&#20171;&#32461;
 </strong>
</h3>
<p>
 Netty&#26159;&#19968;&#27454;&#22522;&#20110;NIO&#65288;Nonblocking I/O&#65292;&#38750;&#38459;&#22622;IO&#65289;&#24320;&#21457;&#30340;&#32593;&#32476;&#36890;&#20449;&#26694;&#26550;&#65292;&#23545;&#27604;&#20110;BIO&#65288;Blocking I/O&#65292;&#38459;&#22622;IO&#65289;&#65292;&#23427;&#30340;&#24182;&#21457;&#24615;&#33021;&#24471;&#21040;&#20102;&#24456;&#22823;&#25552;&#39640;&#12290;
</p>
<p>
 <strong>
  &#20256;&#32479;&#30340;&#38459;&#22622;IO
 </strong>
</p>
<p>
 <img alt="" src="EPUB/23fcb608-17d9-11ed-92a9-acde48001122">
</p>
<p>
 <strong>
  &#38750;&#38459;&#22622;IO
 </strong>
</p>
<p>
 <img alt="" src="EPUB/2413a098-17d9-11ed-92a9-acde48001122">
</p>
<h4>
 Netty&#20256;&#36755;&#30340;&#39640;&#24615;&#33021;&#29305;&#28857;
</h4>
<p>
 &#22312;Java&#30340;&#20869;&#23384;&#20013;&#65292;&#23384;&#22312;&#26377;&#22534;&#20869;&#23384;&#12289;&#26632;&#20869;&#23384;&#21644;&#23383;&#31526;&#20018;&#24120;&#37327;&#27744;&#31561;&#31561;&#65292;&#20854;&#20013;&#22534;&#20869;&#23384;&#26159;&#21344;&#29992;&#20869;&#23384;&#31354;&#38388;&#26368;&#22823;&#30340;&#19968;&#22359;&#65292;&#20063;&#26159;Java&#23545;&#35937;&#23384;&#25918;&#30340;&#22320;&#26041;&#65292;&#19968;&#33324;&#25105;&#20204;&#30340;&#25968;&#25454;&#22914;&#26524;&#38656;&#35201;&#20174;IO&#35835;&#21462;&#21040;&#22534;&#20869;&#23384;&#65292;&#20013;&#38388;&#38656;&#35201;&#32463;&#36807;Socket&#32531;&#20914;&#21306;&#65292;&#20063;&#23601;&#26159;&#35828;&#19968;&#20010;&#25968;&#25454;&#20250;&#34987;&#25335;&#36125;&#20004;&#27425;&#25165;&#33021;&#21040;&#36798;&#23427;&#30340;&#32456;&#28857;&#65292;&#22914;&#26524;&#25968;&#25454;&#37327;&#22823;&#65292;&#23601;&#20250;&#36896;&#25104;&#19981;&#24517;&#35201;&#30340;&#36164;&#28304;&#28010;&#36153;&#12290;
</p>
<p>
 Netty&#38024;&#23545;&#36825;&#31181;&#24773;&#20917;&#65292;&#20351;&#29992;&#20102;NIO&#20013;&#30340;&#19968;&#22823;&#29305;&#24615;&#8212;&#8212;&#38646;&#25335;&#36125;&#65292;&#24403;&#23427;&#38656;&#35201;&#25509;&#25910;&#25968;&#25454;&#30340;&#26102;&#20505;&#65292;&#23427;&#20250;&#22312;&#22534;&#20869;&#23384;&#20043;&#22806;&#24320;&#36767;&#19968;&#22359;&#20869;&#23384;&#65292;&#25968;&#25454;&#23601;&#30452;&#25509;&#20174;IO&#35835;&#21040;&#20102;&#37027;&#22359;&#20869;&#23384;&#20013;&#21435;&#65292;&#22312;netty&#37324;&#38754;&#36890;&#36807;ByteBuf&#21487;&#20197;&#30452;&#25509;&#23545;&#36825;&#20123;&#25968;&#25454;&#36827;&#34892;&#30452;&#25509;&#25805;&#20316;&#65292;&#20174;&#32780;&#21152;&#24555;&#20102;&#20256;&#36755;&#36895;&#24230;&#12290;
</p>
<h4>
 Netty&#33391;&#22909;&#30340;&#23553;&#35013;&#24615;&#29305;&#28857;
</h4>
<p>
 &#30456;&#27604;&#20110;JDK&#20869;&#37096;&#25552;&#20379;&#30340;NIO&#32534;&#30721;&#26684;&#24335;&#65292;Netty&#22312;&#36827;&#34892;nio&#25216;&#26415;&#24320;&#21457;&#30340;&#26102;&#20505;&#65292;&#23553;&#35013;&#30340;Api&#26356;&#21152;&#26041;&#20415;&#24320;&#21457;&#32773;&#20351;&#29992;&#65292;&#33021;&#22815;&#38477;&#20302;&#24320;&#21457;&#32773;&#23545;&#20110;&#25805;&#25511;NIO&#25216;&#26415;&#30340;&#38376;&#27099;&#12290;&#20363;&#22914;&#19979;&#36793;&#36825;&#27573;&#22522;&#20110;Netty&#25216;&#26415;&#24320;&#21457;&#30340;&#19968;&#20010;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#31471;&#36890;&#35759;&#31243;&#24207;&#20195;&#30721;&#65306;
</p>
<p>
 <strong>
  &#26381;&#21153;&#31471;&#31243;&#24207;
 </strong>
</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">package</span> org.idea.irpc.framework.core.netty.server;

<span class="hljs-keyword">import</span> io.netty.bootstrap.ServerBootstrap;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInitializer;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelOption;
<span class="hljs-keyword">import</span> io.netty.channel.EventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.socket.SocketChannel;
<span class="hljs-keyword">import</span> io.netty.channel.socket.nio.NioServerSocketChannel;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringDecoder;
<span class="hljs-keyword">import</span> io.netty.handler.codec.string.StringEncoder;


<span class="hljs-comment">/**
 *  <span class="hljs-doctag">@Author</span> linhao
 *  <span class="hljs-doctag">@Date</span> created in 8:12 &#19978;&#21320; 2021/11/29
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Server</span> </span>{

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> EventLoopGroup bossGroup = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> EventLoopGroup workerGroup = <span class="hljs-keyword">null</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException </span>{

        bossGroup = <span class="hljs-keyword">new</span> NioEventLoopGroup();
        workerGroup = <span class="hljs-keyword">new</span> NioEventLoopGroup();
        ServerBootstrap bootstrap = <span class="hljs-keyword">new</span> ServerBootstrap();
        bootstrap.group(bossGroup, workerGroup);
        bootstrap.channel(NioServerSocketChannel.class);
        bootstrap.option(ChannelOption.SO_BACKLOG, <span class="hljs-number">1024</span>);
        bootstrap.option(ChannelOption.SO_SNDBUF, <span class="hljs-number">16</span> * <span class="hljs-number">1024</span>)
                .option(ChannelOption.SO_RCVBUF, <span class="hljs-number">16</span> * <span class="hljs-number">1024</span>)
                .option(ChannelOption.SO_KEEPALIVE, <span class="hljs-keyword">true</span>);
        bootstrap.childHandler(<span class="hljs-keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() {

            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initChannel</span><span class="hljs-params">(SocketChannel ch)</span> <span class="hljs-keyword">throws</span> Exception </span>{
                System.out.println(<span class="hljs-string">"&#21021;&#22987;&#21270;&#36830;&#25509;&#36890;&#36947;&#20449;&#24687;,&#32534;&#35299;&#30721;&#22788;&#29702;&#22120;&#65306;&#23450;&#38271;&#22788;&#29702;&#22120;"</span>);
                ch.pipeline().addLast(<span class="hljs-keyword">new</span> StringEncoder());
<span class="hljs-comment">//                ch.pipeline().addLast(new FixedLengthFrameDecoder(3));</span>
                <span class="hljs-comment">//&#25351;&#23450;&#36890;&#36807;&#22238;&#36710;&#25442;&#34892;&#31526;&#26469;&#35782;&#21035;&#27599;&#27425;&#21457;&#36865;&#30340;&#25968;&#25454;&#65292;&#20294;&#26159;&#19968;&#26086;&#24403;&#25991;&#26412;&#25968;&#25454;&#36229;&#36807;&#31867;maxLength&#23601;&#20250;&#25243;&#20986;&#24322;&#24120;</span>
<span class="hljs-comment">//                ch.pipeline().addLast(new LineBasedFrameDecoder(5));</span>
                <span class="hljs-comment">//&#25351;&#23450;&#29305;&#27530;&#31526;&#21495;&#30340;&#20998;&#21106;&#22788;&#29702;</span>
<span class="hljs-comment">//                ch.pipeline().addLast(new DelimiterBasedFrameDecoder(50, Unpooled.copiedBuffer("[end]".getBytes())));</span>
                ch.pipeline().addLast(<span class="hljs-keyword">new</span> StringDecoder());
                ch.pipeline().addLast(<span class="hljs-keyword">new</span> ServerHandler());
            }
        });
        bootstrap.bind(<span class="hljs-number">9090</span>).sync();
        System.out.println(<span class="hljs-string">"server is open"</span>);
    }
}
</code></pre>
<p>
 <strong>
  &#23458;&#25143;&#31471;&#31243;&#24207;
 </strong>
</p>
<pre><code class="hljs language-java"><span class="hljs-keyword">package</span> org.idea.irpc.framework.core.netty.client;


<span class="hljs-keyword">import</span> io.netty.bootstrap.Bootstrap;
<span class="hljs-keyword">import</span> io.netty.buffer.Unpooled;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelFuture;
<span class="hljs-keyword">import</span> io.netty.channel.ChannelInitializer;
<span class="hljs-keyword">import</span> io.netty.channel.EventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.nio.NioEventLoopGroup;
<span class="hljs-keyword">import</span> io.netty.channel.socket.SocketChannel;
<span class="hljs-keyword">import</span> io.netty.channel.socket.nio.NioSocketChannel;
<span class="hljs-keyword">import</span> java.io.UnsupportedEncodingException;



<span class="hljs-comment">/**
 *  <span class="hljs-doctag">@Author</span> linhao
 *  <span class="hljs-doctag">@Date</span> created in 8:22 &#19978;&#21320; 2021/11/29
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span> </span>{


    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException, UnsupportedEncodingException </span>{

        EventLoopGroup clientGroup = <span class="hljs-keyword">new</span> NioEventLoopGroup();
        Bootstrap bootstrap = <span class="hljs-keyword">new</span> Bootstrap();
        bootstrap.group(clientGroup);
        bootstrap.channel(NioSocketChannel.class);
        bootstrap.handler(<span class="hljs-keyword">new</span> ChannelInitializer&lt;SocketChannel&gt;() {
        
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initChannel</span><span class="hljs-params">(SocketChannel ch)</span> <span class="hljs-keyword">throws</span> Exception </span>{
                ch.pipeline().addLast(<span class="hljs-keyword">new</span> ClientHandler());
            }
        });
        ChannelFuture channelFuture = bootstrap.connect(<span class="hljs-string">"localhost"</span>,<span class="hljs-number">9090</span>).sync();
        <span class="hljs-keyword">while</span> (<span class="hljs-keyword">true</span>){
            Thread.sleep(<span class="hljs-number">2000</span>);
            channelFuture.channel().writeAndFlush(Unpooled.copiedBuffer(<span class="hljs-string">"send data[end]bbbb"</span>.getBytes()));
            System.out.println(<span class="hljs-string">"&#21457;&#36865;&#25968;&#25454;&#65281;"</span>);
        }
    }
}
</code></pre>
<p>
 &#20195;&#30721;&#25972;&#20307;&#24605;&#36335;&#38750;&#24120;&#28165;&#26224;&#65292;&#20869;&#37096;&#23558;&#24050;&#26377;&#30340;NIO&#30456;&#20851;API&#23553;&#35013;&#21040;&#20301;&#65292;&#24320;&#21457;&#32773;&#21487;&#20197;&#28789;&#27963;&#35843;&#25972;&#30456;&#20851;&#30340;&#23646;&#24615;&#12290;
</p>
<h3>
 <strong>
  &#23567;&#32467;
 </strong>
</h3>
<p>
 &#26412;&#25991;&#31995;&#32479;&#22320;&#21644;&#22823;&#23478;&#20171;&#32461;&#20102;IO&#25216;&#26415;&#30340;&#20998;&#31867;&#65306;&#38459;&#22622;IO&#21644;&#38750;&#38459;&#22622;IO&#65292;&#20197;&#21450;&#23427;&#20204;&#21508;&#33258;&#23384;&#22312;&#30340;&#19981;&#36275;&#28857;&#21644;&#30456;&#20851;&#35299;&#20915;&#25163;&#27573;&#12290;&#22312;&#25506;&#35752;&#38750;&#38459;&#22622;IO&#30340;&#21516;&#26102;&#20063;&#28145;&#20837;&#20102;&#35299;&#20102;select&#27169;&#22411;&#12289;poll&#27169;&#22411;&#12289;epoll&#27169;&#22411;&#19977;&#32773;&#22312;&#24213;&#23618;&#23454;&#29616;&#19978;&#30340;&#21306;&#21035;&#65292;&#21516;&#26102;&#20063;&#31616;&#21333;&#22320;&#20171;&#32461;&#20102;&#19979;Netty&#36825;&#27454;&#25216;&#26415;&#26694;&#26550;&#30340;&#20351;&#29992;&#12290;
</p>
<p>
 &#20043;&#25152;&#20197;&#22312;&#23567;&#20876;&#35838;&#31243;&#30340;&#24320;&#22836;&#21644;&#22823;&#23478;&#35762;&#35299;&#36825;&#20123;&#25216;&#26415;&#21407;&#29702;&#65292;&#26159;&#22240;&#20026;&#21518;&#32493;&#25105;&#20204;&#30340;&#23454;&#25112;&#24320;&#21457;&#37117;&#35201;&#22522;&#20110;&#36825;&#20123;&#22522;&#30784;&#30693;&#35782;&#36827;&#34892;&#25193;&#23637;&#12290;&#20102;&#35299;&#20102;&#36825;&#20123;&#65292;&#23545;&#20110;&#21518;&#32493;&#30340;&#23398;&#20064;&#26469;&#35828;&#20250;&#26356;&#21152;
 <strong>
  &#30693;&#20854;&#28982;&#19988;&#30693;&#20854;&#25152;&#20197;&#28982;
 </strong>
 &#12290;
</p>
<p>
 &#22909;&#20102;&#65292;&#30475;&#21040;&#36825;&#37324;&#20320;&#24212;&#35813;&#23545;&#24120;&#29992;&#21040;&#30340;IO&#25216;&#26415;&#21407;&#29702;&#26377;&#20102;&#19968;&#23450;&#30340;&#20102;&#35299;&#20102;&#65292;&#19979;&#19968;&#31456;&#33410;&#20013;&#25105;&#20204;&#23558;&#20250;&#24320;&#22987;&#36890;&#36807;&#20351;&#29992;Netty&#23454;&#25112;&#28436;&#32451;&#26469;&#24320;&#21551;RPC&#26694;&#26550;&#30340;&#24320;&#21457;&#12290;
</p>
<p>
 &#26412;&#25991;&#30456;&#20851;&#30340;&#28304;&#20195;&#30721;&#26696;&#20363;&#22320;&#22336;&#65306;
</p>
<blockquote>
 <p>
  <a href="https://gitee.com/IdeaHome_admin/irpc-framework/tree/lession-01/" rel="nofollow noopener noreferrer" target="_blank">
   https://gitee.com/IdeaHome_admin/irpc-framework/tree/lession-01/
  </a>
 </p>
</blockquote>
<h3>
 &#35838;&#21518;&#24605;&#32771;
</h3>
<p>
 &#20851;&#20110;&#19978;&#19968;&#31687;&#25991;&#31456;&#30340;&#23614;&#37096;&#25105;&#30041;&#20102;&#19968;&#36947;&#24605;&#32771;&#39064;&#65292;&#26159;&#20851;&#20110;&#26412;&#22320;&#35843;&#29992;&#21644;RPC&#35843;&#29992;&#30340;&#27604;&#23545;&#12290;&#36825;&#37324;&#25105;&#31616;&#21333;&#35848;&#19979;&#33258;&#24049;&#30340;&#24605;&#32771;&#65306;
</p>
<p>
 &#22312;&#26089;&#26399;&#30340;&#21333;&#20307;&#24212;&#29992;&#24320;&#21457;&#20013;&#65292;&#22312;&#35843;&#29992;&#26412;&#22320;&#26041;&#27861;&#26102;&#36890;&#24120;&#37117;&#26159;&#20250;&#20808;&#23558;&#19979;&#19968;&#26465;&#30340;&#25351;&#20196;&#21387;&#20837;&#21040;&#25805;&#20316;&#25968;&#26632;&#37324;&#38754;&#65292;&#28982;&#21518;&#24403;&#24403;&#21069;&#20989;&#25968;&#25191;&#34892;&#23436;&#27605;&#20043;&#21518;&#20877;&#21435;&#35843;&#29992;&#23427;&#12290;&#36825;&#26679;&#30340;&#35843;&#29992;&#21407;&#29702;&#26159;&#36890;&#36807;CPU&#23547;&#22336;&#30340;&#26041;&#24335;&#26469;&#35843;&#29992;&#26041;&#27861;&#65292;&#20294;&#26159;&#23545;&#20110;&#36828;&#31243;&#30340;&#26041;&#27861;&#24341;&#29992;&#65292;&#21333;&#32431;&#20381;&#38752;&#26412;&#26426;&#30340;CPU&#23547;&#22336;&#26159;&#19981;&#21487;&#33021;&#23454;&#29616;&#30340;&#65292;&#22240;&#27492;&#36824;&#24471;&#38656;&#35201;&#24341;&#29992;&#21040;SOCKET&#25216;&#26415;&#12290;&#25152;&#20197;RPC&#25216;&#26415;&#19981;&#20165;&#20165;&#23616;&#38480;&#20110;&#21333;&#21488;&#29289;&#29702;&#26426;&#23618;&#38754;&#65292;&#26356;&#22810;&#30340;&#38656;&#35201;&#32593;&#32476;&#23618;&#38754;&#30340;SOCKET&#36890;&#35759;&#24110;&#21161;&#65292;&#20174;&#32780;&#23454;&#29616;&#36828;&#31243;&#30340;&#26041;&#27861;&#35843;&#29992;&#12290;
</p>
<p>
 &#38500;&#24320;&#32771;&#34385;&#32593;&#32476;&#23618;&#38754;&#30340;&#22240;&#32032;&#20043;&#22806;&#65292;RPC&#35843;&#29992;&#36824;&#38656;&#35201;&#39069;&#22806;&#32771;&#34385;&#20998;&#24067;&#24335;&#19979;&#30340;&#19968;&#20123;&#38382;&#39064;&#65306;
</p>
<ul>
 <li>
  &#38754;&#23545;&#38598;&#32676;&#19979;&#30340;&#26381;&#21153;&#25552;&#20379;&#32773;&#65292;&#21457;&#36215;&#36828;&#31243;&#35843;&#29992;&#30340;&#26102;&#20505;&#38656;&#35201;&#26377;&#36335;&#30001;&#31574;&#30053;&#12290;
 </li>
 <li>
  &#36828;&#31243;&#35843;&#29992;&#25152;&#20256;&#36755;&#30340;&#25968;&#25454;&#21253;&#30340;&#22823;&#23567;&#38656;&#35201;&#30001;&#23458;&#25143;&#31471;&#21644;&#26381;&#21153;&#31471;&#20849;&#21516;&#32422;&#23450;&#12290;
 </li>
 <li>
  &#26412;&#22320;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#26381;&#21153;&#25552;&#20379;&#30340;&#21387;&#21147;&#20027;&#35201;&#26469;&#33258;&#20110;&#26412;&#22320;&#35843;&#29992;&#32773;&#65292;&#32780;&#22312;RPC&#20013;&#65292;&#26381;&#21153;&#25552;&#20379;&#26041;&#30340;&#21387;&#21147;&#26377;&#21487;&#33021;&#20250;&#26469;&#33258;&#22810;&#20010;&#35843;&#29992;&#26041;&#12290;
 </li>
 <li>
  &#26412;&#22320;&#35843;&#29992;&#30340;&#26102;&#20505;&#65292;&#22833;&#36133;&#32467;&#26524;&#21487;&#20197;&#31435;&#39532;&#36820;&#22238;&#65292;&#32780;rpc&#35843;&#29992;&#21487;&#33021;&#19981;&#20250;&#31435;&#39532;&#36820;&#22238;&#24322;&#24120;&#23548;&#33268;&#23458;&#25143;&#31471;&#35843;&#29992;&#36229;&#26102;&#12290;
 </li>
</ul>
<p>
 &#21516;&#26679;&#30340;&#65292;&#20170;&#22825;&#30340;&#35838;&#31243;&#32467;&#23614;&#65292;&#25105;&#20063;&#25171;&#31639;&#32473;&#22823;&#23478;&#30041;&#19968;&#36947;&#24605;&#32771;&#39064;&#65306;&#33261;&#21517;&#26157;&#33879;&#30340;JDK NIO&#31354;&#25351;&#38024;BUG&#22823;&#23478;&#26159;&#21542;&#26377;&#25152;&#20102;&#35299;&#21602;&#65311;&#24863;&#20852;&#36259;&#30340;&#26379;&#21451;&#21487;&#20197;&#22312;&#35780;&#35770;&#21306;&#20013;&#36827;&#34892;&#35752;&#35770;&#12290;
</p>
</div>

</div>
</div>

        </body>
        
        