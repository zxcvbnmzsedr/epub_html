
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <div class="article-con">
 <!-- &#20080;&#36807;&#30340;&#38405;&#35835; -->
 <div class="art-title" style="margin-top: 0px;">
  23 &#25353;&#38656;&#19978;&#38145;&#8212;ReadWriteLock&#35814;&#35299;
 </div>
 <div class="art-info clearfix">
  <span class="l">
   &#26356;&#26032;&#26102;&#38388;&#65306;2019-11-16 17:36:26
  </span>
 </div>
 <div class="art-top">
  <img alt="" src="EPUB/c3ad890e-186d-11ed-a978-acde48001122">
  <div class="famous-word-box">
   <img alt="" class="bg1 bg" src="EPUB/c3e10716-186d-11ed-a978-acde48001122">
   <img alt="" class="bg2 bg" src="EPUB/c40fdc44-186d-11ed-a978-acde48001122">
   <div class="famous-word">
    &#21512;&#29702;&#23433;&#25490;&#26102;&#38388;&#65292;&#23601;&#31561;&#20110;&#33410;&#32422;&#26102;&#38388;&#12290;
    <p class="author">
     &#8212;&#8212;&#22521;&#26681;
    </p>
   </div>
  </div>
 </div>
 <div class="art-content js-lookimg">
  <div id="article_content">
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#21069;&#25991;&#25105;&#20204;&#20998;&#26512;&#20102; java.util.concurrent.locks &#21253;&#19979;&#30340; Lock &#25509;&#21475;&#21644;&#23427;&#30340;&#23454;&#29616; ReentrantLock&#12290;ReentrantLock &#26159;&#19968;&#31181;&#26174;&#24335;&#38145;&#65292;&#25552;&#20379;&#26356;&#20026;&#39640;&#32423;&#30340;&#21151;&#33021;&#65292;&#20294;&#38656;&#35201;&#26174;&#24335;&#30340;&#19978;&#38145;&#21644;&#35299;&#38145;&#12290;ReentrantLock &#20063;&#26159;&#20114;&#26021;&#38145;&#65292;&#26377;&#22914;&#19979;&#19977;&#31181;&#20114;&#26021;&#24773;&#20917;&#65306;&#35835;/&#20889;&#12289;&#20889;/&#20889;&#12289;&#35835;/&#35835;&#12290;ReentrantLock &#30340;&#21152;&#38145;&#31574;&#30053;&#26159;&#20445;&#23432;&#30340;&#65292;&#20219;&#24847;&#25805;&#20316;&#37117;&#38656;&#35201;&#20808;&#21152;&#38145;&#25165;&#21487;&#20197;.&#20294;&#20854;&#23454;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#25511;&#21046;&#8220;&#35835;/&#20889;&#8221;&#21644;&#8220;&#20889;/&#20889;&#8221;&#36825;&#20004;&#31181;&#20114;&#26021;&#24773;&#20917;&#12290;&#19968;&#33324;&#24773;&#20917;&#19979;&#65292;&#32477;&#22823;&#22810;&#25968;&#31243;&#24207;&#20013;&#35835;&#25805;&#20316;&#27604;&#20363;&#26356;&#22823;&#12290;&#20854;&#23454;&#35835;&#25805;&#20316;&#20043;&#38388;&#24182;&#19981;&#38656;&#35201;&#20114;&#26021;&#65292;&#22240;&#20026;&#35835;&#30340;&#38656;&#27714;&#26159;&#35835;&#21040;&#26368;&#26032;&#30340;&#25968;&#25454;&#65292;&#24182;&#19988;&#22312;&#35835;&#30340;&#21516;&#26102;&#19981;&#35201;&#26377;&#20854;&#23427;&#32447;&#31243;&#20462;&#25913;&#25968;&#25454;&#21363;&#21487;&#12290;&#37027;&#25105;&#20204;&#38656;&#35201;&#30340;&#38145;&#26159;&#8220;&#35835;/&#20889;&#8221;&#20114;&#26021;&#65292;&#32780;&#8220;&#35835;/&#35835;&#8221;&#24182;&#19981;&#20114;&#26021;&#12290;&#36825;&#26679;&#30340;&#22909;&#22788;&#26159;&#65292;&#35835;&#25805;&#20316;&#21487;&#20197;&#24182;&#21457;&#36827;&#34892;&#65292;&#20943;&#23569;&#20102;&#20114;&#26021;&#30340;&#24773;&#20917;&#65292;&#33021;&#22815;&#25552;&#21319;&#31243;&#24207;&#30340;&#24615;&#33021;&#12290;&#25171;&#20010;&#27604;&#26041;&#65292;&#25105;&#20204;&#21435;&#26053;&#28216;&#65292;&#22312;&#35266;&#26223;&#21488;&#22823;&#23478;&#21487;&#20197;&#19968;&#22359;&#27427;&#36175;&#39118;&#26223;&#65292;&#36825;&#23601;&#26159; &#8220;&#35835;/&#35835;&#8221; &#24182;&#19981;&#20114;&#26021;&#65292;&#22823;&#23478;&#21487;&#20197;&#22312;&#35266;&#26223;&#21488;&#19968;&#22359;&#30475;&#12290;&#20294;&#26159;&#20551;&#22914;&#22312;&#35266;&#26223;&#21488;&#26377;&#20010;&#26395;&#36828;&#38236;&#65292;&#38656;&#35201;&#20351;&#29992;&#26395;&#36828;&#38236;&#25165;&#33021;&#30475;&#28165;&#12290;&#37027;&#20040;&#23601;&#21464;&#25104;&#20102; &#8220;&#35835;/&#35835;&#8221; &#20114;&#26021;&#65292;&#20154;&#22810;&#30340;&#35805;&#26174;&#28982;&#20250;&#36896;&#25104;&#25490;&#38431;&#29616;&#35937;&#12290;
     <br>
     <img alt="&#22270;&#29255;&#25551;&#36848;" class="" data-original="//img.mukewang.com/5dc37ef8000162e908460514.jpg" src="EPUB/c42b5d34-186d-11ed-a978-acde48001122">
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#26174;&#28982; ReentrantLock &#21644; synchronized &#26159;&#20570;&#19981;&#21040;&#36825;&#19968;&#28857;&#30340;&#65292;&#26412;&#33410;&#25105;&#20204;&#20250;&#20171;&#32461;&#19968;&#31181;&#26032;&#30340;&#38145;&#8212;&#35835;&#20889;&#38145; ReadWriteLock&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <h2 id="&#12289;readwritelock-&#31616;&#20171;" style="font-size: 30px;">
     1&#12289;ReadWriteLock &#31616;&#20171;
    </h2>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     ReadWriteLock &#20026;&#25105;&#20204;&#25552;&#20379;&#20102;&#35835;&#20889;&#20043;&#38388;&#19981;&#21516;&#20114;&#26021;&#31574;&#30053;&#30340;&#38145;&#12290;&#22240;&#27492;&#65292;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#20182;&#33021;&#22815;&#24102;&#26469;&#26356;&#22909;&#30340;&#24615;&#33021;&#12290;&#19968;&#33324;&#26469;&#35828;&#65292;&#20551;&#22914;&#20320;&#30340;&#31243;&#24207;&#26377;&#39057;&#32321;&#30340;&#35835;&#25805;&#20316;&#65292;&#37027;&#20040;ReadWriteLock&#21487;&#33021;&#20250;&#20026;&#20320;&#24102;&#26469;&#24615;&#33021;&#30340;&#25552;&#21319;&#12290;&#20294;&#26159;&#30001;&#20110;&#35835;&#20889;&#25511;&#21046;&#30340;&#31574;&#30053;&#19981;&#19968;&#26679;&#65292;&#24102;&#26469;&#20102;&#38145;&#20869;&#37096;&#30340;&#22797;&#26434;&#24230;&#12290;&#25152;&#20197;&#22914;&#26524;&#20320;&#31243;&#24207;&#30340;&#35835;&#25805;&#20316;&#24182;&#27809;&#26377;&#36798;&#21040;&#19968;&#23450;&#25968;&#37327;&#65292;&#21453;&#32780;&#20351;&#29992;&#35835;&#20889;&#38145;&#20250;&#27604;&#20114;&#26021;&#38145;&#24615;&#33021;&#26356;&#24046;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#22240;&#27492; ReadWriteLock &#26159;&#19968;&#31181;&#25552;&#21319;&#24615;&#33021;&#30340;&#25163;&#27573;&#65292;&#20294;&#19981;&#19968;&#23450;&#22863;&#25928;&#12290;&#25105;&#20204;&#30340;&#31243;&#24207;&#21487;&#20197;&#23581;&#35797;&#20351;&#29992;&#23427;&#26469;&#35843;&#33410;&#24615;&#33021;&#65292;&#22914;&#26524;&#21457;&#29616;&#27809;&#26377;&#25928;&#26524;&#25110;&#32773;&#26356;&#24046;&#65292;&#20063;&#21487;&#20197;&#24456;&#26041;&#20415;&#30340;&#25442;&#22238;&#20114;&#26021;&#38145;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     ReadWriteLock &#39038;&#21517;&#24605;&#20041;&#35835;&#20889;&#38145;&#65292;&#20063;&#23601;&#26159;&#35828;&#21516;&#19968;&#20010;&#38145;&#23545;&#35835;&#21644;&#20889;&#30340;&#19978;&#38145;&#26041;&#24335;&#26159;&#19981;&#19968;&#26679;&#30340;&#20889;&#38145;&#30340;&#20114;&#26021;&#24615;&#26356;&#39640;&#12290;&#36825;&#37324;&#25105;&#20204;&#26469;&#30475;&#30475;&#38145;&#38477;&#32423;&#21644;&#21319;&#32423;&#30340;&#27010;&#24565;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     <strong>
      &#38145;&#38477;&#32423;
     </strong>
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#22914;&#26524;&#32447;&#31243;&#25345;&#26377;&#20889;&#38145;&#65292;&#22914;&#26524;&#21487;&#20197;&#22312;&#19981;&#37322;&#25918;&#20889;&#38145;&#30340;&#24773;&#20917;&#19979;&#65292;&#33719;&#21462;&#35835;&#38145;&#65292;&#36825;&#23601;&#26159;&#38145;&#38477;&#32423;&#12290;ReadWriteLock &#26159;&#25903;&#25345;&#38145;&#38477;&#32423;&#30340;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     <strong>
      &#38145;&#21319;&#32423;
     </strong>
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#22914;&#26524;&#32447;&#31243;&#25345;&#26377;&#35835;&#38145;&#65292;&#37027;&#20040;&#20182;&#26159;&#21542;&#21487;&#20197;&#19981;&#37322;&#25918;&#35835;&#38145;&#65292;&#30452;&#25509;&#33719;&#21462;&#20889;&#38145;&#12290;&#36825;&#24847;&#21619;&#30528;&#20174;&#19968;&#20010;&#20302;&#32423;&#21035;&#30340;&#38145;&#21319;&#32423;&#21040;&#39640;&#32423;&#21035;&#30340;&#38145;&#12290;&#20854;&#23454;&#23601;&#26159;&#21464;&#30456;&#30340;&#25554;&#38431;&#65292;&#26080;&#35270;&#20854;&#23427;&#22312;&#25490;&#38431;&#31561;&#24453;&#20889;&#38145;&#30340;&#32447;&#31243;&#12290;ReadWriteLock &#24182;&#19981;&#25903;&#25345;&#38145;&#21319;&#32423;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20197;&#19978;&#20004;&#31181;&#27010;&#24565;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#20889;&#27573;&#20195;&#30721;&#26469;&#20307;&#39564;&#19979;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20195;&#30721;&#19968;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>
        ReadWriteLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Lock readLock <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Lock writeLock <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        writeLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"got the write lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        readLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"got the read lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#36755;&#20986;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java">got the write lock
got the read lock
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20195;&#30721;&#20108;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> InterruptedException <span class="token punctuation">{</span>
        ReadWriteLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Lock readLock <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Lock writeLock <span class="token operator">=</span> lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        readLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"got the read lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writeLock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"got the write lock"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#36755;&#20986;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java">got the read lock
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#31532;&#19968;&#27573;&#20195;&#30721;&#20013;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;&#33719;&#21462;&#20889;&#38145;&#21518;&#65292;&#20877;&#27425;&#25104;&#21151;&#33719;&#24471;&#35835;&#38145;&#12290;&#32780;&#20195;&#30721; 2 &#20013;&#65292;&#25105;&#20204;&#22312;&#33719;&#21462;&#35835;&#38145;&#21518;&#35797;&#22270;&#21435;&#33719;&#21462;&#20889;&#38145;&#12290;&#36825;&#26679;&#20250;&#20351;&#24471;&#31243;&#24207;&#38459;&#22622;&#22312; readLock.lock()&#12290;&#30001;&#20110; writeLock &#27809;&#26377;&#26426;&#20250; unlock&#65292;&#23601;&#24418;&#25104;&#20102;&#27515;&#38145;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <h2 id="&#12289;readwritelock&#20351;&#29992;" style="font-size: 30px;">
     2&#12289;ReadWriteLock&#20351;&#29992;
    </h2>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     ReadWriteLock &#20351;&#29992;&#36215;&#26469;&#20854;&#23454;&#24456;&#31616;&#21333;&#65292;&#21644; Lock &#22522;&#26412;&#19968;&#33268;&#12290;&#25105;&#20204;&#20351;&#29992;&#23427;&#20027;&#35201;&#26159;&#20026;&#20102;&#23545;&#24615;&#33021;&#36827;&#34892;&#20248;&#21270;&#12290;&#25105;&#20204;&#36890;&#36807;&#19979;&#38754;&#30340;&#20363;&#23376;&#65292;&#19968;&#26159;&#29087;&#24713;&#23427;&#30340;&#20351;&#29992;&#65292;&#20108;&#26469;&#20063;&#21487;&#20197;&#27979;&#35797;&#19979;&#23427;&#23545;&#24615;&#33021;&#30340;&#20248;&#21270;&#25928;&#26524;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#39318;&#20808;&#25105;&#20204;&#30475;&#20351;&#29992; Lock &#30340;&#24773;&#20917;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LockExample</span> <span class="token punctuation">{</span>
    String myName<span class="token punctuation">;</span>
    ReentrantLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"My name is "</span> <span class="token operator">+</span> myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            myName<span class="token operator">=</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"set my name to "</span> <span class="token operator">+</span> myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Long startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LockExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LockExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                example<span class="token punctuation">.</span><span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                example<span class="token punctuation">.</span><span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                example<span class="token punctuation">.</span><span class="token function">printMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"NO. "</span><span class="token operator">+</span>num<span class="token operator">+</span><span class="token string">" reader finished. Time passed: "</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>startTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20197;&#19978;&#20195;&#30721;&#25105;&#20204;&#21551;&#21160;&#20102;&#20004;&#20010;&#32447;&#31243;&#19981;&#26029;&#20889;&#20837;&#65292;&#27599;&#27425;&#38388;&#38548; 10ms&#65292; &#20197;&#35753;&#20854;&#23427;&#32447;&#31243;&#33021;&#22815;&#33719;&#21462;&#21040;&#38145;&#12290;&#21478;&#22806;&#26377; 100 &#20010;&#35835;&#32447;&#31243; &#65292;&#27599;&#27425;&#35835;&#21462;&#23436;&#25104;&#65292;&#30561;&#30496; 10ms&#65292;&#30446;&#30340;&#26159;&#24310;&#36831;&#35835;&#38145;&#30340;&#37322;&#25918;&#12290;&#30001;&#20110;&#20351;&#29992;&#20102;&#25490;&#20182;&#38145;&#65292;&#25152;&#20197;&#35835;&#21462;&#25805;&#20316;&#38388;&#26159;&#20114;&#26021;&#30340;&#65292;&#27599;&#27425;&#35835;&#21462;&#37117;&#35201;&#31561; 10ms &#37322;&#25918;&#38145;&#21518;&#65292;&#20854;&#23427;&#32447;&#31243;&#25165;&#33021;&#35835;&#21462;&#12290;&#37027;&#20040; 100 &#27425;&#35835;&#21462;&#23601;&#33267;&#23569;&#33457;&#36153;&#20102; 100*10 = 1000ms&#12290;&#20877;&#21152;&#19978;&#20854;&#23427;&#28040;&#32791;&#65292;&#25152;&#20197;&#26368;&#32456;&#20840;&#37096;&#35835;&#21462;&#32447;&#31243;&#23436;&#25104;&#24037;&#20316;&#30340;&#26102;&#20505;&#65292;&#36807;&#21435;&#20102; 1182ms&#12290;&#36755;&#20986;&#22914;&#19979;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre><code>NO. 96 reader finished. Time passed: 1148
Thread-99My name is Thread-0
NO. 97 reader finished. Time passed: 1160
Thread-100My name is Thread-0
NO. 98 reader finished. Time passed: 1172
Thread-101My name is Thread-0
NO. 99 reader finished. Time passed: 1182
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#25509;&#19979;&#26469;&#25105;&#20204;&#25913;&#36896;&#19979;&#31243;&#24207;&#65292;&#25913;&#20026; ReadWriteLock&#65292;&#20195;&#30721;&#22914;&#19979;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReadWriteLockExample</span> <span class="token punctuation">{</span>
    String myName<span class="token punctuation">;</span>
    ReentrantReadWriteLock lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"My name is "</span> <span class="token operator">+</span> myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">readLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            myName<span class="token operator">=</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>Thread<span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"set my name to "</span> <span class="token operator">+</span> myName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">writeLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Long startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ReadWriteLockExample example <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadWriteLockExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                example<span class="token punctuation">.</span><span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

                example<span class="token punctuation">.</span><span class="token function">setMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    Thread<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        IntStream<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>num<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>
                example<span class="token punctuation">.</span><span class="token function">printMyName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"NO. "</span><span class="token operator">+</span>num<span class="token operator">+</span><span class="token string">" reader finished. Time passed: "</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span>startTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#21487;&#20197;&#30475;&#21040;&#21482;&#26159;&#25226;&#38145;&#25442;&#25104;&#20102; ReentrantReadWriteLock&#65292;&#28982;&#21518; printMyName &#20013;&#20351;&#29992;&#35835;&#38145;&#65292;setMyName &#20013;&#20351;&#29992;&#20889;&#38145;&#12290;&#36816;&#34892;&#21518;&#36755;&#20986;&#22914;&#19979;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre><code>NO. 92 reader finished. Time passed: 97
NO. 96 reader finished. Time passed: 97
Thread-0set my name to Thread-0
NO. 98 reader finished. Time passed: 97
Thread-1set my name to Thread-1
NO. 99 reader finished. Time passed: 97
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#26368;&#21518;&#19968;&#20010; reader &#23436;&#25104;&#24037;&#20316;&#65292;&#21482;&#29992;&#20102; 97ms&#65292;&#23545;&#27604;&#36215;&#20351;&#29992;&#20114;&#26021;&#38145;&#30340; 1182ms&#65292;&#36895;&#24230;&#25552;&#21319;&#20102; 10&#20493;&#20197;&#19978;&#65281;&#21407;&#22240;&#23601;&#26159;&#35835;&#25805;&#20316;&#20043;&#38388;&#19981;&#20250;&#20114;&#26021;&#65292;&#21487;&#20197;&#24182;&#21457;&#35835;&#21462;&#12290;&#20174;&#32780;&#24615;&#33021;&#22823;&#24133;&#24230;&#24471;&#21040;&#25552;&#21319;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <h2 id="&#12289;readwritelock-&#20351;&#29992;&#22330;&#26223;" style="font-size: 30px;">
     3&#12289;ReadWriteLock &#20351;&#29992;&#22330;&#26223;
    </h2>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20174;&#19978;&#38754;&#20363;&#23376;&#21487;&#20197;&#30475;&#20986;&#65292;&#22914;&#26524;&#35835;&#25805;&#20316;&#36828;&#36828;&#22810;&#20110;&#20889;&#25805;&#20316;&#65292;&#20351;&#29992; ReadWriteLock &#21487;&#20197;&#22823;&#24133;&#25552;&#21319;&#24615;&#33021;&#12290;&#20294;&#22914;&#26524;&#26159;&#19968;&#20010;&#20889;&#20837;&#23494;&#38598;&#22411;&#30340;&#31243;&#24207;&#65292;&#37027;&#20040; ReadWriteLock &#24182;&#19981;&#20250;&#24102;&#26469;&#26174;&#33879;&#24615;&#33021;&#30340;&#25552;&#21319;&#65292;&#22240;&#20026;&#21363;&#20351;&#20351;&#29992; ReadWriteLock&#65292;&#8220;&#20889;/&#20889;&#8221;&#21450;&#8220;&#35835;/&#20889;&#8221;&#20381;&#26087;&#26159;&#20114;&#26021;&#30340;&#12290;&#24182;&#19988;&#30001;&#20110;&#35201;&#20998;&#24320;&#25511;&#21046;&#35835;&#20889;&#20004;&#31181;&#38145;&#65292;&#36824;&#38656;&#35201;&#39069;&#22806;&#30340;&#24320;&#38144;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#22914;&#26524;&#20320;&#30340;&#24182;&#21457;&#31243;&#24207;&#23384;&#22312;&#24615;&#33021;&#38382;&#39064;&#65292;&#21487;&#20197;&#25226; ReadWriteLock &#20316;&#20026;&#24615;&#33021;&#35843;&#20248;&#30340;&#25163;&#27573;&#65292;&#36827;&#34892;&#23581;&#35797;&#12290;&#31350;&#31455;&#35835;&#21644;&#20889;&#30340;&#32447;&#31243;&#36798;&#21040;&#20160;&#20040;&#27604;&#20363;&#26102;&#65292;&#20351;&#29992; ReadWriteLock &#24615;&#33021;&#26356;&#22909;&#65292;&#20854;&#23454;&#24182;&#27809;&#26377;&#23450;&#35770;&#12290;&#23436;&#20840;&#21644;&#20320;&#30340;&#31243;&#24207;&#22330;&#26223;&#26377;&#20851;&#31995;&#65292;&#25152;&#20197;&#20351;&#29992; ReadWriteLock &#20570;&#24615;&#33021;&#35843;&#20248;&#26102;&#65292;&#19968;&#23450;&#35201;&#22522;&#20110;&#23454;&#38469;&#30340;&#27979;&#35797;&#25968;&#25454;&#65292;&#32780;&#19981;&#26159;&#19968;&#32929;&#33041;&#30340;&#20840;&#37096;&#20351;&#29992; ReadWriteLock&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <h2 id="&#12289;readwritelock-&#23454;&#29616;" style="font-size: 30px;">
     4&#12289;ReadWriteLock &#23454;&#29616;
    </h2>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#20851;&#20110; ReadWriteLock &#30340;&#23454;&#29616;&#65292;&#25105;&#20204;&#20808;&#30475;&#19979;&#38754;&#30340;&#31867;&#22270;&#65306;
     <br>
     <img alt="&#22270;&#29255;&#25551;&#36848;" class="" data-original="//img.mukewang.com/5dc37eb40001705d08130325.jpg" src="EPUB/c44584a2-186d-11ed-a978-acde48001122">
    </p>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#21487;&#20197;&#30475;&#21040; ReentrantReadWriteLock &#20013;&#25345;&#26377; readerLock &#21644; writerLock &#20004;&#25226;&#38145;&#65292;&#32780;&#36825;&#20004;&#25226;&#38145;&#20063;&#26159; Lock &#25509;&#21475;&#30340;&#23454;&#29616;&#12290;ReadLock &#38388;&#30001;&#20110;&#26159;&#38750;&#20114;&#26021;&#30340;&#65292;&#25152;&#20197;ReadLock&#23545;lock&#26041;&#27861;&#30340;&#23454;&#29616;&#22914;&#19979;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sync<span class="token punctuation">.</span><span class="token function">acquireShared</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#32780;WriteLock&#23545;lock&#26041;&#27861;&#30340;&#23454;&#29616;&#21017;&#26159;&#22914;&#19979;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sync<span class="token punctuation">.</span><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#21487;&#20197;&#30475;&#21040; ReadLock &#30340; lock &#26041;&#27861;&#20013;&#35843;&#29992;&#30340;&#26159; acquireShared&#65292;&#20063;&#23601;&#26159;&#20849;&#20139;&#26041;&#24335;&#33719;&#21462;&#38145;&#12290;&#20004;&#32773;&#37117;&#26159;&#36890;&#36807; sync &#26469;&#23454;&#29616;&#65292;&#20004;&#31181;&#38145;&#30340; sync &#23545;&#35937;&#37117;&#26159;&#26469;&#33258; ReentrantReadWriteLock &#30340;&#26500;&#36896;&#20989;&#25968;&#65306;
    </p>
   </div>
   <div class="cl-preview-section">
    <pre class="language-java"><code class="prism language-java"><span class="token keyword">public</span> <span class="token function">ReentrantReadWriteLock</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> fair<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    sync <span class="token operator">=</span> fair <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">FairSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">NonfairSync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    readerLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadLock</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    writerLock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WriteLock</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#32780; Sync &#20043;&#21069;&#25105;&#20204;&#24050;&#32463;&#35762;&#35299;&#36807;&#65292;&#23427;&#32487;&#25215;&#33258; AbstractQueuedSynchronizer&#65292;&#20063;&#23601;&#26159; AQS&#12290;&#36890;&#36807; AQS &#25552;&#20379;&#30340;&#27169;&#29256;&#23454;&#29616;&#21516;&#27493;&#21407;&#35821;&#12290;&#32780;&#26368;&#32456;&#30340;&#23454;&#29616;&#26041;&#24335;&#21017;&#26159;&#22312; AbstractQueuedSynchronizer &#30340;&#23376;&#31867;&#65292;&#20063;&#23601;&#26159; FairSync &#21644; NonfairSync &#20013;&#12290;AQS &#30340;&#21407;&#29702;&#20043;&#21069;&#24050;&#32463;&#35762;&#36807;&#12290;&#32467;&#21512; AQS &#30340;&#21407;&#29702;&#65292;&#20877;&#21152;&#19978;&#20043;&#21069;&#25105;&#20204;&#23545; ReentrantLock &#28304;&#20195;&#30721;&#30340;&#20998;&#26512;&#65292;&#20877;&#26469;&#20998;&#26512; ReentrantReadWriteLock &#30340;&#28304;&#20195;&#30721;&#65292;&#24182;&#19981;&#22256;&#38590;&#65292;&#22823;&#23478;&#21487;&#20197;&#33258;&#34892;&#32487;&#32493;&#20998;&#26512;&#12290;
    </p>
   </div>
   <div class="cl-preview-section">
    <h2 id="&#12289;&#24635;&#32467;" style="font-size: 30px;">
     5&#12289;&#24635;&#32467;
    </h2>
   </div>
   <div class="cl-preview-section">
    <p style="font-size: 20px; line-height: 38px;">
     &#26412;&#33410;&#25105;&#20204;&#21448;&#23398;&#20064;&#20102;&#19968;&#31181;&#27604;&#36739;&#23454;&#29992;&#30340;&#38145;&#12290;ReentrantReadWriteLock &#20801;&#35768;&#24182;&#21457;&#30340;&#35835;&#65292;&#22914;&#26524;&#20320;&#30340;&#31243;&#24207;&#20197;&#35835;&#21462;&#20026;&#20027;&#65292;&#37027;&#20040;&#20351;&#29992; ReentrantReadWriteLock &#20250;&#26174;&#33879;&#25552;&#21319;&#20320;&#30340;&#24615;&#33021;&#12290;&#20294;&#22914;&#26524;&#22330;&#26223;&#19981;&#31526;&#21512;&#65292;&#19981;&#20294;&#19981;&#20250;&#25552;&#21319;&#24615;&#33021;&#65292;&#36824;&#20250;&#22240;&#20026;&#38145;&#30340;&#22797;&#26434;&#24230;&#65292;&#21453;&#32780;&#38477;&#32423;&#24615;&#33021;&#12290;
    </p>
   </div>
   }
  </div>
 </div>
 <!-- &#20080;&#36807;&#30340;&#38405;&#35835; -->
 <div class="art-next-prev clearfix">
  <!-- &#24050;&#20080;&#19988;&#24320;&#25918; &#25110;&#32773;&#21487;&#20197;&#35797;&#35835; -->
  <a href="/read/49/article/957">
   <div class="prev l clearfix">
    <div class="icon l">
     <i class="imv2-arrow3_l">
     </i>
    </div>
    <p>
     22 &#21040;&#24213;&#21738;&#25226;&#38145;&#26356;&#36866;&#21512;&#20320;&#65311;&#8212;synchronized&#19982;ReentrantLock&#23545;&#27604;
    </p>
   </div>
  </a>
  <!-- &#24050;&#20080;&#19988;&#24320;&#25918; &#25110;&#32773;&#21487;&#20197;&#35797;&#35835; -->
  <a href="/read/49/article/959">
   <div class="next r clearfix">
    <p>
     24 &#32463;&#20856;&#24182;&#21457;&#23481;&#22120;&#65292;&#22810;&#32447;&#31243;&#38754;&#35797;&#24517;&#22791;&#12290;&#8212;&#28145;&#20837;&#35299;&#26512;ConcurrentHashMap
    </p>
    <div class="icon r">
     <i class="imv2-arrow3_r">
     </i>
    </div>
   </div>
  </a>
 </div>
</div>

</div>

</div>
</div>

        </body>
        
        