
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#19987;&#39064;&#24335;&#35762;&#35299; &#8212;&#8212; &#35821;&#21477;&#21152;&#38145;&#20998;&#26512;&#23454;&#20363;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1>
 &#35821;&#21477;&#21152;&#38145;&#20998;&#26512;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<h2>
 &#20107;&#21069;&#20934;&#22791;
</h2>
<p>
 &#24314;&#31435;&#19968;&#20010;&#23384;&#20648;&#19977;&#22269;&#33521;&#38596;&#30340;
 <code>
  hero
 </code>
 &#34920;&#65306;
</p>
<pre><code>CREATE TABLE hero (
    number INT,
    name VARCHAR(100),
    country varchar(100),
    PRIMARY KEY (number),
    KEY idx_name (name)
) Engine=InnoDB CHARSET=utf8;
</code></pre>
<p>
 &#28982;&#21518;&#21521;&#36825;&#20010;&#34920;&#37324;&#25554;&#20837;&#20960;&#26465;&#35760;&#24405;&#65306;
</p>
<pre><code>INSERT INTO hero VALUES
    (1, 'l&#21016;&#22791;', '&#34560;'),
    (3, 'z&#35832;&#33883;&#20142;', '&#34560;'),
    (8, 'c&#26361;&#25805;', '&#39759;'),
    (15, 'x&#33600;&#24423;', '&#39759;'),
    (20, 's&#23385;&#26435;', '&#21556;');
</code></pre>
<h2>
 &#35821;&#21477;&#21152;&#38145;&#20998;&#26512;
</h2>
<p>
 &#35828;&#20102;&#36825;&#20040;&#20037;&#65292;&#36824;&#26159;&#27809;&#35828;&#19968;&#26465;&#35821;&#21477;&#35813;&#21152;&#20160;&#20040;&#38145;&#65288;&#24515;&#37324;&#26159;&#19981;&#26159;&#26377;&#28857;mmp&#21834;[&#22351;&#31505;]&#65289;&#12290;&#22312;&#36827;&#19968;&#27493;&#20998;&#26512;&#20043;&#21069;&#65292;&#25105;&#20204;&#20808;&#32473;
 <code>
  hero
 </code>
 &#34920;&#30340;
 <code>
  name
 </code>
 &#21015;&#24314;&#19968;&#20010;&#32034;&#24341;&#65306;
</p>
<pre><code>ALTER TABLE hero ADD INDEX idx_name (name);
</code></pre>
<p>
 &#28982;&#21518;&#29616;&#22312;
 <code>
  hero
 </code>
 &#34920;&#23601;&#26377;&#20102;&#20004;&#20010;&#32034;&#24341;&#65288;&#19968;&#20010;&#20108;&#32423;&#32034;&#24341;&#65292;&#19968;&#20010;&#32858;&#31751;&#32034;&#24341;&#65289;&#65292;&#31034;&#24847;&#22270;&#22914;&#19979;&#65306;
</p>
<p>
 <img alt="" src="EPUB/4a6ef2bc-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#23454;&#21834;&#65292;&#8220;XXX&#35821;&#21477;&#35813;&#21152;&#20160;&#20040;&#38145;&#8221;&#26412;&#36523;&#23601;&#26159;&#20010;&#20266;&#21629;&#39064;&#65292;&#19968;&#26465;&#35821;&#21477;&#38656;&#35201;&#21152;&#30340;&#38145;&#21463;&#21040;&#24456;&#22810;&#26465;&#20214;&#21046;&#32422;&#65292;&#27604;&#26041;&#35828;&#65306;
</p>
<ul>
 <li>
  <p>
   &#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;
  </p>
 </li>
 <li>
  <p>
   &#35821;&#21477;&#25191;&#34892;&#26102;&#20351;&#29992;&#30340;&#32034;&#24341;&#65288;&#27604;&#22914;&#32858;&#31751;&#32034;&#24341;&#12289;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#12289;&#26222;&#36890;&#20108;&#32423;&#32034;&#24341;&#65289;
  </p>
 </li>
 <li>
  <p>
   &#26597;&#35810;&#26465;&#20214;&#65288;&#27604;&#26041;&#35828;
   <code>
    =
   </code>
   &#12289;
   <code>
    =&lt;
   </code>
   &#12289;
   <code>
    &gt;=
   </code>
   &#31561;&#31561;&#65289;
  </p>
 </li>
 <li>
  <p>
   &#20855;&#20307;&#25191;&#34892;&#30340;&#35821;&#21477;&#31867;&#22411;
  </p>
 </li>
</ul>
<p>
 &#22312;&#32487;&#32493;&#35814;&#32454;&#20998;&#26512;&#35821;&#21477;&#30340;&#21152;&#38145;&#36807;&#31243;&#21069;&#65292;&#22823;&#23478;&#19968;&#23450;&#35201;&#26377;&#19968;&#20010;&#20840;&#23616;&#27010;&#24565;&#65306;
 <code>
  &#21152;&#38145;
 </code>
 &#21482;&#26159;&#35299;&#20915;&#24182;&#21457;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#24341;&#36215;&#30340;
 <code>
  &#33039;&#20889;
 </code>
 &#12289;
 <code>
  &#33039;&#35835;
 </code>
 &#12289;
 <code>
  &#19981;&#21487;&#37325;&#22797;&#35835;
 </code>
 &#12289;
 <code>
  &#24187;&#35835;
 </code>
 &#36825;&#20123;&#38382;&#39064;&#30340;&#19968;&#31181;&#35299;&#20915;&#26041;&#26696;&#65288;
 <code>
  MVCC
 </code>
 &#31639;&#26159;&#19968;&#31181;&#35299;&#20915;
 <code>
  &#33039;&#35835;
 </code>
 &#12289;
 <code>
  &#19981;&#21487;&#37325;&#22797;&#35835;
 </code>
 &#12289;
 <code>
  &#24187;&#35835;
 </code>
 &#36825;&#20123;&#38382;&#39064;&#30340;&#19968;&#31181;&#35299;&#20915;&#26041;&#26696;&#65289;&#65292;&#19968;&#23450;&#35201;&#24847;&#35782;&#21040;
 <code>
  &#21152;&#38145;
 </code>
 &#30340;&#20986;&#21457;&#28857;&#26159;&#20026;&#20102;&#35299;&#20915;&#36825;&#20123;&#38382;&#39064;&#65292;&#19981;&#21516;&#24773;&#26223;&#19979;&#35201;&#35299;&#20915;&#30340;&#38382;&#39064;&#19981;&#19968;&#26679;&#65292;&#25165;&#23548;&#33268;&#21152;&#30340;&#38145;&#19981;&#19968;&#26679;&#65292;&#21315;&#19975;&#19981;&#35201;&#20026;&#20102;&#21152;&#38145;&#32780;&#21152;&#38145;&#65292;&#23481;&#26131;&#25226;&#33258;&#24049;&#32469;&#36827;&#21435;&#12290;&#24403;&#28982;&#65292;&#26377;&#26102;&#20505;&#22240;&#20026;
 <code>
  MySQL
 </code>
 &#20855;&#20307;&#30340;&#23454;&#29616;&#32780;&#23548;&#33268;&#19968;&#20123;&#24773;&#26223;&#19979;&#30340;&#21152;&#38145;&#26377;&#20123;&#19981;&#22826;&#22909;&#29702;&#35299;&#65292;&#36825;&#23601;&#24471;&#25105;&#20204;&#27515;&#35760;&#30828;&#32972;&#20102;&#65374;
</p>
<p>
 &#25105;&#20204;&#36825;&#37324;&#25226;&#35821;&#21477;&#20998;&#20026;3&#31181;&#22823;&#31867;&#65306;&#26222;&#36890;&#30340;
 <code>
  SELECT
 </code>
 &#35821;&#21477;&#12289;&#38145;&#23450;&#35835;&#30340;&#35821;&#21477;&#12289;INSERT&#35821;&#21477;&#65292;&#25105;&#20204;&#20998;&#21035;&#30475;&#19968;&#19979;&#12290;
</p>
<h3>
 &#26222;&#36890;&#30340;SELECT&#35821;&#21477;
</h3>
<p>
 &#26222;&#36890;&#30340;
 <code>
  SELECT
 </code>
 &#35821;&#21477;&#22312;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    READ UNCOMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#19981;&#21152;&#38145;&#65292;&#30452;&#25509;&#35835;&#21462;&#35760;&#24405;&#30340;&#26368;&#26032;&#29256;&#26412;&#65292;&#21487;&#33021;&#21457;&#29983;
   <code>
    &#33039;&#35835;
   </code>
   &#12289;
   <code>
    &#19981;&#21487;&#37325;&#22797;&#35835;
   </code>
   &#21644;
   <code>
    &#24187;&#35835;
   </code>
   &#38382;&#39064;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    READ COMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#19981;&#21152;&#38145;&#65292;&#22312;&#27599;&#27425;&#25191;&#34892;&#26222;&#36890;&#30340;
   <code>
    SELECT
   </code>
   &#35821;&#21477;&#26102;&#37117;&#20250;&#29983;&#25104;&#19968;&#20010;
   <code>
    ReadView
   </code>
   &#65292;&#36825;&#26679;&#35299;&#20915;&#20102;
   <code>
    &#33039;&#35835;
   </code>
   &#38382;&#39064;&#65292;&#20294;&#27809;&#26377;&#35299;&#20915;
   <code>
    &#19981;&#21487;&#37325;&#22797;&#35835;
   </code>
   &#21644;
   <code>
    &#24187;&#35835;
   </code>
   &#38382;&#39064;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    REPEATABLE READ
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#19981;&#21152;&#38145;&#65292;&#21482;&#22312;&#31532;&#19968;&#27425;&#25191;&#34892;&#26222;&#36890;&#30340;
   <code>
    SELECT
   </code>
   &#35821;&#21477;&#26102;&#29983;&#25104;&#19968;&#20010;
   <code>
    ReadView
   </code>
   &#65292;&#36825;&#26679;&#25226;
   <code>
    &#33039;&#35835;
   </code>
   &#12289;
   <code>
    &#19981;&#21487;&#37325;&#22797;&#35835;
   </code>
   &#21644;
   <code>
    &#24187;&#35835;
   </code>
   &#38382;&#39064;&#37117;&#35299;&#20915;&#20102;&#12290;
  </p>
  <p>
   &#19981;&#36807;&#36825;&#37324;&#26377;&#19968;&#20010;&#23567;&#25554;&#26354;&#65306;
  </p>
  <pre><code># &#20107;&#21153;T1&#65292;REPEATABLE READ&#38548;&#31163;&#32423;&#21035;&#19979;
mysql&gt; BEGIN;
Query OK, 0 rows affected (0.00 sec)

mysql&gt; SELECT * FROM hero WHERE number = 30;
Empty set (0.01 sec)

# &#27492;&#26102;&#20107;&#21153;T2&#25191;&#34892;&#20102;&#65306;INSERT INTO hero VALUES(30, 'g&#20851;&#32701;', '&#39759;'); &#24182;&#25552;&#20132;

mysql&gt; UPDATE hero SET country = '&#34560;' WHERE number = 30;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql&gt; SELECT * FROM hero WHERE number = 30;
+--------+---------+---------+
| number | name    | country |
+--------+---------+---------+
|     30 | g&#20851;&#32701;   | &#34560;      |
+--------+---------+---------+
1 row in set (0.01 sec)
</code></pre>
  <p>
   &#22312;
   <code>
    REPEATABLE READ
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;
   <code>
    T1
   </code>
   &#31532;&#19968;&#27425;&#25191;&#34892;&#26222;&#36890;&#30340;
   <code>
    SELECT
   </code>
   &#35821;&#21477;&#26102;&#29983;&#25104;&#20102;&#19968;&#20010;
   <code>
    ReadView
   </code>
   &#65292;&#20043;&#21518;
   <code>
    T2
   </code>
   &#21521;
   <code>
    hero
   </code>
   &#34920;&#20013;&#26032;&#25554;&#20837;&#20102;&#19968;&#26465;&#35760;&#24405;&#20415;&#25552;&#20132;&#20102;&#65292;
   <code>
    ReadView
   </code>
   &#24182;&#19981;&#33021;&#38459;&#27490;
   <code>
    T1
   </code>
   &#25191;&#34892;
   <code>
    UPDATE
   </code>
   &#25110;&#32773;
   <code>
    DELETE
   </code>
   &#35821;&#21477;&#26469;&#23545;&#25913;&#21160;&#36825;&#20010;&#26032;&#25554;&#20837;&#30340;&#35760;&#24405;&#65288;&#22240;&#20026;
   <code>
    T2
   </code>
   &#24050;&#32463;&#25552;&#20132;&#65292;&#25913;&#21160;&#35813;&#35760;&#24405;&#24182;&#19981;&#20250;&#36896;&#25104;&#38459;&#22622;&#65289;&#65292;&#20294;&#26159;&#36825;&#26679;&#19968;&#26469;&#36825;&#26465;&#26032;&#35760;&#24405;&#30340;
   <code>
    trx_id
   </code>
   &#38544;&#34255;&#21015;&#23601;&#21464;&#25104;&#20102;
   <code>
    T1
   </code>
   &#30340;
   <code>
    &#20107;&#21153;id
   </code>
   &#65292;&#20043;&#21518;
   <code>
    T1
   </code>
   &#20013;&#20877;&#20351;&#29992;&#26222;&#36890;&#30340;
   <code>
    SELECT
   </code>
   &#35821;&#21477;&#21435;&#26597;&#35810;&#36825;&#26465;&#35760;&#24405;&#26102;&#23601;&#21487;&#20197;&#30475;&#21040;&#36825;&#26465;&#35760;&#24405;&#20102;&#65292;&#20063;&#23601;&#25226;&#36825;&#26465;&#35760;&#24405;&#36820;&#22238;&#32473;&#23458;&#25143;&#31471;&#20102;&#12290;&#22240;&#20026;&#36825;&#20010;&#29305;&#27530;&#29616;&#35937;&#30340;&#23384;&#22312;&#65292;&#20320;&#20063;&#21487;&#20197;&#35748;&#20026;
   <code>
    InnoDB
   </code>
   &#20013;&#30340;
   <code>
    MVCC
   </code>
   &#24182;&#19981;&#33021;&#23436;&#23436;&#20840;&#20840;&#30340;&#31105;&#27490;&#24187;&#35835;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    SERIALIZABLE
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#38656;&#35201;&#20998;&#20026;&#20004;&#31181;&#24773;&#20917;&#35752;&#35770;&#65306;
  </p>
  <ul>
   <li>
    <p>
     &#22312;&#31995;&#32479;&#21464;&#37327;
     <code>
      autocommit=0
     </code>
     &#26102;&#65292;&#20063;&#23601;&#26159;&#31105;&#29992;&#33258;&#21160;&#25552;&#20132;&#26102;&#65292;&#26222;&#36890;&#30340;
     <code>
      SELECT
     </code>
     &#35821;&#21477;&#20250;&#34987;&#36716;&#20026;
     <code>
      SELECT ... LOCK IN SHARE MODE
     </code>
     &#36825;&#26679;&#30340;&#35821;&#21477;&#65292;&#20063;&#23601;&#26159;&#22312;&#35835;&#21462;&#35760;&#24405;&#21069;&#38656;&#35201;&#20808;&#33719;&#24471;&#35760;&#24405;&#30340;
     <code>
      S&#38145;
     </code>
     &#65292;&#20855;&#20307;&#30340;&#21152;&#38145;&#24773;&#20917;&#21644;
     <code>
      REPEATABLE READ
     </code>
     &#38548;&#31163;&#32423;&#21035;&#19979;&#19968;&#26679;&#65292;&#25105;&#20204;&#21518;&#36793;&#20877;&#20998;&#26512;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#22312;&#31995;&#32479;&#21464;&#37327;
     <code>
      autocommit=1
     </code>
     &#26102;&#65292;&#20063;&#23601;&#26159;&#21551;&#29992;&#33258;&#21160;&#25552;&#20132;&#26102;&#65292;&#26222;&#36890;&#30340;
     <code>
      SELECT
     </code>
     &#35821;&#21477;&#24182;&#19981;&#21152;&#38145;&#65292;&#21482;&#26159;&#21033;&#29992;
     <code>
      MVCC
     </code>
     &#26469;&#29983;&#25104;&#19968;&#20010;
     <code>
      ReadView
     </code>
     &#21435;&#35835;&#21462;&#35760;&#24405;&#12290;
    </p>
    <p>
     &#20026;&#21861;&#19981;&#21152;&#38145;&#21602;&#65311;&#22240;&#20026;&#21551;&#29992;&#33258;&#21160;&#25552;&#20132;&#24847;&#21619;&#30528;&#19968;&#20010;&#20107;&#21153;&#20013;&#21482;&#21253;&#21547;&#19968;&#26465;&#35821;&#21477;&#65292;&#19968;&#26465;&#35821;&#21477;&#20063;&#23601;&#27809;&#26377;&#21861;
     <code>
      &#19981;&#21487;&#37325;&#22797;&#35835;
     </code>
     &#12289;
     <code>
      &#24187;&#35835;
     </code>
     &#36825;&#26679;&#30340;&#38382;&#39064;&#20102;&#12290;
    </p>
   </li>
  </ul>
 </li>
</ul>
<h3>
 &#38145;&#23450;&#35835;&#30340;&#35821;&#21477;
</h3>
<p>
 &#25105;&#20204;&#25226;&#19979;&#36793;&#22235;&#31181;&#35821;&#21477;&#25918;&#21040;&#19968;&#36215;&#35752;&#35770;&#65306;
</p>
<ul>
 <li>
  <p>
   &#35821;&#21477;&#19968;&#65306;
   <code>
    SELECT ... LOCK IN SHARE MODE;
   </code>
  </p>
 </li>
 <li>
  <p>
   &#35821;&#21477;&#20108;&#65306;
   <code>
    SELECT ... FOR UPDATE;
   </code>
  </p>
 </li>
 <li>
  <p>
   &#35821;&#21477;&#19977;&#65306;
   <code>
    UPDATE ...
   </code>
  </p>
 </li>
 <li>
  <p>
   &#35821;&#21477;&#22235;&#65306;
   <code>
    DELETE ...
   </code>
  </p>
 </li>
</ul>
<p>
 &#25105;&#20204;&#35828;
 <code>
  &#35821;&#21477;&#19968;
 </code>
 &#21644;
 <code>
  &#35821;&#21477;&#20108;
 </code>
 &#26159;
 <code>
  MySQL
 </code>
 &#20013;&#35268;&#23450;&#30340;&#20004;&#31181;
 <code>
  &#38145;&#23450;&#35835;
 </code>
 &#30340;&#35821;&#27861;&#26684;&#24335;&#65292;&#32780;
 <code>
  &#35821;&#21477;&#19977;
 </code>
 &#21644;
 <code>
  &#35821;&#21477;&#22235;
 </code>
 &#30001;&#20110;&#22312;&#25191;&#34892;&#36807;&#31243;&#38656;&#35201;&#39318;&#20808;&#23450;&#20301;&#21040;&#34987;&#25913;&#21160;&#30340;&#35760;&#24405;&#24182;&#32473;&#35760;&#24405;&#21152;&#38145;&#65292;&#20063;&#21487;&#20197;&#34987;&#35748;&#20026;&#26159;&#19968;&#31181;
 <code>
  &#38145;&#23450;&#35835;
 </code>
 &#12290;
</p>
<h4>
 READ UNCOMMITTED/READ COMMITTED&#38548;&#31163;&#32423;&#21035;&#19979;
</h4>
<p>
 &#22312;
 <code>
  READ UNCOMMITTED
 </code>
 &#19979;&#35821;&#21477;&#30340;&#21152;&#38145;&#26041;&#24335;&#21644;
 <code>
  READ COMMITTED
 </code>
 &#38548;&#31163;&#32423;&#21035;&#19979;&#35821;&#21477;&#30340;&#21152;&#38145;&#26041;&#24335;&#22522;&#26412;&#19968;&#33268;&#65292;&#25152;&#20197;&#23601;&#25918;&#21040;&#19968;&#22359;&#20799;&#35828;&#20102;&#12290;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#37319;&#29992;
 <code>
  &#21152;&#38145;
 </code>
 &#26041;&#24335;&#35299;&#20915;&#24182;&#21457;&#20107;&#21153;&#24102;&#26469;&#30340;&#38382;&#39064;&#26102;&#65292;&#20854;&#23454;
 <code>
  &#33039;&#35835;
 </code>
 &#21644;
 <code>
  &#19981;&#21487;&#37325;&#22797;&#35835;
 </code>
 &#22312;&#20219;&#20309;&#19968;&#20010;&#38548;&#31163;&#32423;&#21035;&#19979;&#37117;&#19981;&#20250;&#21457;&#29983;&#65288;&#22240;&#20026;
 <code>
  &#35835;-&#20889;
 </code>
 &#25805;&#20316;&#38656;&#35201;&#25490;&#38431;&#36827;&#34892;&#65289;&#12290;
</p>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#31561;&#20540;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number = 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#25191;&#34892;&#26102;&#21482;&#38656;&#35201;&#35775;&#38382;&#19968;&#19979;&#32858;&#31751;&#32034;&#24341;&#20013;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#32473;&#23427;&#21152;&#19968;&#20010;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#23601;&#22909;&#20102;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4a97e442-13d6-11ed-838d-acde48001122">
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number = 8 FOR UPDATE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#25191;&#34892;&#26102;&#21482;&#38656;&#35201;&#35775;&#38382;&#19968;&#19979;&#32858;&#31751;&#32034;&#24341;&#20013;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#21482;&#38656;&#35201;&#32473;&#23427;&#21152;&#19968;&#20010;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#23601;&#22909;&#20102;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4ac1b88a-13d6-11ed-838d-acde48001122">
  </p>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#20026;&#20102;&#21306;&#20998;S&#38145;&#21644;X&#38145;&#65292;&#25105;&#20204;&#20043;&#21518;&#22312;&#31034;&#24847;&#22270;&#20013;&#23601;&#25226;&#21152;&#20102;S&#38145;&#30340;&#35760;&#24405;&#26579;&#25104;&#34013;&#33394;&#65292;&#25226;&#21152;&#20102;X&#38145;&#30340;&#35760;&#24405;&#26579;&#25104;&#32043;&#33394;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE number = 8;
</code></pre>
  <p>
   &#36825;&#26465;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#24182;&#27809;&#26377;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#21152;&#38145;&#26041;&#24335;&#21644;&#19978;&#36793;&#25152;&#35828;&#30340;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#12290;
  </p>
  <p>
   &#22914;&#26524;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#20013;&#26356;&#26032;&#20102;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET name = 'cao&#26361;&#25805;' WHERE number = 8;
</code></pre>
  <p>
   &#35813;&#35821;&#21477;&#30340;&#23454;&#38469;&#25191;&#34892;&#27493;&#39588;&#26159;&#39318;&#20808;&#26356;&#26032;&#23545;&#24212;&#30340;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#20877;&#26356;&#26032;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#25152;&#20197;&#21152;&#38145;&#30340;&#27493;&#39588;&#23601;&#26159;&#65306;
  </p>
  <ol>
   <li>
    <p>
     &#20026;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      8
     </code>
     &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#65288;&#35813;&#35760;&#24405;&#23545;&#24212;&#30340;&#65289;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#20026;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;
     <code>
      idx_name
     </code>
     &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65288;&#20063;&#23601;&#26159;
     <code>
      name
     </code>
     &#20540;&#20026;
     <code>
      'c&#26361;&#25805;'
     </code>
     &#65292;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      8
     </code>
     &#30340;&#37027;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65289;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
  </ol>
  <p>
   &#30011;&#20010;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4b0b170a-13d6-11ed-838d-acde48001122">
  </p>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#25105;&#20204;&#29992;&#24102;&#22278;&#22280;&#30340;&#25968;&#23383;&#26469;&#34920;&#31034;&#20026;&#21508;&#26465;&#35760;&#24405;&#21152;&#38145;&#30340;&#39034;&#24207;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>DELETE FROM hero WHERE number = 8;
</code></pre>
  <p>
   &#25105;&#20204;&#24179;&#26102;&#25152;&#35828;&#30340;&#8220;DELETE&#34920;&#20013;&#30340;&#19968;&#26465;&#35760;&#24405;&#8221;&#20854;&#23454;&#24847;&#21619;&#30528;&#23545;&#32858;&#31751;&#32034;&#24341;&#21644;&#25152;&#26377;&#30340;&#20108;&#32423;&#32034;&#24341;&#20013;&#23545;&#24212;&#30340;&#35760;&#24405;&#20570;
   <code>
    DELETE
   </code>
   &#25805;&#20316;&#65292;&#26412;&#20363;&#23376;&#20013;&#23601;&#26159;&#35201;&#20808;&#25226;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#25191;&#34892;
   <code>
    DELETE
   </code>
   &#25805;&#20316;&#65292;&#28982;&#21518;&#25226;&#23545;&#24212;&#30340;
   <code>
    idx_name
   </code>
   &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21024;&#38500;&#65292;&#25152;&#20197;&#21152;&#38145;&#30340;&#27493;&#39588;&#21644;&#19978;&#36793;&#26356;&#26032;&#24102;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#65292;&#23601;&#19981;&#30011;&#22270;&#20102;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number &lt;= 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30475;&#36215;&#26469;&#21313;&#20998;&#31616;&#21333;&#65292;&#20294;&#23427;&#30340;&#25191;&#34892;&#36807;&#31243;&#36824;&#26159;&#26377;&#19968;&#20002;&#20002;&#23567;&#22797;&#26434;&#30340;&#65306;
  </p>
  <ol>
   <li>
    <p>
     &#20808;&#21040;&#32858;&#31751;&#32034;&#24341;&#20013;&#23450;&#20301;&#21040;&#28385;&#36275;
     <code>
      number &lt;= 8
     </code>
     &#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      1
     </code>
     &#30340;&#35760;&#24405;&#65292;&#28982;&#21518;&#20026;&#20854;&#21152;&#38145;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#21028;&#26029;&#19968;&#19979;&#35813;&#35760;&#24405;&#26159;&#21542;&#31526;&#21512;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#20013;&#30340;&#26465;&#20214;&#12290;
    </p>
    <p>
     &#25105;&#20204;&#21069;&#36793;&#20171;&#32461;&#36807;&#19968;&#20010;&#31216;&#20043;&#20026;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#65288;
     <code>
      Index Condition Pushdown
     </code>
     &#65292;&#31616;&#31216;
     <code>
      ICP
     </code>
     &#65289;&#30340;&#21151;&#33021;&#65292;&#20063;&#23601;&#26159;&#25226;&#26597;&#35810;&#20013;&#19982;&#34987;&#20351;&#29992;&#32034;&#24341;&#26377;&#20851;&#30340;&#26597;&#35810;&#26465;&#20214;&#19979;&#25512;&#21040;&#23384;&#20648;&#24341;&#25806;&#20013;&#21028;&#26029;&#65292;&#32780;&#19981;&#26159;&#36820;&#22238;&#21040;
     <code>
      server
     </code>
     &#23618;&#20877;&#21028;&#26029;&#12290;&#19981;&#36807;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#21482;&#26159;&#20026;&#20102;&#20943;&#23569;&#22238;&#34920;&#27425;&#25968;&#65292;&#20063;&#23601;&#26159;&#20943;&#23569;&#35835;&#21462;&#23436;&#25972;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#30340;&#27425;&#25968;&#65292;&#20174;&#32780;&#20943;&#23569;
     <code>
      IO
     </code>
     &#25805;&#20316;&#12290;&#32780;&#23545;&#20110;
     <code>
      &#32858;&#31751;&#32034;&#24341;
     </code>
     &#32780;&#35328;&#19981;&#38656;&#35201;&#22238;&#34920;&#65292;&#23427;&#26412;&#36523;&#23601;&#21253;&#21547;&#30528;&#20840;&#37096;&#30340;&#21015;&#65292;&#20063;&#36215;&#19981;&#21040;&#20943;&#23569;
     <code>
      IO
     </code>
     &#25805;&#20316;&#30340;&#20316;&#29992;&#65292;&#25152;&#20197;&#35774;&#35745;
     <code>
      InnoDB
     </code>
     &#30340;&#22823;&#21460;&#20204;&#35268;&#23450;&#36825;&#20010;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#29305;&#24615;&#21482;&#36866;&#29992;&#20110;
     <code>
      &#20108;&#32423;&#32034;&#24341;
     </code>
     &#12290;&#20063;&#23601;&#26159;&#35828;&#22312;&#26412;&#20363;&#20013;&#19982;&#34987;&#20351;&#29992;&#32034;&#24341;&#26377;&#20851;&#30340;&#26465;&#20214;&#26159;&#65306;
     <code>
      number &lt;= 8
     </code>
     &#65292;&#32780;
     <code>
      number
     </code>
     &#21015;&#21448;&#26159;&#32858;&#31751;&#32034;&#24341;&#21015;&#65292;&#25152;&#20197;&#26412;&#20363;&#20013;&#24182;&#27809;&#26377;&#31526;&#21512;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#30340;&#26597;&#35810;&#26465;&#20214;&#65292;&#33258;&#28982;&#20063;&#23601;&#19981;&#38656;&#35201;&#21028;&#26029;&#35813;&#35760;&#24405;&#26159;&#21542;&#31526;&#21512;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#20013;&#30340;&#26465;&#20214;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#21028;&#26029;&#19968;&#19979;&#35813;&#35760;&#24405;&#26159;&#21542;&#31526;&#21512;&#33539;&#22260;&#26597;&#35810;&#30340;&#36793;&#30028;&#26465;&#20214;
    </p>
    <p>
     &#22240;&#20026;&#22312;&#26412;&#20363;&#20013;&#26159;&#21033;&#29992;&#20027;&#38190;
     <code>
      number
     </code>
     &#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#65292;&#35774;&#35745;
     <code>
      InnoDB
     </code>
     &#30340;&#22823;&#21460;&#35268;&#23450;&#27599;&#20174;&#32858;&#31751;&#32034;&#24341;&#20013;&#21462;&#20986;&#19968;&#26465;&#35760;&#24405;&#26102;&#37117;&#35201;&#21028;&#26029;&#19968;&#19979;&#35813;&#35760;&#24405;&#26159;&#21542;&#31526;&#21512;&#33539;&#22260;&#26597;&#35810;&#30340;&#36793;&#30028;&#26465;&#20214;&#65292;&#20063;&#23601;&#26159;
     <code>
      number &lt;= 8
     </code>
     &#36825;&#20010;&#26465;&#20214;&#12290;&#22914;&#26524;&#31526;&#21512;&#30340;&#35805;&#23558;&#20854;&#36820;&#22238;&#32473;
     <code>
      server&#23618;
     </code>
     &#32487;&#32493;&#22788;&#29702;&#65292;&#21542;&#21017;&#30340;&#35805;&#38656;&#35201;&#37322;&#25918;&#25481;&#22312;&#35813;&#35760;&#24405;&#19978;&#21152;&#30340;&#38145;&#65292;&#24182;&#32473;
     <code>
      server&#23618;
     </code>
     &#36820;&#22238;&#19968;&#20010;&#26597;&#35810;&#23436;&#27605;&#30340;&#20449;&#24687;&#12290;
    </p>
    <p>
     &#23545;&#20110;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      1
     </code>
     &#30340;&#35760;&#24405;&#26159;&#31526;&#21512;&#36825;&#20010;&#26465;&#20214;&#30340;&#65292;&#25152;&#20197;&#20250;&#23558;&#20854;&#36820;&#22238;&#21040;
     <code>
      server&#23618;
     </code>
     &#32487;&#32493;&#22788;&#29702;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#23558;&#35813;&#35760;&#24405;&#36820;&#22238;&#21040;
     <code>
      server&#23618;
     </code>
     &#32487;&#32493;&#21028;&#26029;&#12290;
    </p>
    <p>
     <code>
      server&#23618;
     </code>
     &#22914;&#26524;&#25910;&#21040;&#23384;&#20648;&#24341;&#25806;&#23618;&#25552;&#20379;&#30340;&#26597;&#35810;&#23436;&#27605;&#30340;&#20449;&#24687;&#65292;&#23601;&#32467;&#26463;&#26597;&#35810;&#65292;&#21542;&#21017;&#32487;&#32493;&#21028;&#26029;&#37027;&#20123;&#27809;&#26377;&#36827;&#34892;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#30340;&#26465;&#20214;&#65292;&#22312;&#26412;&#20363;&#20013;&#23601;&#26159;&#32487;&#32493;&#21028;&#26029;
     <code>
      number &lt;= 8
     </code>
     &#36825;&#20010;&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;&#12290;&#22123;&#65292;&#19981;&#26159;&#22312;&#31532;3&#27493;&#20013;&#24050;&#32463;&#21028;&#26029;&#36807;&#20102;&#20040;&#65292;&#24590;&#20040;&#22312;&#36825;&#21448;&#21028;&#26029;&#19968;&#22238;&#65311;&#26159;&#30340;&#65292;&#35774;&#35745;
     <code>
      InnoDB
     </code>
     &#30340;&#22823;&#21460;&#37319;&#29992;&#30340;&#31574;&#30053;&#23601;&#26159;&#36825;&#20040;&#31616;&#21333;&#31895;&#26292;&#65292;&#25226;&#20961;&#26159;&#27809;&#26377;&#32463;&#36807;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#30340;&#26465;&#20214;&#37117;&#38656;&#35201;&#25918;&#21040;
     <code>
      server
     </code>
     &#23618;&#20877;&#21028;&#26029;&#19968;&#36941;&#12290;&#22914;&#26524;&#35813;&#35760;&#24405;&#31526;&#21512;&#21097;&#20313;&#30340;&#26465;&#20214;&#65288;&#27809;&#26377;&#36827;&#34892;
     <code>
      &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
     </code>
     &#30340;&#26465;&#20214;&#65289;&#65292;&#37027;&#20040;&#23601;&#25226;&#23427;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#65292;&#19981;&#28982;&#30340;&#35805;&#38656;&#35201;&#37322;&#25918;&#25481;&#22312;&#35813;&#35760;&#24405;&#19978;&#21152;&#30340;&#38145;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#28982;&#21518;&#21018;&#21018;&#26597;&#35810;&#24471;&#21040;&#30340;&#36825;&#26465;&#35760;&#24405;&#65288;&#20063;&#23601;&#26159;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      1
     </code>
     &#30340;&#35760;&#24405;&#65289;&#32452;&#25104;&#30340;&#21333;&#21521;&#38142;&#34920;&#32487;&#32493;&#21521;&#21518;&#26597;&#25214;&#65292;&#24471;&#21040;&#20102;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      3
     </code>
     &#30340;&#35760;&#24405;&#65292;&#28982;&#21518;&#37325;&#22797;&#31532;
     <code>
      2
     </code>
     &#65292;
     <code>
      3
     </code>
     &#65292;
     <code>
      4
     </code>
     &#12289;
     <code>
      5
     </code>
     &#36825;&#20960;&#20010;&#27493;&#39588;&#12290;
    </p>
   </li>
  </ol>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#19978;&#36848;&#27493;&#39588;&#26159;&#22312;MySQL 5.7.21&#36825;&#20010;&#29256;&#26412;&#20013;&#39564;&#35777;&#30340;&#65292;&#19981;&#20445;&#35777;&#20854;&#20182;&#29256;&#26412;&#26377;&#26080;&#20986;&#20837;&#12290;
   </p>
  </blockquote>
  <p>
   &#20294;&#26159;&#36825;&#20010;&#36807;&#31243;&#26377;&#20010;&#38382;&#39064;&#65292;&#23601;&#26159;&#24403;&#25214;&#21040;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#37027;&#26465;&#35760;&#24405;&#30340;&#26102;&#20505;&#65292;&#36824;&#24471;&#21521;&#21518;&#25214;&#19968;&#26465;&#35760;&#24405;&#65288;&#20063;&#23601;&#26159;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#65289;&#65292;&#22312;&#23384;&#20648;&#24341;&#25806;&#35835;&#21462;&#36825;&#26465;&#35760;&#24405;&#30340;&#26102;&#20505;&#65292;&#20063;&#23601;&#26159;&#19978;&#36848;&#30340;&#31532;
   <code>
    1
   </code>
   &#27493;&#20013;&#65292;&#23601;&#24471;&#20026;&#36825;&#26465;&#35760;&#24405;&#21152;&#38145;&#65292;&#28982;&#21518;&#22312;&#31532;3&#27493;&#26102;&#65292;&#21028;&#26029;&#35813;&#35760;&#24405;&#19981;&#31526;&#21512;
   <code>
    number &lt;= 8
   </code>
   &#36825;&#20010;&#26465;&#20214;&#65292;&#21448;&#35201;&#37322;&#25918;&#25481;&#36825;&#26465;&#35760;&#24405;&#30340;&#38145;&#65292;&#36825;&#20010;&#36807;&#31243;&#23548;&#33268;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#20808;&#34987;&#21152;&#38145;&#65292;&#28982;&#21518;&#25226;&#38145;&#37322;&#25918;&#25481;&#65292;&#36807;&#31243;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4b44653c-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#36825;&#20010;&#36807;&#31243;&#26377;&#24847;&#24605;&#30340;&#19968;&#28857;&#23601;&#26159;&#65292;&#22914;&#26524;&#20320;&#20808;&#22312;&#20107;&#21153;
   <code>
    T1
   </code>
   &#20013;&#25191;&#34892;&#65306;
  </p>
  <pre><code># &#20107;&#21153;T1
BEGIN;
SELECT * FROM hero WHERE number &lt;= 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#28982;&#21518;&#20877;&#21040;&#20107;&#21153;
   <code>
    T2
   </code>
   &#20013;&#25191;&#34892;&#65306;
  </p>
  <pre><code># &#20107;&#21153;T2
BEGIN;
SELECT * FROM hero WHERE number = 15 FOR UPDATE;
</code></pre>
  <p>
   &#26159;&#27809;&#26377;&#38382;&#39064;&#30340;&#65292;&#22240;&#20026;&#22312;
   <code>
    T2
   </code>
   &#25191;&#34892;&#26102;&#65292;&#20107;&#21153;
   <code>
    T1
   </code>
   &#24050;&#32463;&#37322;&#25918;&#25481;&#20102;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#30340;&#38145;&#65292;&#20294;&#26159;&#22914;&#26524;&#20320;&#20808;&#25191;&#34892;
   <code>
    T2
   </code>
   &#65292;&#20877;&#25191;&#34892;
   <code>
    T1
   </code>
   &#65292;&#30001;&#20110;
   <code>
    T2
   </code>
   &#24050;&#32463;&#25345;&#26377;&#20102;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#30340;&#38145;&#65292;&#20107;&#21153;
   <code>
    T1
   </code>
   &#23558;&#22240;&#20026;&#33719;&#21462;&#19981;&#21040;&#36825;&#20010;&#38145;&#32780;&#31561;&#24453;&#12290;
  </p>
  <p>
   &#25105;&#20204;&#20877;&#30475;&#19968;&#20010;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#30340;&#20363;&#23376;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number &gt;= 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30340;&#25191;&#34892;&#36807;&#31243;&#20854;&#23454;&#21644;&#25105;&#20204;&#20030;&#30340;&#19978;&#19968;&#20010;&#20363;&#23376;&#31867;&#20284;&#12290;&#20063;&#26159;&#20808;&#21040;&#32858;&#31751;&#32034;&#24341;&#20013;&#23450;&#20301;&#21040;&#28385;&#36275;
   <code>
    number &gt;= 8
   </code>
   &#36825;&#20010;&#26465;&#20214;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#65292;&#28982;&#21518;&#23601;&#21487;&#20197;&#27839;&#30528;&#30001;&#35760;&#24405;&#32452;&#25104;&#30340;&#21333;&#21521;&#38142;&#34920;&#19968;&#36335;&#21521;&#21518;&#25214;&#65292;&#27599;&#25214;&#21040;&#19968;&#26465;&#35760;&#24405;&#65292;&#23601;&#20250;&#20026;&#20854;&#21152;&#19978;&#38145;&#65292;&#28982;&#21518;&#21028;&#26029;&#35813;&#35760;&#24405;&#31526;&#19981;&#31526;&#21512;&#33539;&#22260;&#26597;&#35810;&#30340;&#36793;&#30028;&#26465;&#20214;&#65292;&#19981;&#36807;&#36825;&#37324;&#30340;&#36793;&#30028;&#26465;&#20214;&#27604;&#36739;&#29305;&#27530;&#65306;
   <code>
    number &gt;= 8
   </code>
   &#65292;&#21482;&#35201;&#35760;&#24405;&#19981;&#23567;&#20110;8&#23601;&#31639;&#31526;&#21512;&#36793;&#30028;&#26465;&#20214;&#65292;&#25152;&#20197;&#21028;&#26029;&#21644;&#27809;&#21028;&#26029;&#26159;&#19968;&#26679;&#19968;&#26679;&#30340;&#12290;&#26368;&#21518;&#25226;&#36825;&#26465;&#35760;&#24405;&#36820;&#22238;&#32473;
   <code>
    server&#23618;
   </code>
   &#65292;
   <code>
    server&#23618;
   </code>
   &#20877;&#21028;&#26029;
   <code>
    number &gt;= 8
   </code>
   &#36825;&#20010;&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;&#65292;&#22914;&#26524;&#25104;&#31435;&#30340;&#35805;&#23601;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#65292;&#21542;&#21017;&#30340;&#35805;&#23601;&#32467;&#26463;&#26597;&#35810;&#12290;&#19981;&#36807;
   <code>
    InnoDB
   </code>
   &#23384;&#20648;&#24341;&#25806;&#25214;&#21040;&#32034;&#24341;&#20013;&#30340;&#26368;&#21518;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
   <code>
    Supremum
   </code>
   &#20266;&#35760;&#24405;&#20043;&#21518;&#65292;&#22312;&#23384;&#20648;&#24341;&#25806;&#20869;&#37096;&#23601;&#21487;&#20197;&#31435;&#21363;&#21028;&#26029;&#36825;&#26159;&#19968;&#26465;&#20266;&#35760;&#24405;&#65292;&#19981;&#24517;&#35201;&#36820;&#22238;&#32473;
   <code>
    server&#23618;
   </code>
   &#22788;&#29702;&#65292;&#20063;&#27809;&#24517;&#35201;&#32473;&#23427;&#20063;&#21152;&#19978;&#38145;&#65288;&#20063;&#23601;&#26159;&#35828;&#22312;&#31532;1&#27493;&#20013;&#23601;&#21387;&#26681;&#20799;&#27809;&#32473;&#36825;&#26465;&#35760;&#24405;&#21152;&#38145;&#65289;&#12290;&#25972;&#20010;&#36807;&#31243;&#20250;&#32473;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#12289;
   <code>
    15
   </code>
   &#12289;
   <code>
    20
   </code>
   &#36825;&#19977;&#26465;&#35760;&#24405;&#21152;&#19978;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#30011;&#20010;&#22270;&#34920;&#31034;&#19968;&#19979;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4bb2349a-13d6-11ed-838d-acde48001122">
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65306;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE number &gt;= 8;
</code></pre>
  <p>
   &#36825;&#26465;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#24182;&#27809;&#26377;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#21152;&#38145;&#26041;&#24335;&#21644;&#19978;&#36793;&#25152;&#35828;&#30340;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#12290;
  </p>
  <p>
   &#22914;&#26524;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#20013;&#26356;&#26032;&#20102;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET name = 'cao&#26361;&#25805;' WHERE number &gt;= 8;
</code></pre>
  <p>
   &#36825;&#26102;&#20505;&#20250;&#39318;&#20808;&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#20877;&#26356;&#26032;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#25152;&#20197;&#21152;&#38145;&#30340;&#27493;&#39588;&#23601;&#26159;&#65306;
  </p>
  <ol>
   <li>
    <p>
     &#20026;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      8
     </code>
     &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#28982;&#21518;&#20026;&#19978;&#19968;&#27493;&#20013;&#30340;&#35760;&#24405;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;
     <code>
      idx_name
     </code>
     &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#20026;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      15
     </code>
     &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#28982;&#21518;&#20026;&#19978;&#19968;&#27493;&#20013;&#30340;&#35760;&#24405;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;
     <code>
      idx_name
     </code>
     &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#20026;
     <code>
      number
     </code>
     &#20540;&#20026;
     <code>
      20
     </code>
     &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#28982;&#21518;&#20026;&#19978;&#19968;&#27493;&#20013;&#30340;&#35760;&#24405;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;
     <code>
      idx_name
     </code>
     &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
     <code>
      X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
     </code>
     &#12290;
    </p>
   </li>
  </ol>
  <p>
   &#30011;&#20010;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4bde1d4e-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#22914;&#26524;&#26159;&#19979;&#36793;&#36825;&#20010;&#35821;&#21477;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE number &lt;= 8;
</code></pre>
  <p>
   &#21017;&#20250;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    1
   </code>
   &#12289;
   <code>
    3
   </code>
   &#12289;
   <code>
    8
   </code>
   &#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#20197;&#21450;&#23427;&#20204;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#21152;&#38145;&#39034;&#24207;&#21644;&#19978;&#36793;&#35821;&#21477;&#20013;&#30340;&#21152;&#38145;&#39034;&#24207;&#31867;&#20284;&#65292;&#37117;&#26159;&#20808;&#23545;&#19968;&#26465;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#21518;&#65292;&#20877;&#32473;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#12290;&#20043;&#21518;&#20250;&#32487;&#32493;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#20294;&#26159;&#38543;&#21518;
   <code>
    InnoDB
   </code>
   &#23384;&#20648;&#24341;&#25806;&#21028;&#26029;&#23427;&#19981;&#31526;&#21512;&#36793;&#30028;&#26465;&#20214;&#65292;&#38543;&#21363;&#20250;&#37322;&#25918;&#25481;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#65288;&#27880;&#24847;&#36825;&#20010;&#36807;&#31243;&#20013;&#27809;&#26377;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65289;&#12290;&#20855;&#20307;&#31034;&#24847;&#22270;&#23601;&#19981;&#30011;&#20102;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>DELETE FROM hero WHERE number &gt;= 8;
</code></pre>
  <p>
   &#21644;
  </p>
  <pre><code>DELETE FROM hero WHERE number &lt;= 8;
</code></pre>
  <p>
   &#36825;&#20004;&#20010;&#35821;&#21477;&#30340;&#21152;&#38145;&#24773;&#20917;&#21644;&#26356;&#26032;&#24102;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#65292;&#23601;&#19981;&#30011;&#22270;&#20102;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#31561;&#20540;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#22312;READ UNCOMMITTED&#21644;READ COMMITTED&#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#20351;&#29992;&#26222;&#36890;&#30340;&#20108;&#32423;&#32034;&#24341;&#21644;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#21152;&#38145;&#30340;&#36807;&#31243;&#26159;&#19968;&#26679;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#20063;&#23601;&#19981;&#20998;&#24320;&#35752;&#35770;&#20102;&#12290;
 </p>
</blockquote>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30340;&#25191;&#34892;&#36807;&#31243;&#26159;&#20808;&#36890;&#36807;&#20108;&#32423;&#32034;&#24341;
   <code>
    idx_name
   </code>
   &#23450;&#20301;&#21040;&#28385;&#36275;
   <code>
    name = 'c&#26361;&#25805;'
   </code>
   &#26465;&#20214;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#28982;&#21518;&#36827;&#34892;&#22238;&#34920;&#25805;&#20316;&#12290;&#25152;&#20197;&#20808;&#35201;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#28982;&#21518;&#20877;&#32473;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#31034;&#24847;&#22270;&#22914;&#19979;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4c337ad2-13d6-11ed-838d-acde48001122">
   <br>
   &#36825;&#37324;&#38656;&#35201;&#20877;&#27425;&#24378;&#35843;&#19968;&#19979;&#36825;&#20010;&#35821;&#21477;&#30340;&#21152;&#38145;&#39034;&#24207;&#65306;
  </p>
  <ol>
   <li>
    <p>
     &#20808;&#23545;
     <code>
      name
     </code>
     &#21015;&#20026;
     <code>
      'c&#26361;&#25805;'
     </code>
     &#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#20877;&#23545;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#12290;
    </p>
   </li>
  </ol>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#25105;&#20204;&#30693;&#36947;idx_name&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;&#20108;&#32423;&#32034;&#24341;&#65292;&#21040;idx_name&#32034;&#24341;&#20013;&#23450;&#20301;&#21040;&#28385;&#36275;name= 'c&#26361;&#25805;'&#36825;&#20010;&#26465;&#20214;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#21518;&#65292;&#23601;&#21487;&#20197;&#27839;&#30528;&#36825;&#26465;&#35760;&#24405;&#19968;&#36335;&#21521;&#21518;&#25214;&#12290;&#21487;&#26159;&#20174;&#25105;&#20204;&#19978;&#36793;&#30340;&#25551;&#36848;&#20013;&#21487;&#20197;&#30475;&#20986;&#26469;&#65292;&#24182;&#27809;&#26377;&#23545;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#36825;&#26159;&#20026;&#20160;&#20040;&#21602;&#65311;&#36825;&#26159;&#22240;&#20026;&#35774;&#35745;InnoDB&#30340;&#22823;&#21460;&#23545;&#31561;&#20540;&#21305;&#37197;&#30340;&#26465;&#20214;&#26377;&#29305;&#27530;&#22788;&#29702;&#65292;&#20182;&#20204;&#35268;&#23450;&#22312;InnoDB&#23384;&#20648;&#24341;&#25806;&#23618;&#26597;&#25214;&#21040;&#24403;&#21069;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#26102;&#65292;&#22312;&#23545;&#20854;&#21152;&#38145;&#21069;&#23601;&#30452;&#25509;&#21028;&#26029;&#35813;&#35760;&#24405;&#26159;&#21542;&#28385;&#36275;&#31561;&#20540;&#21305;&#37197;&#30340;&#26465;&#20214;&#65292;&#22914;&#26524;&#19981;&#28385;&#36275;&#30452;&#25509;&#36820;&#22238;&#65288;&#20063;&#23601;&#26159;&#19981;&#21152;&#38145;&#20102;&#65289;&#65292;&#21542;&#21017;&#30340;&#35805;&#38656;&#35201;&#23558;&#20854;&#21152;&#38145;&#21518;&#20877;&#36820;&#22238;&#32473;server&#23618;&#12290;&#25152;&#20197;&#36825;&#37324;&#20063;&#23601;&#19981;&#38656;&#35201;&#23545;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#20102;&#12290;
   </p>
  </blockquote>
  <p>
   &#29616;&#22312;&#35201;&#20171;&#32461;&#19968;&#20010;&#38750;&#24120;&#26377;&#36259;&#30340;&#20107;&#24773;&#65292;&#25105;&#20204;&#20551;&#35774;&#19978;&#36793;&#36825;&#20010;&#35821;&#21477;&#22312;&#20107;&#21153;
   <code>
    T1
   </code>
   &#20013;&#36816;&#34892;&#65292;&#28982;&#21518;&#20107;&#21153;
   <code>
    T2
   </code>
   &#20013;&#36816;&#34892;&#19979;&#36793;&#19968;&#20010;&#25105;&#20204;&#20043;&#21069;&#20171;&#32461;&#36807;&#30340;&#35821;&#21477;&#65306;
  </p>
  <pre><code>UPDATE hero SET name = '&#26361;&#25805;' WHERE number = 8;
</code></pre>
  <p>
   &#36825;&#20004;&#20010;&#35821;&#21477;&#37117;&#26159;&#35201;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21644;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#20294;&#26159;&#19981;&#21516;&#28857;&#26159;&#21152;&#38145;&#30340;&#39034;&#24207;&#19981;&#19968;&#26679;&#12290;&#36825;&#20010;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#26159;&#20808;&#23545;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#21518;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#22914;&#26524;&#22312;&#19981;&#21516;&#20107;&#21153;&#20013;&#36816;&#34892;&#19978;&#36848;&#20004;&#20010;&#35821;&#21477;&#65292;&#21487;&#33021;&#21457;&#29983;&#19968;&#31181;&#36156;&#22855;&#22937;&#30340;&#20107;&#24773; &#8212;&#8212;
  </p>
  <ul>
   <li>
    <p>
     &#20107;&#21153;
     <code>
      T1
     </code>
     &#25345;&#26377;&#20102;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#30340;&#38145;&#65292;&#20107;&#21153;
     <code>
      T2
     </code>
     &#25345;&#26377;&#20102;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#30340;&#38145;&#12290;
    </p>
   </li>
   <li>
    <p>
     &#20107;&#21153;
     <code>
      T1
     </code>
     &#22312;&#31561;&#24453;&#33719;&#21462;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#65292;&#65292;&#20107;&#21153;
     <code>
      T2
     </code>
     &#22312;&#31561;&#24453;&#33719;&#21462;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#12290;
    </p>
   </li>
  </ul>
  <p>
   &#20004;&#20010;&#20107;&#21153;&#37117;&#20998;&#21035;&#25345;&#26377;&#19968;&#20010;&#38145;&#65292;&#32780;&#19988;&#37117;&#22312;&#31561;&#24453;&#23545;&#26041;&#24050;&#32463;&#25345;&#26377;&#30340;&#37027;&#20010;&#38145;&#65292;&#36825;&#31181;&#24773;&#20917;&#23601;&#26159;&#25152;&#35859;&#30340;
   <code>
    &#27515;&#38145;
   </code>
   &#65292;&#20004;&#20010;&#20107;&#21153;&#37117;&#26080;&#27861;&#36816;&#34892;&#19979;&#21435;&#65292;&#24517;&#39035;&#36873;&#25321;&#19968;&#20010;&#36827;&#34892;&#22238;&#28378;&#65292;&#23545;&#24615;&#33021;&#24433;&#21709;&#27604;&#36739;&#22823;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26102;&#65292;&#27604;&#22914;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'c&#26361;&#25805;' FOR UPDATE;
</code></pre>
  <p>
   &#36825;&#31181;&#24773;&#20917;&#19979;&#19982;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#35821;&#21477;&#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#37117;&#26159;&#32473;&#35775;&#38382;&#21040;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21644;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#32610;&#20102;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <p>
   &#19982;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#30340;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#19981;&#36807;&#22914;&#26524;&#34987;&#26356;&#26032;&#30340;&#21015;&#20013;&#36824;&#26377;&#21035;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;&#35805;&#65292;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20063;&#20250;&#34987;&#21152;&#38145;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <p>
   &#19982;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#19981;&#36807;&#22914;&#26524;&#34920;&#20013;&#36824;&#26377;&#21035;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;&#35805;&#65292;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20063;&#20250;&#34987;&#21152;&#38145;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero FORCE INDEX(idx_name)  WHERE name &gt;= 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#22240;&#20026;&#20248;&#21270;&#22120;&#20250;&#35745;&#31639;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#26597;&#35810;&#30340;&#25104;&#26412;&#65292;&#22312;&#25104;&#26412;&#36739;&#22823;&#26102;&#21487;&#33021;&#36873;&#25321;&#20197;&#20840;&#34920;&#25195;&#25551;&#30340;&#26041;&#24335;&#26469;&#25191;&#34892;&#26597;&#35810;&#65292;&#25152;&#20197;&#25105;&#20204;&#36825;&#37324;&#20351;&#29992;FORCE INDEX(idx_name)&#26469;&#24378;&#21046;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#26469;&#25191;&#34892;&#26597;&#35810;&#12290;
   </p>
  </blockquote>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30340;&#25191;&#34892;&#36807;&#31243;&#20854;&#23454;&#26159;&#20808;&#21040;&#20108;&#32423;&#32034;&#24341;&#20013;&#23450;&#20301;&#21040;&#28385;&#36275;
   <code>
    name &gt;= 'c&#26361;&#25805;'
   </code>
   &#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    c&#26361;&#25805;
   </code>
   &#30340;&#35760;&#24405;&#65292;&#28982;&#21518;&#23601;&#21487;&#20197;&#27839;&#30528;&#36825;&#26465;&#35760;&#24405;&#30340;&#38142;&#34920;&#19968;&#36335;&#21521;&#21518;&#25214;&#65292;&#20174;&#20108;&#32423;&#32034;&#24341;
   <code>
    idx_name
   </code>
   &#30340;&#31034;&#24847;&#22270;&#20013;&#21487;&#20197;&#30475;&#20986;&#65292;&#25152;&#26377;&#30340;&#29992;&#25143;&#35760;&#24405;&#37117;&#28385;&#36275;
   <code>
    name &gt;= 'c&#26361;&#25805;'
   </code>
   &#30340;&#36825;&#20010;&#26465;&#20214;&#65292;&#25152;&#20197;&#25152;&#26377;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#37117;&#20250;&#34987;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#23427;&#20204;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#20063;&#20250;&#34987;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#12290;&#19981;&#36807;&#38656;&#35201;&#27880;&#24847;&#19968;&#19979;&#21152;&#38145;&#39034;&#24207;&#65292;&#23545;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#23436;&#21518;&#65292;&#20250;&#25509;&#30528;&#23545;&#23427;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#23436;&#21518;&#25165;&#20250;&#23545;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#20197;&#27492;&#31867;&#25512;&#65374; &#30011;&#20010;&#22270;&#34920;&#31034;&#19968;&#19979;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4c5d1e0a-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#20877;&#26469;&#30475;&#19979;&#36793;&#36825;&#20010;&#35821;&#21477;&#65306;
  </p>
  <pre><code>SELECT * FROM hero FORCE INDEX(idx_name) WHERE name &lt;= 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30340;&#21152;&#38145;&#24773;&#20917;&#23601;&#26377;&#28857;&#20799;&#26377;&#36259;&#20102;&#12290;&#21069;&#36793;&#35828;&#22312;&#20351;&#29992;
   <code>
    number &lt;= 8
   </code>
   &#36825;&#20010;&#26465;&#20214;&#30340;&#35821;&#21477;&#20013;&#65292;&#38656;&#35201;&#25226;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#20063;&#21152;&#19968;&#20010;&#38145;&#65292;&#20043;&#21518;&#21448;&#21028;&#26029;&#23427;&#19981;&#31526;&#21512;&#36793;&#30028;&#26465;&#20214;&#32780;&#25226;&#38145;&#37322;&#25918;&#25481;&#12290;&#32780;&#23545;&#20110;&#26597;&#35810;&#26465;&#20214;
   <code>
    name &lt;= 'c&#26361;&#25805;'
   </code>
   &#30340;&#35821;&#21477;&#26469;&#35828;&#65292;&#25191;&#34892;&#35813;&#35821;&#21477;&#38656;&#35201;&#20351;&#29992;&#21040;&#20108;&#32423;&#32034;&#24341;&#65292;&#32780;&#19982;&#20108;&#32423;&#32034;&#24341;&#30456;&#20851;&#30340;&#26465;&#20214;&#26159;&#21487;&#20197;&#20351;&#29992;
   <code>
    &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
   </code>
   &#36825;&#20010;&#29305;&#24615;&#30340;&#12290;&#35774;&#35745;
   <code>
    InnoDB
   </code>
   &#30340;&#22823;&#21460;&#35268;&#23450;&#65292;&#22914;&#26524;&#19968;&#26465;&#35760;&#24405;&#19981;&#31526;&#21512;
   <code>
    &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
   </code>
   &#20013;&#30340;&#26465;&#20214;&#30340;&#35805;&#65292;&#30452;&#25509;&#36339;&#21040;&#19979;&#19968;&#26465;&#35760;&#24405;&#65288;&#36825;&#20010;&#36807;&#31243;&#26681;&#26412;&#19981;&#23558;&#20854;&#36820;&#22238;&#21040;
   <code>
    server&#23618;
   </code>
   &#65289;&#65292;&#22914;&#26524;&#36825;&#24050;&#32463;&#26159;&#26368;&#21518;&#19968;&#26465;&#35760;&#24405;&#65292;&#37027;&#20040;&#30452;&#25509;&#21521;
   <code>
    server&#23618;
   </code>
   &#25253;&#21578;&#26597;&#35810;&#23436;&#27605;&#12290;&#20294;&#26159;&#36825;&#37324;&#22836;&#26377;&#20010;&#38382;&#39064;&#21568;&#65306;
   <span>
    &#20808;&#23545;&#19968;&#26465;&#35760;&#24405;&#21152;&#20102;&#38145;&#65292;&#28982;&#21518;&#20877;&#21028;&#26029;&#35813;&#35760;&#24405;&#26159;&#19981;&#26159;&#31526;&#21512;&#32034;&#24341;&#26465;&#20214;&#19979;&#25512;&#30340;&#26465;&#20214;&#65292;&#22914;&#26524;&#19981;&#31526;&#21512;&#30452;&#25509;&#36339;&#21040;&#19979;&#19968;&#26465;&#35760;&#24405;&#25110;&#32773;&#30452;&#25509;&#21521;server&#23618;&#25253;&#21578;&#26597;&#35810;&#23436;&#27605;&#65292;&#36825;&#20010;&#36807;&#31243;&#20013;&#24182;&#27809;&#26377;&#25226;&#37027;&#26465;&#34987;&#21152;&#38145;&#30340;&#35760;&#24405;&#19978;&#30340;&#38145;&#37322;&#25918;&#25481;&#21568;&#65281;&#65281;&#65281;
   </span>
   &#12290;&#26412;&#20363;&#20013;&#20351;&#29992;&#30340;&#26597;&#35810;&#26465;&#20214;&#26159;
   <code>
    name &lt;= 'c&#26361;&#25805;'
   </code>
   &#65292;&#22312;&#20026;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'c&#26361;&#25805;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20197;&#21450;&#23427;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#21152;&#38145;&#20043;&#21518;&#65292;&#20250;&#25509;&#30528;&#20108;&#32423;&#32034;&#24341;&#20013;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'l&#21016;&#22791;'
   </code>
   &#30340;&#37027;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#30001;&#20110;&#35813;&#35760;&#24405;&#19981;&#31526;&#21512;
   <code>
    &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
   </code>
   &#30340;&#26465;&#20214;&#65292;&#32780;&#19988;&#26159;&#33539;&#22260;&#26597;&#35810;&#30340;&#26368;&#21518;&#19968;&#26465;&#35760;&#24405;&#65292;&#20250;&#30452;&#25509;&#21521;
   <code>
    server&#23618;
   </code>
   &#25253;&#21578;&#26597;&#35810;&#23436;&#27605;&#65292;&#37325;&#28857;&#26159;&#36825;&#20010;&#36807;&#31243;&#20013;&#24182;&#19981;&#20250;&#37322;&#25918;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'l&#21016;&#22791;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#65292;&#20063;&#23601;&#23548;&#33268;&#20102;&#35821;&#21477;&#25191;&#34892;&#23436;&#27605;&#26102;&#30340;&#21152;&#38145;&#24773;&#20917;&#22914;&#19979;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4c845786-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#36825;&#26679;&#23376;&#20250;&#36896;&#25104;&#19968;&#20010;&#23604;&#23596;&#24773;&#20917;&#65292;&#20551;&#22914;
   <code>
    T1
   </code>
   &#25191;&#34892;&#20102;&#19978;&#36848;&#35821;&#21477;&#24182;&#19988;&#23578;&#26410;&#25552;&#20132;&#65292;
   <code>
    T2
   </code>
   &#20877;&#25191;&#34892;&#36825;&#20010;&#35821;&#21477;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'l&#21016;&#22791;' FOR UPDATE;
</code></pre>
  <p>
   <code>
    T2
   </code>
   &#20013;&#30340;&#35821;&#21477;&#38656;&#35201;&#33719;&#21462;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    l&#21016;&#22791;
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#32780;
   <code>
    T1
   </code>
   &#20013;&#20173;&#28982;&#25345;&#26377;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    l&#21016;&#22791;
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#36825;&#23601;&#36896;&#25104;&#20102;
   <code>
    T2
   </code>
   &#33719;&#21462;&#19981;&#21040;&#38145;&#32780;&#36827;&#20837;&#31561;&#24453;&#29366;&#24577;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26102;&#65306;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE name &gt;= 'c&#26361;&#25805;';
</code></pre>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    FORCE INDEX&#21482;&#23545;SELECT&#35821;&#21477;&#36215;&#20316;&#29992;&#65292;UPDATE&#35821;&#21477;&#34429;&#28982;&#25903;&#25345;&#35813;&#35821;&#27861;&#65292;&#20294;&#23454;&#36136;&#19978;&#19981;&#36215;&#20316;&#29992;&#65292;DELETE&#35821;&#21477;&#21387;&#26681;&#20799;&#19981;&#25903;&#25345;&#35813;&#35821;&#27861;&#12290;
   </p>
  </blockquote>
  <p>
   &#20551;&#35774;&#35813;&#35821;&#21477;&#25191;&#34892;&#26102;&#20351;&#29992;&#20102;
   <code>
    idx_name
   </code>
   &#20108;&#32423;&#32034;&#24341;&#26469;&#36827;&#34892;
   <code>
    &#38145;&#23450;&#35835;
   </code>
   &#65292;&#37027;&#20040;&#23427;&#30340;&#21152;&#38145;&#26041;&#24335;&#21644;&#19978;&#36793;&#25152;&#35828;&#30340;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#12290;&#22914;&#26524;&#26377;&#20854;&#20182;&#20108;&#32423;&#32034;&#24341;&#21015;&#20063;&#34987;&#26356;&#26032;&#65292;&#37027;&#20040;&#20063;&#20250;&#20026;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;&#19981;&#36807;&#36824;&#26377;&#19968;&#20010;&#26377;&#36259;&#30340;&#24773;&#20917;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE name &lt;= 'c&#26361;&#25805;';
</code></pre>
  <p>
   &#25105;&#20204;&#21069;&#36793;&#35828;&#30340;
   <code>
    &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
   </code>
   &#36825;&#20010;&#29305;&#24615;&#21482;&#36866;&#29992;&#20110;
   <code>
    SELECT
   </code>
   &#35821;&#21477;&#65292;&#20063;&#23601;&#26159;&#35828;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#20013;&#26080;&#27861;&#20351;&#29992;&#65292;&#37027;&#20040;&#36825;&#20010;&#35821;&#21477;&#23601;&#20250;&#20026;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'c&#26361;&#25805;'
   </code>
   &#21644;
   <code>
    'l&#21016;&#22791;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20197;&#21450;&#23427;&#20204;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#36827;&#34892;&#21152;&#38145;&#65292;&#20043;&#21518;&#22312;&#21028;&#26029;&#36793;&#30028;&#26465;&#20214;&#26102;&#21457;&#29616;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'l&#21016;&#22791;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19981;&#31526;&#21512;
   <code>
    name &lt;= 'c&#26361;&#25805;'
   </code>
   &#26465;&#20214;&#65292;&#20877;&#25226;&#35813;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21644;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#37322;&#25918;&#25481;&#12290;&#36825;&#20010;&#36807;&#31243;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4caaaecc-13d6-11ed-838d-acde48001122">
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>DELETE FROM hero WHERE name &gt;= 'c&#26361;&#25805;';
</code></pre>
  <p>
   &#21644;
  </p>
  <pre><code>DELETE FROM hero WHERE name &lt;= 'c&#26361;&#25805;';
</code></pre>
  <p>
   &#22914;&#26524;&#36825;&#20004;&#20010;&#35821;&#21477;&#37319;&#29992;&#20108;&#32423;&#32034;&#24341;&#26469;&#36827;&#34892;
   <code>
    &#38145;&#23450;&#35835;
   </code>
   &#65292;&#37027;&#20040;&#23427;&#20204;&#30340;&#21152;&#38145;&#24773;&#20917;&#21644;&#26356;&#26032;&#24102;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#65292;&#23601;&#19981;&#30011;&#22270;&#20102;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#20840;&#34920;&#25195;&#25551;&#30340;&#24773;&#20917;
</h5>
<p>
 &#27604;&#26041;&#35828;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE country  = '&#39759;' LOCK IN SHARE MODE;
</code></pre>
<p>
 &#30001;&#20110;
 <code>
  country
 </code>
 &#21015;&#19978;&#26410;&#24314;&#32034;&#24341;&#65292;&#25152;&#20197;&#21482;&#33021;&#37319;&#29992;&#20840;&#34920;&#25195;&#25551;&#30340;&#26041;&#24335;&#26469;&#25191;&#34892;&#36825;&#26465;&#26597;&#35810;&#35821;&#21477;&#65292;&#23384;&#20648;&#24341;&#25806;&#27599;&#35835;&#21462;&#19968;&#26465;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#23601;&#20250;&#20026;&#36825;&#26465;&#35760;&#24405;&#21152;&#38145;&#19968;&#20010;
 <code>
  S&#22411;&#27491;&#24120;&#35760;&#24405;&#38145;
 </code>
 &#65292;&#28982;&#21518;&#36820;&#22238;&#32473;
 <code>
  server&#23618;
 </code>
 &#65292;&#22914;&#26524;
 <code>
  server&#23618;
 </code>
 &#21028;&#26029;
 <code>
  country  = '&#39759;'
 </code>
 &#36825;&#20010;&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;&#65292;&#22914;&#26524;&#25104;&#31435;&#21017;&#23558;&#20854;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#65292;&#21542;&#21017;&#20250;&#37322;&#25918;&#25481;&#35813;&#35760;&#24405;&#19978;&#30340;&#38145;&#65292;&#30011;&#20010;&#22270;&#23601;&#20687;&#36825;&#26679;&#65306;
</p>
<p>
 <img alt="" src="EPUB/4cb6561e-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20351;&#29992;
 <code>
  SELECT ... FOR UPDATE
 </code>
 &#36827;&#34892;&#21152;&#38145;&#30340;&#24773;&#20917;&#19982;&#19978;&#36793;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
 <code>
  X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#65292;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;
</p>
<p>
 &#23545;&#20110;
 <code>
  UPDATE ...
 </code>
 &#21644;
 <code>
  DELETE ...
 </code>
 &#30340;&#35821;&#21477;&#26469;&#35828;&#65292;&#22312;&#36941;&#21382;&#32858;&#31751;&#32034;&#24341;&#20013;&#30340;&#35760;&#24405;&#65292;&#37117;&#20250;&#20026;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
 <code>
  X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#65292;&#28982;&#21518;&#65306;
</p>
<ul>
 <li>
  <p>
   &#22914;&#26524;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19981;&#28385;&#36275;&#26465;&#20214;&#65292;&#30452;&#25509;&#25226;&#35813;&#35760;&#24405;&#19978;&#30340;&#38145;&#37322;&#25918;&#25481;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#22914;&#26524;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#28385;&#36275;&#26465;&#20214;&#65292;&#21017;&#20250;&#23545;&#30456;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19978;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65288;
   <code>
    DELETE
   </code>
   &#35821;&#21477;&#20250;&#23545;&#25152;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#21152;&#38145;&#65292;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#21482;&#20250;&#20026;&#26356;&#26032;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65289;&#12290;
  </p>
 </li>
</ul>
<h4>
 REPEATABLE READ&#38548;&#31163;&#32423;&#21035;&#19979;
</h4>
<p>
 <code>
  REPEATABLE READ
 </code>
 &#38548;&#31163;&#32423;&#21035;&#19982;
 <code>
  READ UNCOMMITTED
 </code>
 &#21644;
 <code>
  READ COMMITTED
 </code>
 &#36825;&#20004;&#20010;&#38548;&#31163;&#32423;&#21035;&#30456;&#27604;&#65292;&#26368;&#20027;&#35201;&#30340;&#23601;&#26159;&#35201;&#35299;&#20915;
 <code>
  &#24187;&#35835;
 </code>
 &#38382;&#39064;&#65292;
 <code>
  &#24187;&#35835;
 </code>
 &#30340;&#35299;&#20915;&#36824;&#24471;&#38752;&#25105;&#20204;&#19978;&#36793;&#35762;&#36807;&#30340;
 <code>
  gap&#38145;
 </code>
 &#12290;
</p>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#31561;&#20540;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number = 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#25105;&#20204;&#30693;&#36947;&#20027;&#38190;&#20855;&#26377;&#21807;&#19968;&#24615;&#65292;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#19979;&#27425;&#20877;&#25191;&#34892;&#36825;&#20010;&#26597;&#35810;&#35821;&#21477;&#30340;&#26102;&#20505;&#32943;&#23450;&#19981;&#20250;&#26377;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;&#22810;&#26465;
   <code>
    number
   </code>
   &#20540;&#20026;8&#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#36825;&#31181;&#24773;&#20917;&#19979;&#21644;
   <code>
    READ UNCOMMITTED&#65295;READ COMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#19968;&#26679;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#20026;&#36825;&#26465;
   <code>
    number
   </code>
   &#20540;&#20026;8&#30340;&#35760;&#24405;&#21152;&#19968;&#20010;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#23601;&#22909;&#20102;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4cc1759e-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#20294;&#26159;&#22914;&#26524;&#25105;&#20204;&#26597;&#35810;&#20102;&#26597;&#35810;&#30340;&#20027;&#38190;&#20540;&#19981;&#23384;&#22312;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number = 7 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#30001;&#20110;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    7
   </code>
   &#30340;&#35760;&#24405;&#19981;&#23384;&#22312;&#65292;&#20026;&#20102;&#31105;&#27490;
   <code>
    &#24187;&#35835;
   </code>
   &#29616;&#35937;&#65292;&#22312;&#24403;&#21069;&#20107;&#21153;&#25552;&#20132;&#21069;&#25105;&#20204;&#38656;&#35201;&#39044;&#38450;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    7
   </code>
   &#30340;&#26032;&#35760;&#24405;&#65292;&#25152;&#20197;&#38656;&#35201;&#22312;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#19978;&#21152;&#19968;&#20010;
   <code>
    gap&#38145;
   </code>
   &#65292;&#20063;&#23601;&#26159;&#19981;&#20801;&#35768;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;
   <code>
    number
   </code>
   &#20540;&#22312;
   <code>
    (3, 8)
   </code>
   &#36825;&#20010;&#21306;&#38388;&#30340;&#26032;&#35760;&#24405;&#12290;&#30011;&#20010;&#22270;&#34920;&#31034;&#19968;&#19979;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4ccdb868-13d6-11ed-838d-acde48001122">
  </p>
 </li>
</ul>
<p>
 &#22914;&#26524;&#22312;
 <code>
  READ UNCOMMITTED&#65295;READ COMMITTED
 </code>
 &#38548;&#31163;&#32423;&#21035;&#19979;&#19968;&#26679;&#26597;&#35810;&#20102;&#19968;&#26465;&#20027;&#38190;&#20540;&#19981;&#23384;&#22312;&#30340;&#35760;&#24405;&#65292;&#37027;&#20040;&#20160;&#20040;&#38145;&#20063;&#19981;&#38656;&#35201;&#21152;&#65292;&#22240;&#20026;&#22312;
 <code>
  READ UNCOMMITTED&#65295;READ COMMITTED
 </code>
 &#38548;&#31163;&#32423;&#21035;&#19979;&#65292;&#24182;&#19981;&#38656;&#35201;&#31105;&#27490;
 <code>
  &#24187;&#35835;
 </code>
 &#38382;&#39064;&#12290;
</p>
<p>
 &#20854;&#20313;&#35821;&#21477;&#30340;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#31561;&#20540;&#26597;&#35810;&#30340;&#24773;&#20917;&#19982;
 <code>
  READ UNCOMMITTED&#65295;READ COMMITTED
 </code>
 &#38548;&#31163;&#32423;&#21035;&#31867;&#20284;&#65292;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;
</p>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#20027;&#38190;&#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number &gt;= 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#22240;&#20026;&#35201;&#35299;&#20915;&#24187;&#35835;&#38382;&#39064;&#65292;&#25152;&#20197;&#31105;&#27490;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;
   <code>
    number
   </code>
   &#20540;&#31526;&#21512;
   <code>
    number &gt;= 8
   </code>
   &#30340;&#35760;&#24405;&#65292;&#21448;&#22240;&#20026;&#20027;&#38190;&#26412;&#36523;&#23601;&#26159;&#21807;&#19968;&#30340;&#65292;&#25152;&#20197;&#25105;&#20204;&#19981;&#29992;&#25285;&#24515;&#22312;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#21069;&#36793;&#26377;&#26032;&#35760;&#24405;&#25554;&#20837;&#65292;&#21482;&#38656;&#35201;&#20445;&#35777;&#19981;&#35201;&#35753;&#26032;&#35760;&#24405;&#25554;&#20837;&#21040;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#21518;&#36793;&#23601;&#22909;&#20102;&#65292;&#25152;&#20197;&#65306;
  </p>
  <ul>
   <li>
    &#20026;
    <code>
     number
    </code>
    &#20540;&#20026;
    <code>
     8
    </code>
    &#30340;&#35760;&#24405;&#21152;&#19968;&#20010;
    <code>
     S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
    </code>
    &#12290;
   </li>
   <li>
    &#20026;
    <code>
     number
    </code>
    &#20540;&#22823;&#20110;
    <code>
     8
    </code>
    &#30340;&#35760;&#24405;&#37117;&#21152;&#19968;&#20010;
    <code>
     S&#22411;next-key&#38145;
    </code>
    &#65288;&#21253;&#25324;
    <code>
     Supremum
    </code>
    &#20266;&#35760;&#24405;&#65289;&#12290;
   </li>
  </ul>
  <p>
   &#30011;&#20010;&#22270;&#23601;&#26159;&#36825;&#26679;&#23376;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4cd71958-13d6-11ed-838d-acde48001122">
  </p>
  <blockquote>
   <p>
    &#23567;&#36148;&#22763;&#65306;
    <br>
    <br>
    &#20026;&#20160;&#20040;&#19981;&#32473;Supremum&#35760;&#24405;&#21152;gap&#38145;&#65292;&#32780;&#35201;&#21152;next-key&#38145;&#21602;&#65311;&#20854;&#23454;&#35774;&#35745;InnoDB&#30340;&#22823;&#21460;&#22312;&#22788;&#29702;Supremum&#35760;&#24405;&#19978;&#21152;&#30340;next-key&#38145;&#26102;&#23601;&#26159;&#24403;&#20316;gap&#38145;&#30475;&#24453;&#30340;&#65292;&#21482;&#19981;&#36807;&#20026;&#20102;&#33410;&#30465;&#38145;&#32467;&#26500;&#65288;&#25105;&#20204;&#21069;&#36793;&#35828;&#38145;&#30340;&#31867;&#22411;&#19981;&#19968;&#26679;&#30340;&#35805;&#19981;&#33021;&#34987;&#25918;&#21040;&#19968;&#20010;&#38145;&#32467;&#26500;&#20013;&#65289;&#25165;&#36825;&#20040;&#20570;&#30340;&#32780;&#24050;&#65292;&#22823;&#23478;&#19981;&#24517;&#22312;&#24847;&#12290;
   </p>
  </blockquote>
  <p>
   &#21516;&#26679;&#30340;&#65292;&#19979;&#36793;&#36825;&#20010;&#33539;&#22260;&#26597;&#35810;&#20063;&#26159;&#26377;&#28857;&#29305;&#27530;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE number &lt;= 8 LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#22240;&#20026;&#27809;&#26377;&#20351;&#29992;
   <code>
    &#32034;&#24341;&#35760;&#24405;&#19979;&#25512;
   </code>
   &#65292;&#25152;&#20197;&#22312;&#21152;&#38145;&#26102;&#20250;&#25226;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    1
   </code>
   &#12289;
   <code>
    3
   </code>
   &#12289;
   <code>
    8
   </code>
   &#12289;
   <code>
    15
   </code>
   &#36825;&#22235;&#26465;&#35760;&#24405;&#37117;&#21152;&#19978;
   <code>
    S&#22411;next-key
   </code>
   &#38145;&#65292;&#19981;&#36807;&#20043;&#21518;
   <code>
    server&#23618;
   </code>
   &#21028;&#26029;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#19981;&#28385;&#36275;
   <code>
    number &lt;= 8
   </code>
   &#26465;&#20214;&#21518;&#65292;&#19982;
   <code>
    READ UNCOMMITTED/READ COMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#30340;&#22788;&#29702;&#26041;&#24335;&#19981;&#21516;&#65292;
   <code>
    REPEATABLE READ
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#24182;&#19981;&#20250;&#25226;&#38145;&#37322;&#25918;&#25481;&#65292;&#25152;&#20197;&#29616;&#22312;&#30340;&#21152;&#38145;&#30340;&#22270;&#31034;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4ce5ec44-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#36825;&#26679;&#22914;&#26524;&#21035;&#30340;&#20107;&#21153;&#24819;&#35201;&#25554;&#20837;&#30340;&#26032;&#35760;&#24405;&#30340;
   <code>
    number
   </code>
   &#20540;&#22312;
   <code>
    (-&#8734;, 1)
   </code>
   &#12289;
   <code>
    (1, 3)
   </code>
   &#12289;
   <code>
    (3, 8)
   </code>
   &#12289;
   <code>
    (8, 15)
   </code>
   &#20043;&#38388;&#30340;&#35805;&#65292;&#26159;&#20250;&#36827;&#20837;&#31561;&#24453;&#29366;&#24577;&#30340;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26102;&#65306;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#38656;&#35201;&#23558;&#19978;&#36793;&#25552;&#21040;&#30340;
   <code>
    S&#22411;next-key&#38145;
   </code>
   &#26367;&#25442;&#25104;
   <code>
    X&#22411;next-key&#38145;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65306;
  </p>
  <p>
   &#22914;&#26524;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#26410;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE number &gt;= 8;
</code></pre>
  <p>
   &#36825;&#26465;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#24182;&#27809;&#26377;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#21152;&#38145;&#26041;&#24335;&#21644;&#19978;&#36793;&#25152;&#35828;&#30340;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#12290;
  </p>
  <p>
   &#22914;&#26524;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#20013;&#26356;&#26032;&#20102;&#20108;&#32423;&#32034;&#24341;&#21015;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>UPDATE hero SET name = 'cao&#26361;&#25805;' WHERE number &gt;= 8;
</code></pre>
  <p>
   &#23545;&#32858;&#31751;&#32034;&#24341;&#21152;&#38145;&#30340;&#24773;&#20917;&#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#19968;&#33268;&#65292;&#20063;&#23601;&#26159;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#21152;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#23545;
   <code>
    number
   </code>
   &#20540;
   <code>
    15
   </code>
   &#12289;
   <code>
    20
   </code>
   &#30340;&#35760;&#24405;&#20197;&#21450;
   <code>
    Supremum
   </code>
   &#35760;&#24405;&#21152;
   <code>
    X&#22411;next-key&#38145;
   </code>
   &#12290;&#20294;&#26159;&#20063;&#20250;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    8
   </code>
   &#12289;
   <code>
    15
   </code>
   &#12289;
   <code>
    20
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#30011;&#20010;&#22270;&#34920;&#31034;&#19968;&#19979;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4cf6da40-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#22914;&#26524;&#26159;&#19979;&#36793;&#36825;&#20010;&#35821;&#21477;&#65306;
  </p>
  <pre><code>UPDATE hero SET country = '&#27721;' WHERE number &lt;= 8;
</code></pre>
  <p>
   &#21017;&#20250;&#23545;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    1
   </code>
   &#12289;
   <code>
    3
   </code>
   &#12289;
   <code>
    8
   </code>
   &#12289;
   <code>
    15
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    X&#22411;next-key
   </code>
   &#65292;&#20294;&#26159;&#30001;&#20110;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19981;&#28385;&#36275;
   <code>
    number &lt;= 8
   </code>
   &#30340;&#26465;&#20214;&#65292;&#34429;&#28982;&#22312;
   <code>
    REPEATABLE READ
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#19981;&#20250;&#23558;&#23427;&#30340;&#38145;&#37322;&#25918;&#25481;&#65292;&#20294;&#26159;&#20063;&#24182;&#19981;&#20250;&#23545;&#36825;&#26465;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#20063;&#23601;&#26159;&#35828;&#21482;&#20250;&#20026;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#30340;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    1
   </code>
   &#12289;
   <code>
    3
   </code>
   &#12289;
   <code>
    8
   </code>
   &#30340;&#35760;&#24405;&#21152;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#22270;&#23601;&#19981;&#30011;&#20102;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>DELETE FROM hero WHERE number &gt;= 8;
</code></pre>
  <p>
   &#21644;
  </p>
  <pre><code>DELETE FROM hero WHERE number &lt;= 8;
</code></pre>
  <p>
   &#36825;&#20004;&#20010;&#35821;&#21477;&#30340;&#21152;&#38145;&#24773;&#20917;&#21644;&#26356;&#26032;&#24102;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;
   <code>
    UPDATE
   </code>
   &#35821;&#21477;&#19968;&#33268;&#65292;&#23601;&#19981;&#30011;&#22270;&#20102;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#31561;&#20540;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<p>
 &#30001;&#20110;
 <code>
  hero
 </code>
 &#34920;&#24182;&#27809;&#26377;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#65292;&#25105;&#20204;&#25226;&#21407;&#20808;&#30340;
 <code>
  idx_name
 </code>
 &#20462;&#25913;&#20026;&#19968;&#20010;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#65306;
</p>
<pre><code>ALTER TABLE hero DROP INDEX idx_name, ADD UNIQUE KEY uk_name (name);
</code></pre>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#30001;&#20110;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#20855;&#26377;&#21807;&#19968;&#24615;&#65292;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;&#19979;&#27425;&#20877;&#25191;&#34892;&#36825;&#20010;&#26597;&#35810;&#35821;&#21477;&#30340;&#26102;&#20505;&#32943;&#23450;&#19981;&#20250;&#26377;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;&#22810;&#26465;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    c&#26361;&#25805;
   </code>
   &#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#36825;&#31181;&#24773;&#20917;&#19979;&#21644;
   <code>
    READ UNCOMMITTED&#65295;READ COMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#19968;&#26679;&#65292;&#25105;&#20204;&#21482;&#38656;&#35201;&#20026;&#36825;&#26465;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'c&#26361;&#25805;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19968;&#20010;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#28982;&#21518;&#20877;&#20026;&#23427;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19968;&#20010;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#23601;&#22909;&#20102;&#65292;&#20854;&#23454;&#21644;
   <code>
    READ UNCOMMITTED/READ COMMITTED
   </code>
   &#38548;&#31163;&#32423;&#21035;&#19979;&#21152;&#38145;&#26041;&#24335;&#26159;&#19968;&#26679;&#30340;&#65292;&#25105;&#20204;&#30011;&#20010;&#22270;&#30475;&#30475;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4d025dd4-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#27880;&#24847;&#65292;&#26159;&#20808;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#20877;&#23545;&#32858;&#31751;&#32034;&#24341;&#21152;&#38145;&#12290;
  </p>
  <p>
   &#22914;&#26524;&#23545;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#31561;&#20540;&#26597;&#35810;&#30340;&#20540;&#24182;&#19981;&#23384;&#22312;&#65292;&#27604;&#22914;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'g&#20851;&#32701;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#22312;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;
   <code>
    uk_name
   </code>
   &#20013;&#65292;&#38190;&#20540;&#27604;
   <code>
    'g&#20851;&#32701;'
   </code>
   &#22823;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#30340;&#38190;&#20540;&#20026;
   <code>
    l&#21016;&#22791;
   </code>
   &#65292;&#25152;&#20197;&#38656;&#35201;&#22312;&#36825;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#19978;&#21152;&#19968;&#20010;
   <code>
    gap&#38145;
   </code>
   &#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4d0dc73c-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#27880;&#24847;&#65292;&#36825;&#37324;&#21482;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#24182;&#19981;&#20250;&#23545;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26102;&#65292;&#27604;&#22914;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name = 'c&#26361;&#25805;' FOR UPDATE;
</code></pre>
  <p>
   &#36825;&#31181;&#24773;&#20917;&#19979;&#19982;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#35821;&#21477;&#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#37117;&#26159;&#32473;&#35775;&#38382;&#21040;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21644;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#32610;&#20102;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <p>
   &#19982;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#19981;&#36807;&#22914;&#26524;&#34987;&#26356;&#26032;&#30340;&#21015;&#20013;&#36824;&#26377;&#21035;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;&#35805;&#65292;&#36825;&#20123;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#20063;&#20250;&#34987;&#21152;&#38145;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <p>
   &#19982;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#30340;&#21152;&#38145;&#24773;&#20917;&#31867;&#20284;&#65292;&#19981;&#36807;&#22914;&#26524;&#34920;&#20013;&#36824;&#26377;&#21035;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;&#35805;&#65292;&#36825;&#20123;&#23545;&#24212;&#30340;&#20108;&#32423;&#32034;&#24341;&#21015;&#20063;&#20250;&#34987;&#21152;&#38145;&#12290;
  </p>
 </li>
</ul>
<h5>
 &#23545;&#20110;&#20351;&#29992;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#36827;&#34892;&#33539;&#22260;&#26597;&#35810;&#30340;&#24773;&#20917;
</h5>
<ul>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... LOCK IN SHARE MODE
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <pre><code>SELECT * FROM hero FORCE INDEX(idx_name) WHERE name &gt;= 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#30340;&#25191;&#34892;&#36807;&#31243;&#20854;&#23454;&#26159;&#20808;&#21040;&#20108;&#32423;&#32034;&#24341;&#20013;&#23450;&#20301;&#21040;&#28385;&#36275;
   <code>
    name &gt;= 'c&#26361;&#25805;'
   </code>
   &#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    c&#26361;&#25805;
   </code>
   &#30340;&#35760;&#24405;&#65292;&#28982;&#21518;&#23601;&#21487;&#20197;&#27839;&#30528;&#36825;&#26465;&#35760;&#24405;&#30340;&#38142;&#34920;&#19968;&#36335;&#21521;&#21518;&#25214;&#65292;&#20174;&#20108;&#32423;&#32034;&#24341;
   <code>
    idx_name
   </code>
   &#30340;&#31034;&#24847;&#22270;&#20013;&#21487;&#20197;&#30475;&#20986;&#65292;&#25152;&#26377;&#30340;&#29992;&#25143;&#35760;&#24405;&#37117;&#28385;&#36275;
   <code>
    name &gt;= 'c&#26361;&#25805;'
   </code>
   &#30340;&#36825;&#20010;&#26465;&#20214;&#65292;&#25152;&#20197;&#25152;&#26377;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#37117;&#20250;&#34987;&#21152;
   <code>
    S&#22411;next-key&#38145;
   </code>
   &#65292;&#23427;&#20204;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#20063;&#20250;&#34987;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#20108;&#32423;&#32034;&#24341;&#30340;&#26368;&#21518;&#19968;&#26465;
   <code>
    Supremum
   </code>
   &#35760;&#24405;&#20063;&#20250;&#34987;&#21152;
   <code>
    S&#22411;next-key&#38145;
   </code>
   &#12290;&#19981;&#36807;&#38656;&#35201;&#27880;&#24847;&#19968;&#19979;&#21152;&#38145;&#39034;&#24207;&#65292;&#23545;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#23436;&#21518;&#65292;&#20250;&#25509;&#30528;&#23545;&#23427;&#21709;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#38145;&#65292;&#23436;&#21518;&#25165;&#20250;&#23545;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#20197;&#27492;&#31867;&#25512;&#65374; &#30011;&#20010;&#22270;&#34920;&#31034;&#19968;&#19979;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
   <img alt="" src="EPUB/4d1bea9c-13d6-11ed-838d-acde48001122">
  </p>
  <p>
   &#20877;&#26469;&#30475;&#19979;&#36793;&#36825;&#20010;&#35821;&#21477;&#65306;
  </p>
  <pre><code>SELECT * FROM hero WHERE name &lt;= 'c&#26361;&#25805;' LOCK IN SHARE MODE;
</code></pre>
  <p>
   &#36825;&#20010;&#35821;&#21477;&#20808;&#20250;&#20026;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'c&#26361;&#25805;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    S&#22411;next-key&#38145;
   </code>
   &#20197;&#21450;&#23427;&#23545;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    S&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#12290;&#28982;&#21518;&#36824;&#35201;&#32473;
   <code>
    name
   </code>
   &#20540;&#20026;
   <code>
    'l&#21016;&#22791;'
   </code>
   &#30340;&#20108;&#32423;&#32034;&#24341;&#21152;
   <code>
    S&#22411;next-key&#38145;
   </code>
   &#65292;
   <code>
    server&#23618;
   </code>
   &#21028;&#26029;
  </p>
  <p>
   &#21069;&#36793;&#22312;&#35828;&#20026;
   <code>
    number &lt;= 8
   </code>
   &#36825;&#20010;&#26465;&#20214;&#36827;&#34892;&#21152;&#38145;&#26102;&#65292;&#20250;&#25226;
   <code>
    number
   </code>
   &#20540;&#20026;
   <code>
    15
   </code>
   &#30340;&#35760;&#24405;&#20063;&#21152;&#19968;&#20010;&#38145;&#65292;&#20043;&#21518;
   <code>
    server&#23618;
   </code>
   &#21028;&#26029;&#19981;&#31526;&#21512;&#26465;&#20214;&#21518;&#20877;&#37322;&#25918;&#25481;&#65292;&#29616;&#22312;&#25442;&#25104;&#20108;&#32423;&#32034;&#24341;&#23601;&#19981;&#29992;&#20026;&#19979;&#19968;&#26465;&#35760;&#24405;&#21152;&#38145;&#20102;&#20040;&#65311;&#26159;&#30340;&#65292;&#36825;&#20027;&#35201;&#26159;&#22240;&#20026;&#25105;&#20204;&#24320;&#21551;&#20102;
   <code>
    &#32034;&#24341;&#26465;&#20214;&#19979;&#25512;
   </code>
   &#65292;&#23545;&#20110;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#26469;&#35828;&#65292;&#21487;&#20197;&#20808;&#22312;&#23384;&#20648;&#24341;&#25806;&#23618;&#21028;&#26029;&#32473;&#23450;&#26465;&#20214;
   <code>
    name &lt;= 'c&#26361;&#25805;'
   </code>
   &#26159;&#21542;&#25104;&#31435;&#65292;&#22914;&#26524;&#19981;&#25104;&#31435;&#23601;&#19981;&#36820;&#22238;&#32473;
   <code>
    server&#23618;
   </code>
   &#20102;&#65292;&#20174;&#32780;&#36991;&#20813;&#20102;&#19981;&#24517;&#35201;&#30340;&#21152;&#38145;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#26102;&#65306;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR LOCK IN SHARE MODE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#21152;&#30340;&#26159;
   <code>
    X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    UPDATE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#22914;&#26524;&#34987;&#26356;&#26032;&#30340;&#21015;&#20013;&#26377;&#20108;&#32423;&#32034;&#24341;&#21015;&#30340;&#35805;&#65292;&#20250;&#25226;&#34987;&#26356;&#26032;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20063;&#28155;&#21152;X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;
   <code>
    DELETE ...
   </code>
   &#26469;&#20026;&#35760;&#24405;&#21152;&#38145;&#65292;&#27604;&#26041;&#35828;&#65306;
  </p>
  <p>
   &#21644;
   <code>
    SELECT ... FOR UPDATE
   </code>
   &#35821;&#21477;&#31867;&#20284;&#65292;&#21482;&#19981;&#36807;&#25152;&#26377;&#34987;&#21024;&#38500;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#37117;&#20250;&#34987;&#28155;&#21152;X&#22411;&#27491;&#32463;&#35760;&#24405;&#38145;&#12290;
  </p>
 </li>
</ul>
</div>

</div>
</div>

        </body>
        
        