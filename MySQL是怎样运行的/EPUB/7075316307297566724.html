
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#19987;&#39064;&#24335;&#35762;&#35299; &#8212;&#8212; binlog&#37027;&#20123;&#20107;&#20799;&#65288;&#19968;&#65289;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1>
 binlog&#37027;&#20123;&#20107;&#20799;&#65288;&#19968;&#65289;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<hr>
<p>
 &#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#26377;&#21516;&#23398;&#30041;&#35328;&#35828;&#24819;&#35753;&#23567;&#23401;&#23376;&#20889;&#20889;MySQL&#30340;&#20004;&#38454;&#27573;&#25552;&#20132;&#12290;
</p>
<p>
 &#21160;&#25163;&#20889;&#30340;&#26102;&#20505;&#24819;&#21040;&#65306;&#26159;&#19981;&#26159;&#24456;&#22810;&#21516;&#23398;&#36830;XA&#20107;&#21153;&#26159;&#20160;&#20040;&#20063;&#19981;&#28165;&#26970;&#65292;&#29978;&#33267;&#24456;&#22810;&#21516;&#23398;&#36830;binlog&#26159;&#20160;&#20040;&#20063;&#19981;&#28165;&#26970;&#65374;
</p>
<p>
 &#22909;&#21543;&#65292;&#36825;&#31687;&#25991;&#31456;&#20808;&#26469;&#21792;&#21480;&#19968;&#19979;MySQL&#20013;&#30340;binlog&#21040;&#24213;&#26159;&#20160;&#20040;&#12290;
</p>
<h2>
 binlog&#30340;&#20316;&#29992;
</h2>
<p>
 <code>
  binlog
 </code>
 &#26159;
 <code>
  binary log
 </code>
 &#30340;&#32553;&#20889;&#65292;&#21363;
 <code>
  &#20108;&#36827;&#21046;&#26085;&#24535;
 </code>
 &#12290;
 <code>
  binlog
 </code>
 &#20013;&#35760;&#36733;&#20102;&#25968;&#25454;&#24211;&#21457;&#29983;&#30340;&#21464;&#21270;&#65292;&#27604;&#26041;&#35828;&#26032;&#24314;&#20102;&#19968;&#20010;&#25968;&#25454;&#24211;&#25110;&#32773;&#34920;&#12289;&#34920;&#32467;&#26500;&#21457;&#29983;&#25913;&#21464;&#12289;&#34920;&#20013;&#30340;&#25968;&#25454;&#21457;&#29983;&#20102;&#21464;&#21270;&#26102;&#37117;&#20250;&#35760;&#24405;&#30456;&#24212;&#30340;binlog&#26085;&#24535;&#12290;
</p>
<p>
 <code>
  binlog
 </code>
 &#20027;&#35201;&#29992;&#22312;&#19979;&#36793;&#20004;&#20010;&#26041;&#38754;&#65306;
</p>
<ul>
 <li>
  &#29992;&#36884;&#19968;&#65306; &#29992;&#20110;&#22797;&#21046;&#12290;
 </li>
</ul>
<p>
 &#29616;&#22312;&#20154;&#20204;&#24352;&#21475;&#38381;&#21475;&#23601;&#26159;
 <strong>
  &#20159;&#32423;&#24182;&#21457;
 </strong>
 &#65292;&#34429;&#28982;&#26159;&#22840;&#24352;&#65292;&#20294;
 <strong>
  &#21333;&#21488;&#29289;&#29702;&#26426;&#22120;&#25152;&#33021;&#21516;&#26102;&#22788;&#29702;&#30340;&#35831;&#27714;&#26159;&#26377;&#38480;&#30340;
 </strong>
 &#21364;&#26159;&#19968;&#20010;&#20107;&#23454;&#12290;&#20026;&#20102;&#25552;&#39640;&#24182;&#21457;&#22788;&#29702;&#35831;&#27714;&#30340;&#33021;&#21147;&#65292;&#19968;&#33324;&#23558;MySQL&#26381;&#21153;&#37096;&#32626;&#22312;&#22810;&#21488;&#29289;&#29702;&#26426;&#22120;&#20013;&#65292;&#36825;&#20123;&#26381;&#21153;&#22120;&#20013;&#32500;&#25252;&#30456;&#21516;&#30340;&#25968;&#25454;&#21103;&#26412;&#12290;
</p>
<p>
 &#20854;&#20013;&#19968;&#20010;&#20856;&#22411;&#30340;&#37096;&#32626;&#26041;&#26696;&#23601;&#26159;
 <code>
  &#19968;&#20027;&#22810;&#20174;
 </code>
 &#65292;&#21363;&#19968;&#21488;&#20027;&#26381;&#21153;&#22120;&#65288;Master&#65289;&#21644;&#22810;&#21488;&#20174;&#26381;&#21153;&#22120;&#65288;Slave&#65289;&#12290;&#23545;&#20110;&#25913;&#21464;&#25968;&#25454;&#24211;&#29366;&#24577;&#30340;&#35831;&#27714;&#65288;DDL&#12289;DML&#31561;&#65289;&#65292;&#23601;&#23558;&#23427;&#20204;&#21457;&#36865;&#32473;&#20027;&#26381;&#21153;&#22120;&#65292;&#23545;&#20110;&#21333;&#32431;&#30340;&#26597;&#35810;&#65288;&#22914;SELECT&#35821;&#21477;&#65289;&#35831;&#27714;&#65292;&#23601;&#23558;&#23427;&#20204;&#21457;&#36865;&#32473;&#20174;&#26381;&#21153;&#22120;&#12290;&#20026;&#20102;&#35753;&#21508;&#20010;&#20174;&#26381;&#21153;&#22120;&#20013;&#23384;&#20648;&#30340;&#25968;&#25454;&#21644;&#20027;&#26381;&#21153;&#22120;&#20013;&#23384;&#20648;&#30340;&#25968;&#25454;&#19968;&#33268;&#65292;&#27599;&#24403;&#25105;&#20204;&#25913;&#21464;&#20102;&#20027;&#26381;&#21153;&#22120;&#20013;&#30340;&#25968;&#25454;&#21518;&#65292;&#23601;&#38656;&#35201;&#23558;&#25913;&#21464;&#30340;&#20449;&#24687;
 <strong>
  &#21516;&#27493;
 </strong>
 &#32473;&#21508;&#20010;&#20174;&#26381;&#21153;&#22120;&#12290;
 <code>
  binlog
 </code>
 &#26085;&#24535;&#20013;&#27491;&#22909;&#35760;&#24405;&#20102;&#25968;&#25454;&#24211;&#21457;&#29983;&#30340;&#21508;&#31181;&#25913;&#21464;&#30340;&#20449;&#24687;&#65292;&#20174;&#26381;&#21153;&#22120;&#35835;&#21462;&#20027;&#26381;&#21153;&#22120;&#20135;&#29983;&#30340;
 <code>
  binlog
 </code>
 &#26085;&#24535;&#65292;&#28982;&#21518;&#25191;&#34892;&#36825;&#20123;
 <code>
  binlog
 </code>
 &#26085;&#24535;&#20013;&#25152;&#35760;&#24405;&#30340;&#25968;&#25454;&#24211;&#21464;&#21270;&#35821;&#21477;&#65292;&#20174;&#32780;&#36798;&#21040;&#20027;&#20174;&#26381;&#21153;&#22120;&#25968;&#25454;&#19968;&#33268;&#30340;&#25928;&#26524;&#12290;
</p>
<ul>
 <li>
  <p>
   &#29992;&#36884;&#20108;&#65306; &#29992;&#20110;&#24674;&#22797;&#12290;
  </p>
  <p>
   &#24037;&#20316;&#20013;&#25105;&#20204;&#21487;&#33021;&#26377;&#24847;&#26080;&#24847;&#30340;&#23601;&#23558;&#25968;&#25454;&#24211;&#37324;&#30340;&#25968;&#25454;&#32473;&#8220;&#27585;&#8221;&#20102;&#65292;&#27604;&#26041;&#35828;&#20889;DELETE&#35821;&#21477;&#19981;&#21152;WHERE&#23376;&#21477;&#65292;&#37027;&#19968;&#25972;&#20010;&#34920;&#30340;&#25968;&#25454;&#37117;&#23601;&#27809;&#20102;&#65281;&#20026;&#20102;&#25968;&#25454;&#30340;&#23433;&#20840;&#24615;&#65292;&#25105;&#20204;&#38656;&#35201;&#23450;&#26102;&#22791;&#20221;&#25968;&#25454;&#24211;&#65288;mysqldump&#21629;&#20196;&#65289;&#65292;&#19981;&#36807;&#36825;&#31181;&#20840;&#37327;&#22791;&#20221;&#25105;&#20204;&#19981;&#21487;&#33021;&#27599;&#31186;&#37117;&#20570;&#19968;&#36941;&#65292;&#32780;&#26159;&#27599;&#22825;&#25110;&#32773;&#27599;&#20010;&#26376;&#20570;&#19968;&#27425;&#20840;&#37327;&#22791;&#20221;&#12290;&#37027;&#22914;&#26524;&#22312;&#20004;&#27425;&#20840;&#37327;&#22791;&#20221;&#20013;&#38388;&#25163;&#36145;&#20889;&#20102;&#19981;&#21152;WHERE&#26465;&#20214;&#30340;DELETE&#35821;&#21477;&#35813;&#24590;&#20040;&#21150;&#21602;&#65311;&#21482;&#33021;&#23558;&#25968;&#25454;&#24211;&#24674;&#22797;&#21040;&#21069;&#19968;&#27425;&#20840;&#37327;&#22791;&#20221;&#26102;&#30340;&#26679;&#23376;&#21527;&#65311;&#36824;&#22909;&#25105;&#20204;&#26377;
   <code>
    binlog
   </code>
   &#26085;&#24535;&#65292;&#25105;&#20204;&#21487;&#20197;&#20174;&#19978;&#19968;&#27425;&#20840;&#37327;&#22791;&#20221;&#24320;&#22987;&#65292;&#25191;&#34892;&#33258;&#25913;&#27425;&#22791;&#20221;&#21518;&#20135;&#29983;&#30340;
   <code>
    binlog
   </code>
   &#26085;&#24535;&#65292;&#30452;&#21040;&#25105;&#20204;&#20889;DELETE&#35821;&#21477;&#20043;&#21069;&#30340;binlog&#26085;&#24535;&#20026;&#27490;&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;&#23436;&#25104;&#25968;&#25454;&#24211;&#24674;&#22797;&#30340;&#21151;&#33021;&#12290;
  </p>
 </li>
</ul>
<h2>
 &#24590;&#20040;&#37197;&#32622;binlog
</h2>
<p>
 MySQL&#26381;&#21153;&#22120;&#24182;&#19981;&#19968;&#23450;&#20250;&#29983;&#25104;
 <code>
  binlog
 </code>
 &#26085;&#24535;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#26597;&#30475;
 <code>
  log_bin
 </code>
 &#31995;&#32479;&#21464;&#37327;&#26469;&#21028;&#26029;&#24403;&#21069;MySQL&#26381;&#21153;&#22120;&#26159;&#21542;&#29983;&#25104;
 <code>
  binlog
 </code>
 &#26085;&#24535;&#65306;
</p>
<pre><code>mysql&gt; show variables like 'log_bin';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| log_bin       | ON    |
+---------------+-------+
1 row in set, 1 warning (0.02 sec)
</code></pre>
<p>
 &#19978;&#20363;&#20013;
 <code>
  bin_log
 </code>
 &#31995;&#32479;&#21464;&#37327;&#30340;&#20540;&#20026;
 <code>
  ON
 </code>
 &#65292;&#34920;&#26126;&#24403;&#21069;&#26381;&#21153;&#22120;&#29983;&#25104;
 <code>
  binlog
 </code>
 &#65292;&#33509;&#20026;
 <code>
  OFF
 </code>
 &#34920;&#26126;&#24403;&#21069;&#26381;&#21153;&#22120;&#19981;&#29983;&#25104;
 <code>
  binlog
 </code>
 &#12290;
</p>
<p>
 &#22914;&#26524;&#24403;&#21069;&#26381;&#21153;&#22120;&#19981;&#29983;&#25104;
 <code>
  binlog
 </code>
 &#65292;&#25105;&#20204;&#24819;&#24320;&#21551;
 <code>
  binlog
 </code>
 &#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#37325;&#21551;&#26381;&#21153;&#22120;&#65292;&#35774;&#32622;
 <code>
  log-bin
 </code>
 &#21551;&#21160;&#36873;&#39033;&#65306;
</p>
<pre><code>--log-bin[=base_name] 
</code></pre>
<p>
 <code>
  binlog
 </code>
 &#26085;&#24535;&#24182;&#19981;&#26159;&#20165;&#20889;&#21040;&#19968;&#20010;&#25991;&#20214;&#20013;&#65292;&#32780;&#26159;&#20889;&#20837;&#19968;&#32452;&#25991;&#20214;&#20013;&#65292;&#36825;&#32452;&#25991;&#20214;&#30340;&#21629;&#21517;&#26159;&#36825;&#26679;&#30340;&#65306;
</p>
<pre><code>basename.000001
basename.000002
basename.000003
basename.000004
...
</code></pre>
<p>
 &#20063;&#23601;&#26159;&#36825;&#32452;&#26085;&#24535;&#25991;&#20214;&#21517;&#31216;&#37117;&#21253;&#21547;&#19968;&#20010;basename&#65292;&#28982;&#21518;&#20197;&#19968;&#20010;&#25968;&#23383;&#32467;&#23614;&#12290;
</p>
<p>
 &#21551;&#21160;&#36873;&#39033;
 <code>
  log-bin[=base_name]
 </code>
 &#20013;&#30340;
 <code>
  base_name
 </code>
 &#23601;&#26159;&#36825;&#32452;binlog&#26085;&#24535;&#25991;&#20214;&#21517;&#31216;&#37117;&#21253;&#21547;&#30340;&#37096;&#20998;&#12290;&#22914;&#26524;&#25105;&#20204;&#19981;&#25351;&#23450;
 <code>
  base_name
 </code>
 &#65288;&#21363;&#21333;&#32431;&#30340;&#20351;&#29992;--log-bin&#65289;&#65292;&#37027;MySQL&#26381;&#21153;&#22120;&#20250;&#40664;&#35748;&#23558;
 <code>
  &#20027;&#26426;&#21517;-bin
 </code>
 &#20316;&#20026;binlog&#26085;&#24535;&#25991;&#20214;&#30340;basename&#12290;
</p>
<p>
 &#25105;&#20204;&#30475;&#19968;&#19979;&#20363;&#23376;&#12290;
</p>
<p>
 &#22914;&#26524;&#21551;&#21160;&#26381;&#21153;&#22120;&#30340;&#21629;&#20196;&#26159;&#65306;
</p>
<pre><code>mysqld --log-bin
</code></pre>
<p>
 &#34920;&#31034;&#24320;&#21551;binlog&#65292;&#24182;&#23558;binlog&#20889;&#20837;
 <strong>
  MySQL&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#30446;&#24405;
 </strong>
 &#19979;&#12290;&#25105;&#30340;&#20027;&#26426;&#21517;&#26159;
 <code>
  xiaohaizi
 </code>
 &#65292;&#37027;MySQL&#26381;&#21153;&#22120;&#31243;&#24207;&#29983;&#25104;&#30340;binlog&#26085;&#24535;&#25991;&#20214;&#21517;&#23601;&#20687;&#26159;&#36825;&#26679;&#65306;
</p>
<pre><code>xiaohaizi-bin.000001
xiaohaizi-bin.000002
xiaohaizi-bin.000003
xiaohaizi-bin.000004
...
</code></pre>
<p>
 &#22914;&#26524;&#21551;&#21160;&#21629;&#20196;&#26159;&#65306;
</p>
<pre><code>mysqld --log-bin=xx
</code></pre>
<p>
 &#34920;&#31034;&#24320;&#21551;binlog&#65292;&#24182;&#23558;binlog&#20889;&#20837;
 <strong>
  MySQL&#26381;&#21153;&#22120;&#30340;&#25968;&#25454;&#30446;&#24405;
 </strong>
 &#19979;&#65292;binlog&#26085;&#24535;&#25991;&#20214;&#21517;&#23601;&#20687;&#26159;&#36825;&#26679;&#65306;
</p>
<pre><code>xx.000001
xx.000002
xx.000003
xx.000004
...
</code></pre>
<p>
 &#25105;&#20204;&#21487;&#20197;&#22312;&#23558;&#21551;&#21160;&#36873;&#39033;
 <code>
  log-bin[=base_name]
 </code>
 &#30340;
 <code>
  base_name
 </code>
 &#25351;&#23450;&#20026;&#19968;&#20010;&#32477;&#23545;&#36335;&#24452;&#65292;&#37027;&#20040;binlog&#26085;&#24535;&#23601;&#19981;&#20250;&#34987;&#25918;&#21040;&#40664;&#35748;&#30340;&#25968;&#25454;&#30446;&#24405;&#20013;&#65292;&#32780;&#26159;&#20889;&#21040;&#25105;&#20204;&#25351;&#23450;&#30340;&#32477;&#23545;&#36335;&#24452;&#19979;&#20102;&#12290;&#27604;&#26041;&#35828;&#21551;&#21160;&#21629;&#20196;&#26159;&#65306;
</p>
<pre><code>mysqld --log-bin=/Users/xiaohaizi/xx
</code></pre>
<p>
 &#36825;&#26679;binlog&#26085;&#24535;&#23601;&#20250;&#34987;&#20889;&#20837;**/Users/xiaohaizi/**&#36335;&#24452;&#19979;&#65292;binlog&#26085;&#24535;&#25991;&#20214;&#21517;&#23601;&#20687;&#26159;&#36825;&#26679;&#65306;
</p>
<pre><code>xx.000001
xx.000002
xx.000003
xx.000004
...
</code></pre>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  log-bin&#21551;&#21160;&#36873;&#39033;&#20063;&#21487;&#20197;&#25918;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;
 </p>
</blockquote>
<h2>
 binlog&#22312;&#25991;&#20214;&#31995;&#32479;&#20013;&#30340;&#20869;&#23481;
</h2>
<p>
 &#25105;&#20204;&#21018;&#24378;&#35843;&#65292;binlog&#26085;&#24535;&#19981;&#26159;&#21333;&#20010;&#25991;&#20214;&#65292;&#32780;&#26159;&#19968;&#32452;&#21253;&#21547;&#20849;&#21516;basename&#30340;&#25991;&#20214;&#12290;&#27604;&#26041;&#35828;&#29616;&#22312;&#25105;&#30340;&#26426;&#22120;&#19978;&#26377;&#20197;&#19979;4&#20010;binlog&#25991;&#20214;&#65306;
</p>
<pre><code>xiaohaizi-bin.000001
xiaohaizi-bin.000002
xiaohaizi-bin.000003
xiaohaizi-bin.000004
</code></pre>
<p>
 &#36825;&#20123;binlog&#25991;&#20214;&#24182;&#19981;&#33021;&#30452;&#25509;&#34987;&#24403;&#20316;&#25991;&#26412;&#25171;&#24320;&#65292;&#27605;&#31455;&#20154;&#23478;&#30340;&#21517;&#23383;&#26159;binlog&#65292;&#23384;&#20648;&#30340;&#26159;&#20108;&#36827;&#21046;&#25968;&#25454;&#12290;
</p>
<p>
 &#38500;&#20102;&#30495;&#27491;&#23384;&#20648;binlog&#26085;&#24535;&#30340;&#25991;&#20214;&#22806;&#65292;MySQL&#26381;&#21153;&#22120;&#36824;&#20250;&#22312;&#30456;&#21516;&#30340;&#36335;&#24452;&#19979;&#29983;&#25104;&#19968;&#20010;&#20851;&#20110;binlog&#30340;&#32034;&#24341;&#25991;&#20214;&#65292;&#22312;&#25105;&#30340;&#31995;&#32479;&#19978;&#23427;&#30340;&#21517;&#31216;&#23601;&#26159;&#65306;
</p>
<pre><code>xiaohaizi-bin.index
</code></pre>
<p>
 &#36825;&#20010;&#32034;&#24341;&#25991;&#20214;&#26159;&#19968;&#20010;&#25991;&#26412;&#25991;&#20214;&#65292;&#25105;&#20204;&#21487;&#20197;&#30452;&#25509;&#25171;&#24320;&#65306;
</p>
<pre><code>shell&gt; cat xiaohaizi-bin.index
./xiaohaizi-bin.000001
./xiaohaizi-bin.000002
./xiaohaizi-bin.000003
./xiaohaizi-bin.000004
</code></pre>
<p>
 &#21487;&#20197;&#30475;&#21040;&#65292;&#36825;&#20010;&#32034;&#24341;&#25991;&#20214;&#21482;&#26159;&#31616;&#21333;&#30340;&#23558;&#21508;&#20010;binlog&#25991;&#20214;&#30340;&#36335;&#24452;&#23384;&#20648;&#20102;&#36215;&#26469;&#32780;&#24050;&#12290;
</p>
<h2>
 &#26597;&#30475;binlog&#30340;&#35821;&#21477;
</h2>
<p>
 binlog&#20013;&#35760;&#24405;&#25968;&#25454;&#24211;&#21457;&#29983;&#26356;&#25913;&#30340;&#21508;&#31181;&#20107;&#20214;&#65288;events&#65289;&#65292;&#36825;&#20123;&#20107;&#20214;&#30340;&#31181;&#31867;&#38750;&#24120;&#22810;&#65292;&#23436;&#25972;&#30340;&#20107;&#20214;&#31867;&#22411;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<pre><code>enum Log_event_type { 
  UNKNOWN_EVENT= 0, 
  START_EVENT_V3= 1, 
  QUERY_EVENT= 2, 
  STOP_EVENT= 3, 
  ROTATE_EVENT= 4, 
  INTVAR_EVENT= 5, 
  LOAD_EVENT= 6, 
  SLAVE_EVENT= 7, 
  CREATE_FILE_EVENT= 8, 
  APPEND_BLOCK_EVENT= 9, 
  EXEC_LOAD_EVENT= 10, 
  DELETE_FILE_EVENT= 11, 
  NEW_LOAD_EVENT= 12, 
  RAND_EVENT= 13, 
  USER_VAR_EVENT= 14, 
  FORMAT_DESCRIPTION_EVENT= 15, 
  XID_EVENT= 16, 
  BEGIN_LOAD_QUERY_EVENT= 17, 
  EXECUTE_LOAD_QUERY_EVENT= 18, 
  TABLE_MAP_EVENT = 19, 
  PRE_GA_WRITE_ROWS_EVENT = 20, 
  PRE_GA_UPDATE_ROWS_EVENT = 21, 
  PRE_GA_DELETE_ROWS_EVENT = 22, 
  WRITE_ROWS_EVENT = 23, 
  UPDATE_ROWS_EVENT = 24, 
  DELETE_ROWS_EVENT = 25, 
  INCIDENT_EVENT= 26, 
  HEARTBEAT_LOG_EVENT= 27, 
  IGNORABLE_LOG_EVENT= 28,
  ROWS_QUERY_LOG_EVENT= 29,
  WRITE_ROWS_EVENT = 30,
  UPDATE_ROWS_EVENT = 31,
  DELETE_ROWS_EVENT = 32,
  GTID_LOG_EVENT= 33,
  ANONYMOUS_GTID_LOG_EVENT= 34,
  PREVIOUS_GTIDS_LOG_EVENT= 35, 
  ENUM_END_EVENT 
  /* end marker */ 
};
</code></pre>
<p>
 &#20854;&#20013;&#30340;&#19968;&#20123;&#25105;&#20204;&#29087;&#24713;&#30340;&#20107;&#20214;&#65306;
</p>
<ul>
 <li>
  <p>
   WRITE_ROWS_EVENT&#65306;&#25554;&#20837;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   UPDATE_ROWS_EVENT&#65306;&#26356;&#26032;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   DELETE_ROWS_EVENT&#65306;&#21024;&#38500;&#35760;&#24405;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20687;&#21019;&#24314;&#12289;&#20462;&#25913;&#25968;&#25454;&#24211;&#25110;&#32773;&#34920;&#32467;&#26500;&#36825;&#20123;&#35821;&#21477;&#20063;&#37117;&#21487;&#20197;&#25214;&#21040;&#23545;&#24212;&#31867;&#22411;&#30340;
 <code>
  &#20107;&#20214;
 </code>
 &#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#19981;&#19968;&#19968;&#23637;&#24320;&#20102;&#12290;
</p>
<p>
 &#20026;&#20102;&#26597;&#30475;&#25105;&#20204;&#30340;binlog&#20013;&#21253;&#21547;&#20102;&#21738;&#20123;
 <code>
  &#20107;&#20214;
 </code>
 &#65292;&#21487;&#20197;&#20351;&#29992;&#19979;&#36793;&#36825;&#20010;&#35821;&#21477;&#65288;&#24102;&#20013;&#25324;&#21495;
 <code>
  []
 </code>
 &#30340;&#34920;&#31034;&#21487;&#20197;&#30465;&#30053;&#30340;&#35821;&#21477;&#65289;&#65306;
</p>
<pre><code>SHOW BINLOG EVENTS
   [IN 'log_name']
   [FROM pos]
   [LIMIT [offset,] row_count]
</code></pre>
<p>
 &#20854;&#20013;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    [IN 'log_name']
   </code>
   &#65306;
   <code>
    log_name
   </code>
   &#34920;&#31034;&#25105;&#20204;&#35201;&#26597;&#30475;&#21738;&#20010;
   <code>
    binlog
   </code>
   &#26085;&#24535;&#25991;&#20214;&#30340;&#20869;&#23481;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    [FROM pos]
   </code>
   &#65306;
   <code>
    pos
   </code>
   &#34920;&#31034;&#25105;&#20204;&#35201;&#26597;&#30475;binlog&#25991;&#20214;&#30340;&#36215;&#22987;&#20559;&#31227;&#37327;&#65288;&#36890;&#36807;&#25351;&#23450;&#36825;&#20010;&#20540;&#21487;&#20197;&#30452;&#25509;&#21435;&#26597;&#30475;&#26576;&#20010;&#20559;&#31227;&#37327;&#22788;&#30340;&#20107;&#20214;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    LIMIT [offset,] row_count
   </code>
   &#65306;&#36825;&#20010;LIMIT&#23376;&#21477;&#30340;&#21547;&#20041;&#21644;&#25105;&#20204;&#20889;SQL&#35821;&#21477;&#20013;LIMIT&#23376;&#21477;&#30340;&#21547;&#20041;&#26159;&#19968;&#26679;&#30340;&#65292;
   <code>
    offset
   </code>
   &#34920;&#31034;&#25105;&#20204;&#35201;&#20174;&#21738;&#20010;&#20107;&#20214;&#24320;&#22987;&#26597;&#30475;&#65292;
   <code>
    row_count
   </code>
   &#34920;&#31034;&#25105;&#20204;&#35201;&#26597;&#30475;&#22810;&#23569;&#20010;&#20107;&#20214;&#12290;
  </p>
 </li>
</ul>
<p>
 &#19979;&#36793;&#35813;&#20570;&#19968;&#19979;&#27979;&#35797;&#20102;&#12290;
</p>
<p>
 &#22914;&#26524;&#25105;&#20204;&#30452;&#25509;&#25191;&#34892;
 <code>
  SHOW BINLOG EVENTS
 </code>
 &#65292;&#34920;&#31034;&#26597;&#30475;&#31532;1&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#30340;&#20869;&#23481;&#65292;&#22312;&#25105;&#30340;&#26426;&#22120;&#19978;&#23601;&#26159;
 <code>
  xiaohaizi-bin.000001
 </code>
 &#36825;&#20010;&#25991;&#20214;&#30340;&#20869;&#23481;&#65306;
</p>
<pre><code>mysql&gt; SHOW BINLOG EVENTS;
+----------------------+-----+----------------+-----------+-------------+---------------------------------------+
| Log_name             | Pos | Event_type     | Server_id | End_log_pos | Info                                  |
+----------------------+-----+----------------+-----------+-------------+---------------------------------------+
| xiaohaizi-bin.000001 |   4 | Format_desc    |         3 |         123 | Server ver: 5.7.21-log, Binlog ver: 4 |
| xiaohaizi-bin.000001 | 123 | Previous_gtids |         3 |         154 |                                       |
| xiaohaizi-bin.000001 | 154 | Anonymous_Gtid |         3 |         219 | SET @@SESSION.GTID_NEXT= 'ANONYMOUS'  |
| xiaohaizi-bin.000001 | 219 | Query          |         3 |         296 | BEGIN                                 |
| xiaohaizi-bin.000001 | 296 | Table_map      |         3 |         367 | table_id: 138 (xiaohaizi.s1)          |
| xiaohaizi-bin.000001 | 367 | Update_rows    |         3 |         634 | table_id: 138 flags: STMT_END_F       |
| xiaohaizi-bin.000001 | 634 | Xid            |         3 |         665 | COMMIT /* xid=65 */                   |
| xiaohaizi-bin.000001 | 665 | Stop           |         3 |         688 |                                       |
+----------------------+-----+----------------+-----------+-------------+---------------------------------------+
8 rows in set (0.01 sec)
</code></pre>
<p>
 &#21487;&#20197;&#30475;&#21040;&#20849;&#36755;&#20986;&#20102;8&#20010;&#21015;&#65292;&#20854;&#20013;&#65306;
</p>
<ul>
 <li>
  <code>
   Log_name
  </code>
  &#65306;&#34920;&#31034;binlog&#26085;&#24535;&#30340;&#25991;&#20214;&#21517;&#12290;
 </li>
 <li>
  <code>
   Pos
  </code>
  &#65306;&#34920;&#31034;&#35813;&#20107;&#20214;&#22312;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#30340;&#36215;&#22987;&#20559;&#31227;&#37327;&#12290;
 </li>
 <li>
  <code>
   Event_type
  </code>
  &#65306;&#34920;&#31034;&#36825;&#20010;&#20107;&#20214;&#30340;&#31867;&#22411;&#12290;
 </li>
 <li>
  <code>
   Server_id
  </code>
  &#65306;&#34920;&#31034;&#20135;&#29983;&#35813;&#20107;&#20214;&#30340;server_id&#65288;server_id&#26159;&#19968;&#20010;&#31995;&#32479;&#21464;&#37327;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#35753;&#19981;&#36890;&#30340;MySQL&#26381;&#21153;&#22120;&#25317;&#26377;&#19981;&#36890;&#30340;server_id&#65289;&#12290;
 </li>
 <li>
  <code>
   End_log_pos
  </code>
  &#65306;&#34920;&#31034;&#19979;&#19968;&#20010;&#20107;&#20214;&#30340;&#22312;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#30340;&#36215;&#22987;&#20559;&#31227;&#37327;&#12290;
 </li>
 <li>
  <code>
   Info
  </code>
  &#65306;&#20851;&#20110;&#26412;&#20107;&#20214;&#30340;&#19968;&#20123;&#35828;&#26126;&#12290;
 </li>
</ul>
<p>
 &#22914;&#26524;&#24744;&#23545;MySQL&#20102;&#35299;&#19981;&#22810;&#30340;&#35805;&#65292;&#37027;&#19978;&#36793;&#25191;&#34892;
 <code>
  SHOW BINLOG EVENTS
 </code>
 &#35821;&#21477;&#30340;&#36755;&#20986;&#30340;&#22823;&#37096;&#20998;&#20107;&#20214;&#21487;&#33021;&#37117;&#27604;&#36739;&#25077;&#65292;&#21487;&#33021;&#33021;&#30475;&#25026;&#20004;&#20010;&#20107;&#20214;&#65306;
</p>
<ul>
 <li>
  &#36215;&#22987;&#20559;&#31227;&#37327;&#20026;219&#65288;Pos=219&#65289;&#30340;&#20107;&#20214;&#26159;&#19968;&#20010;&#34920;&#26126;&#24320;&#22987;&#20107;&#21153;&#65288;BEGIN&#65289;&#30340;&#20107;&#20214;&#12290;
 </li>
 <li>
  &#36215;&#22987;&#20559;&#31227;&#37327;&#20026;367&#65288;Pos=367&#65289;&#30340;&#20107;&#20214;&#26159;&#19968;&#20010;&#26356;&#26032;&#35760;&#24405;&#30340;&#20107;&#20214;&#65288;UPDATE&#65289;&#12290;
 </li>
</ul>
<p>
 &#22909;&#20102;&#29616;&#22312;&#20808;&#19981;&#32454;&#31350;&#21508;&#31181;&#31867;&#22411;&#30340;&#20107;&#20214;&#37117;&#20195;&#34920;&#20160;&#20040;&#65292;&#25105;&#20204;&#30446;&#21069;&#21482;&#38656;&#35201;&#30693;&#36947;binlog&#26085;&#24535;&#26159;&#30001;&#33509;&#24178;&#20010;&#20107;&#20214;&#32452;&#25104;&#30340;&#23601;&#22909;&#20102;&#12290;
</p>
<p>
 &#22914;&#26524;&#25105;&#20204;&#24819;&#30475;&#20854;&#20182;binlog&#26085;&#24535;&#30340;&#35814;&#32454;&#24773;&#20917;&#65292;&#37027;&#23601;&#38656;&#35201;&#29992;&#21040;IN&#23376;&#21477;&#20102;&#65306;
</p>
<pre><code>mysql&gt; SHOW BINLOG EVENTS IN 'xiaohaizi-bin.000004';
+----------------------+-----+----------------+-----------+-------------+-------------------------------------------+
| Log_name             | Pos | Event_type     | Server_id | End_log_pos | Info                                      |
+----------------------+-----+----------------+-----------+-------------+-------------------------------------------+
| xiaohaizi-bin.000004 |   4 | Format_desc    |         3 |         123 | Server ver: 5.7.21-log, Binlog ver: 4     |
| xiaohaizi-bin.000004 | 123 | Previous_gtids |         3 |         154 |                                           |
| xiaohaizi-bin.000004 | 154 | Anonymous_Gtid |         3 |         219 | SET @@SESSION.GTID_NEXT= 'ANONYMOUS'      |
| xiaohaizi-bin.000004 | 219 | Query          |         3 |         327 | use `xiaohaizi`; create table tt1 (c int) |
| xiaohaizi-bin.000004 | 327 | Anonymous_Gtid |         3 |         392 | SET @@SESSION.GTID_NEXT= 'ANONYMOUS'      |
| xiaohaizi-bin.000004 | 392 | Query          |         3 |         469 | BEGIN                                     |
| xiaohaizi-bin.000004 | 469 | Table_map      |         3 |         520 | table_id: 167 (xiaohaizi.tt1)             |
| xiaohaizi-bin.000004 | 520 | Write_rows     |         3 |         560 | table_id: 167 flags: STMT_END_F           |
| xiaohaizi-bin.000004 | 560 | Xid            |         3 |         591 | COMMIT /* xid=71 */                       |
| xiaohaizi-bin.000004 | 591 | Anonymous_Gtid |         3 |         656 | SET @@SESSION.GTID_NEXT= 'ANONYMOUS'      |
| xiaohaizi-bin.000004 | 656 | Query          |         3 |         733 | BEGIN                                     |
| xiaohaizi-bin.000004 | 733 | Table_map      |         3 |         784 | table_id: 167 (xiaohaizi.tt1)             |
| xiaohaizi-bin.000004 | 784 | Update_rows    |         3 |         830 | table_id: 167 flags: STMT_END_F           |
| xiaohaizi-bin.000004 | 830 | Xid            |         3 |         861 | COMMIT /* xid=73 */                       |
+----------------------+-----+----------------+-----------+-------------+-------------------------------------------+
14 rows in set (0.00 sec)
</code></pre>
<p>
 &#36825;&#26679;&#25105;&#20204;&#23601;&#30475;&#21040;&#20102;
 <code>
  xiaohaizi-bin.000004
 </code>
 &#36825;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#23384;&#20648;&#20102;&#21738;&#20123;&#20107;&#20214;&#20102;&#12290;
</p>
<p>
 &#22823;&#23478;&#21487;&#20197;&#33258;&#34892;&#27979;&#35797;&#19968;&#19979;FROM&#23376;&#21477;&#21644;LIMIT&#23376;&#21477;&#30340;&#29992;&#27861;&#65292;&#36825;&#37324;&#23601;&#19981;&#23637;&#31034;&#20102;&#12290;
</p>
<h2>
 mysqlbinlog&#24037;&#20855;&#30340;&#20351;&#29992;
</h2>
<p>
 &#30001;&#20110;binlog&#26159;&#20108;&#36827;&#21046;&#26684;&#24335;&#30340;&#65292;&#25105;&#20204;&#19981;&#33021;&#30452;&#25509;&#20197;&#25991;&#26412;&#30340;&#24418;&#24335;&#26597;&#30475;&#12290;&#20351;&#29992;
 <code>
  SHOW BINLOG EVENTS
 </code>
 &#21448;&#21482;&#33021;&#30475;&#21040;&#31895;&#30053;&#30340;&#20449;&#24687;&#65292;&#22914;&#26524;&#25105;&#20204;&#24819;&#26597;&#30475;binlog&#26085;&#24535;&#25991;&#20214;&#30340;&#35814;&#32454;&#20449;&#24687;&#30340;&#35805;&#65292;&#23601;&#38656;&#35201;&#20351;&#29992;MySQL&#32473;&#25105;&#20204;&#25552;&#20379;&#30340;&#23454;&#29992;&#24037;&#20855;&#8212;&#8212;mysqlbinlog&#12290;
</p>
<p>
 &#20687;
 <code>
  mysqld
 </code>
 &#12289;
 <code>
  mysql
 </code>
 &#36825;&#20123;&#21487;&#25191;&#34892;&#25991;&#20214;&#19968;&#26679;&#65292;
 <code>
  mysqlbinlog
 </code>
 &#20063;&#34987;&#25918;&#22312;&#20102;MySQL&#23433;&#35013;&#30446;&#24405;&#19979;&#30340;bin&#30446;&#24405;&#19979;&#12290;
</p>
<p>
 &#25105;&#20204;&#21487;&#20197;&#23558;&#24819;&#26597;&#30475;&#30340;binlog&#26085;&#24535;&#25991;&#20214;&#36335;&#24452;&#20316;&#20026;
 <code>
  mysqlbinlog
 </code>
 &#30340;&#21442;&#25968;&#65292;&#23601;&#33021;&#26597;&#30475;&#25991;&#26412;&#24418;&#24335;&#30340;&#20107;&#20214;&#35814;&#32454;&#20449;&#24687;&#20102;&#12290;&#27604;&#26041;&#35828;&#25105;&#20204;&#30475;&#19968;&#19979;
 <code>
  xiaohaizi-bin.000001
 </code>
 &#65306;
</p>
<pre><code>shell&gt; mysqlbinlog ./xiaohaizi-bin.000001
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=1*/;
/*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
DELIMITER /*!*/;
# at 4
#211202 20:01:14 server id 3  end_log_pos 123 CRC32 0xa308715b 	Start: binlog v 4, server v 5.7.21-log created 211202 20:01:14 at startup
ROLLBACK/*!*/;
BINLOG '
irWoYQ8DAAAAdwAAAHsAAAAAAAQANS43LjIxLWxvZwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
AAAAAAAAAAAAAAAAAACKtahhEzgNAAgAEgAEBAQEEgAAXwAEGggAAAAICAgCAAAACgoKKioAEjQA
AVtxCKM=
'/*!*/;
# at 123
#211202 20:01:14 server id 3  end_log_pos 154 CRC32 0x0d6a1ce6 	Previous-GTIDs
# [empty]
# at 154
#211202 20:07:07 server id 3  end_log_pos 219 CRC32 0xab157b64 	Anonymous_GTID	last_committed=0	sequence_number=1	rbr_only=yes
/*!50718 SET TRANSACTION ISOLATION LEVEL READ COMMITTED*//*!*/;
SET @@SESSION.GTID_NEXT= 'ANONYMOUS'/*!*/;
# at 219
#211202 20:07:07 server id 3  end_log_pos 296 CRC32 0xedb6b609 	Query	thread_id=2	exec_time=0	error_code=0
SET TIMESTAMP=1638446827/*!*/;
SET @@session.pseudo_thread_id=2/*!*/;
SET @@session.foreign_key_checks=1, @@session.sql_auto_is_null=0, @@session.unique_checks=1, @@session.autocommit=1/*!*/;
SET @@session.sql_mode=1436549152/*!*/;
SET @@session.auto_increment_increment=1, @@session.auto_increment_offset=1/*!*/;
/*!\C utf8 *//*!*/;
SET @@session.character_set_client=33,@@session.collation_connection=33,@@session.collation_server=33/*!*/;
SET @@session.lc_time_names=0/*!*/;
SET @@session.collation_database=DEFAULT/*!*/;
BEGIN
/*!*/;
# at 296
#211202 20:07:07 server id 3  end_log_pos 367 CRC32 0x43cd57ee 	Table_map: `xiaohaizi`.`s1` mapped to number 138
# at 367
#211202 20:07:07 server id 3  end_log_pos 634 CRC32 0xe2981d9e 	Update_rows: table id 138 flags: STMT_END_F

BINLOG '
67aoYRMDAAAARwAAAG8BAAAAAIoAAAAAAAEACXhpYW9oYWl6aQACczEACAMPDw8PDw8PDiwBLAEs
ASwBLAEsASwB/u5XzUM=
67aoYR8DAAAACwEAAHoCAAAAAIoAAAAAAAEAAgAI//8ApAMAABgAZmt3YW91b2syY2sxY2RlMzA2
bzZ2NHcxCQAxMzA4NzI2NzgTAHBqdHFxc2dsMngxMjd4MWZjdngBAG0MAHBycmp3bmtxbjV1aRoA
NHN3cWJsNXEzd3V2bzUyZGdscmI1eWlmencJAGxzMjFoNHZhNwCkAwAAGABma3dhb3VvazJjazFj
ZGUzMDZvNnY0dzEJADEzMDg3MjY3OBMAcGp0cXFzZ2wyeDEyN3gxZmN2eAEAbQwAcHJyandua3Fu
NXVpGgA0c3dxYmw1cTN3dXZvNTJkZ2xyYjV5aWZ6dwIAeHieHZji
'/*!*/;
# at 634
#211202 20:07:07 server id 3  end_log_pos 665 CRC32 0xe586ffeb 	Xid = 65
COMMIT/*!*/;
# at 665
#211202 20:07:19 server id 3  end_log_pos 688 CRC32 0x8c69bad2 	Stop
SET @@SESSION.GTID_NEXT= 'AUTOMATIC' /* added by mysqlbinlog */ /*!*/;
DELIMITER ;
# End of log file
/*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/;
/*!50530 SET @@SESSION.PSEUDO_SLAVE_MODE=0*/;
</code></pre>
<p>
 &#21703;&#21780;&#65292;&#22909;&#22823;&#19968;&#29255;&#36755;&#20986;&#65281;
</p>
<p>
 &#20854;&#20013;&#20197;
 <code>
  # at xx
 </code>
 &#24320;&#22836;&#30340;&#34920;&#31034;&#36825;&#26159;&#19968;&#20010;&#20107;&#20214;&#30340;&#24320;&#22987;&#65292;&#35832;&#22914;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    # at 4
   </code>
   &#65306;&#34920;&#31034;&#22312;&#20559;&#31227;&#37327;&#20026;4&#30340;&#22320;&#26041;&#26377;&#19968;&#20010;&#20107;&#20214;&#65292;&#19979;&#36793;&#26159;&#35813;&#20107;&#20214;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    # at 123
   </code>
   &#34920;&#31034;&#22312;&#20559;&#31227;&#37327;&#20026;123&#30340;&#22320;&#26041;&#26377;&#19968;&#20010;&#20107;&#20214;&#65292;&#19979;&#36793;&#26159;&#35813;&#20107;&#20214;&#30340;&#35814;&#32454;&#20449;&#24687;&#12290;
  </p>
 </li>
</ul>
<p>
 ...
</p>
<p>
 &#20855;&#20307;&#30340;&#26684;&#24335;&#25105;&#20204;&#23601;&#20808;&#19981;&#23637;&#24320;&#20102;&#12290;
</p>
<h2>
 binlog&#30340;&#25991;&#20214;&#26684;&#24335;
</h2>
<p>
 &#26412;&#26469;&#25105;&#20204;&#36824;&#24819;&#21792;&#21480;&#19968;&#19979;binlog&#26085;&#24535;&#25991;&#20214;&#26159;&#24590;&#20040;&#35774;&#35745;&#30340;&#65292;&#27599;&#19968;&#20010;&#20107;&#20214;&#26159;&#24590;&#26679;&#34920;&#31034;&#30340;&#12290;&#21487;&#26159;&#22238;&#22836;&#19968;&#30475;&#22909;&#20687;&#24050;&#32463;&#20889;&#20102;&#24456;&#22810;&#20869;&#23481;&#20102;&#65292;&#23567;&#23401;&#23376;&#22826;&#32047;&#20102;&#65292;&#20043;&#21518;&#25277;&#26102;&#38388;&#20877;&#32473;&#22823;&#23478;&#20889;&#21543;...
</p>
<p>
 &#36824;&#26377;MySQL&#30340;&#20027;&#20174;&#22797;&#21046;&#26159;&#24590;&#20040;&#36305;&#36215;&#26469;&#30340;&#65311;XA&#20107;&#21153;&#26159;&#20160;&#20040;&#65311;&#20026;&#21861;&#35201;&#20004;&#38454;&#27573;&#25552;&#20132;&#65311;
</p>
<p>
 &#20877;&#20250;&#65374;
</p>
</div>

</div>
</div>

        </body>
        
        