
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#19987;&#39064;&#24335;&#35762;&#35299; &#8212;&#8212; Innodb&#21040;&#24213;&#26159;&#24590;&#20040;&#21152;&#38145;&#30340;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1>
 Innodb&#21040;&#24213;&#26159;&#24590;&#20040;&#21152;&#38145;&#30340;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<p>
 &#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#32570;&#22833;&#19968;&#28857;&#20799;&#19996;&#35199;&#65292;&#20877;&#34917;&#20840;&#19968;&#19979;&#12290;
</p>
<p>
 <span>
  <i>
   &#23398;&#23436;&#26412;&#25991;&#21518;&#65306;&#22920;&#22920;&#20877;&#20063;&#19981;&#29992;&#25285;&#24515;&#25105;&#19981;&#30693;&#36947;InnoDB&#26159;&#24590;&#20040;&#21152;&#38145;&#30340;&#20102;!
  </i>
 </span>
</p>
<h2>
 &#27969;&#20256;&#36739;&#24191;&#65292;&#20294;&#26159;&#38169;&#35823;&#30340;&#19968;&#20010;&#35266;&#28857;
</h2>
<p>
 &#19981;&#30693;&#36947;&#20174;&#20160;&#20040;&#26102;&#20505;&#24320;&#22987;&#65292;&#19979;&#36793;&#36825;&#20010;
 <strong>
  &#38169;&#35823;&#30340;
 </strong>
 &#35266;&#28857;&#24320;&#22987;&#34987;&#24191;&#27867;&#30340;&#27969;&#20256;&#65306;
</p>
<blockquote>
 <p>
  &#22312;&#20351;&#29992;&#21152;&#38145;&#35835;&#30340;&#26041;&#24335;&#35835;&#21462;&#20351;&#29992;InnoDB&#23384;&#20648;&#24341;&#25806;&#30340;&#34920;&#26102;&#65292;&#24403;&#22312;&#25191;&#34892;&#26597;&#35810;&#26102;&#27809;&#26377;&#20351;&#29992;&#21040;&#32034;&#24341;&#26102;&#65292;&#34892;&#38145;&#20250;&#34987;&#36716;&#25442;&#20026;&#34920;&#38145;&#12290;
 </p>
</blockquote>
<p>
 &#36825;&#37324;&#24378;&#35843;&#19968;&#28857;&#65292;&#23545;&#20110;&#20219;&#20309;
 <code>
  INSERT
 </code>
 &#12289;
 <code>
  DELETE
 </code>
 &#12289;
 <code>
  UPDATE
 </code>
 &#12289;
 <code>
  SELECT ... LOCK IN SHARE MODE
 </code>
 &#12289;
 <code>
  SELECT ... FOR UPDATE
 </code>
 &#35821;&#21477;&#26469;&#35828;&#65292;InnoDB&#23384;&#20648;&#24341;&#25806;&#37117;&#19981;&#20250;&#21152;&#34920;&#32423;&#21035;&#30340;S&#38145;&#25110;&#32773;X&#38145;&#65288;&#25105;&#20204;&#36825;&#37324;&#19981;&#35752;&#35770;&#34920;&#32423;&#24847;&#21521;&#38145;&#30340;&#28155;&#21152;&#65289;&#65292;&#21482;&#20250;&#21152;&#34892;&#32423;&#38145;&#12290;&#25152;&#20197;&#21363;&#20351;&#23545;&#20110;&#20840;&#34920;&#25195;&#25551;&#30340;&#21152;&#38145;&#35835;&#35821;&#21477;&#26469;&#35828;&#65292;&#20063;&#21482;&#20250;&#23545;&#34920;&#20013;&#30340;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#32780;&#19981;&#26159;&#30452;&#25509;&#21152;&#19968;&#20010;&#34920;&#38145;&#12290;
</p>
<p>
 &#21478;&#22806;&#65292;&#24456;&#22810;&#23567;&#20249;&#20276;&#37117;&#20250;&#38382;&#65306;&#8220;&#36825;&#20010;&#35821;&#21477;&#21152;&#20160;&#20040;&#38145;&#8221;&#65292;&#20854;&#23454;&#36825;&#26159;&#19968;&#20010;&#20266;&#21629;&#39064;&#65292;&#22240;&#20026;&#19968;&#20010;&#35821;&#21477;&#38656;&#35201;&#21152;&#20160;&#20040;&#38145;&#21463;&#21040;&#24456;&#22810;&#26041;&#38754;&#30340;&#24433;&#21709;&#65292;&#22914;&#26524;&#26377;&#20154;&#38382;&#20320;&#26576;&#26576;&#35821;&#21477;&#20250;&#21152;&#20160;&#20040;&#38145;&#65292;&#37027;&#20320;&#21487;&#20197;&#30452;&#25509;&#22238;&#24636;&#65306;
 <strong>
  &#30495;&#19981;&#19987;&#19994;
 </strong>
 &#65281;
</p>
<p>
 &#25105;&#20204;&#31245;&#21518;&#32473;&#22823;&#23478;&#35814;&#32454;&#20998;&#26512;&#19968;&#19979;&#24433;&#21709;&#21152;&#38145;&#30340;&#22240;&#32032;&#37117;&#26377;&#21738;&#20123;&#65292;&#20197;&#21450;&#20174;&#28304;&#30721;&#30340;&#35282;&#24230;&#30475;&#19968;&#19979;InnoDB&#21040;&#24213;&#26159;&#22914;&#20309;&#21152;&#38145;&#30340;&#65292;&#24076;&#26395;&#23567;&#20249;&#20276;&#30475;&#23436;&#21518;&#20250;&#24778;&#21628;&#65306;
 <strong>
  &#30495;tm&#30340;&#31616;&#21333;&#65281;
 </strong>
</p>
<p>
 &#19981;&#36807;&#22312;&#36827;&#34892;&#35752;&#35770;&#21069;&#25105;&#20204;&#38656;&#35201;&#30003;&#26126;&#19968;&#19979;&#65292;&#25105;&#20204;&#35752;&#35770;&#30340;&#21482;&#26159;InnoDB&#21152;&#30340;&#20107;&#21153;&#38145;&#65292;&#21363;&#20026;&#20102;&#36991;&#20813;
 <code>
  &#33039;&#20889;
 </code>
 &#12289;
 <code>
  &#33039;&#35835;
 </code>
 &#12289;
 <code>
  &#19981;&#21487;&#37325;&#22797;&#35835;
 </code>
 &#12289;
 <code>
  &#24187;&#35835;
 </code>
 &#36825;&#20123;&#29616;&#35937;&#24102;&#26469;&#30340;&#19968;&#33268;&#24615;&#38382;&#39064;&#32780;&#21152;&#30340;&#38145;&#65292;&#24182;&#19981;&#26159;&#20026;&#20102;&#22312;&#22810;&#32447;&#31243;&#35775;&#38382;&#20849;&#20139;&#20869;&#23384;&#21306;&#22495;&#26102;&#32780;&#21152;&#30340;&#38145;&#65288;&#27604;&#26041;&#35828;&#20004;&#20010;&#19981;&#21516;&#20107;&#21153;&#25152;&#22312;&#30340;&#32447;&#31243;&#24819;&#35835;&#20889;&#21516;&#19968;&#20010;&#39029;&#38754;&#26102;&#65292;&#38656;&#35201;&#36827;&#34892;&#21152;&#38145;&#20445;&#25252;&#65289;&#65292;&#20063;&#19981;&#21253;&#25324;server&#23618;&#28155;&#21152;&#30340;MDL&#38145;&#12290;
</p>
<p>
 &#26412;&#25991;&#25152;&#21442;&#32771;&#30340;&#28304;&#30721;&#29256;&#26412;&#20026;
 <code>
  5.7.22
 </code>
 &#12290;
</p>
<h2>
 &#20107;&#21153;&#38145;&#21040;&#24213;&#26159;&#20160;&#20040;
</h2>
<p>
 <code>
  &#38145;
 </code>
 &#26159;&#19968;&#20010;&#20869;&#23384;&#32467;&#26500;&#65292;InnoDB&#20013;&#29992;
 <code>
  lock_t
 </code>
 &#36825;&#20010;&#32467;&#26500;&#26469;&#23450;&#20041;&#65306;
</p>
<p>
 <img alt="" src="EPUB/48ca193c-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19981;&#35770;&#26159;&#34892;&#38145;&#65292;&#36824;&#26159;&#34920;&#38145;&#37117;&#29992;&#36825;&#20010;&#32467;&#26500;&#26469;&#34920;&#31034;&#12290;&#25105;&#20204;&#32473;&#22823;&#23478;&#30011;&#20010;&#22270;&#65306;
</p>
<p>
 <img alt="" src="EPUB/48d4bfe0-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;&#30340;type_mode&#26159;&#29992;&#20110;&#21306;&#20998;&#36825;&#20010;&#38145;&#32467;&#26500;&#21040;&#24213;&#26159;&#34892;&#38145;&#36824;&#26159;&#34920;&#38145;&#65292;&#22914;&#26524;&#26159;&#34920;&#38145;&#30340;&#35805;&#26159;&#24847;&#21521;&#38145;&#12289;&#30452;&#25509;&#23545;&#34920;&#21152;&#38145;&#12289;&#36824;&#26159;AUTO-INC&#38145;&#65292;&#22914;&#26524;&#26159;&#34892;&#38145;&#30340;&#35805;&#65292;&#20855;&#20307;&#26159;&#27491;&#32463;&#35760;&#24405;&#38145;&#12289;gap&#38145;&#36824;&#26159;next-key&#38145;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#22312;InnoDB&#30340;&#23454;&#29616;&#20013;&#65292;InnoDB&#30340;&#34892;&#38145;&#26159;&#19982;&#35760;&#24405;&#19968;&#19968;&#23545;&#24212;&#30340;&#12290;&#21363;&#20351;&#26159;&#23545;&#20110;gap&#38145;&#26469;&#35828;&#65292;&#22312;&#23454;&#29616;&#19978;&#20063;&#26159;&#20026;&#26576;&#26465;&#35760;&#24405;&#29983;&#25104;&#19968;&#20010;&#38145;&#32467;&#26500;&#65292;&#28982;&#21518;&#35813;&#38145;&#32467;&#26500;&#30340;&#31867;&#22411;&#26159;gap&#38145;&#32780;&#24050;&#65292;&#24182;&#19981;&#26159;&#19987;&#38376;&#20026;&#26576;&#20010;&#21306;&#38388;&#29983;&#25104;&#19968;&#20010;&#38145;&#32467;&#26500;&#12290;&#35813;gap&#38145;&#30340;&#21151;&#33021;&#23601;&#26159;&#27599;&#24403;&#26377;&#21035;&#30340;&#20107;&#21153;&#25554;&#20837;&#35760;&#24405;&#26102;&#65292;&#20250;&#26816;&#26597;&#19968;&#19979;&#24453;&#25554;&#20837;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#19978;&#26159;&#21542;&#24050;&#32463;&#26377;&#19968;&#20010;gap&#38145;&#30340;&#38145;&#32467;&#26500;&#65292;&#22914;&#26524;&#26377;&#30340;&#35805;&#23601;&#36827;&#20837;&#38459;&#22622;&#29366;&#24577;&#12290;
 </p>
</blockquote>
<p>
 &#25105;&#20204;&#24179;&#26102;&#25152;&#35828;&#30340;
 <strong>
  &#21152;&#38145;
 </strong>
 &#23601;&#26159;&#22312;&#20869;&#23384;&#20013;&#29983;&#25104;&#36825;&#26679;&#30340;&#19968;&#20010;&#38145;&#32467;&#26500;&#65288;&#38500;&#20102;&#29983;&#25104;&#38145;&#32467;&#26500;&#65292;&#36824;&#26377;&#19968;&#31181;&#31216;&#20316;
 <code>
  &#38544;&#24335;&#38145;
 </code>
 &#30340;&#21152;&#38145;&#26041;&#24335;&#65292;&#19981;&#29992;&#29983;&#25104;&#38145;&#32467;&#26500;&#65289;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#20026;1&#26465;&#35760;&#24405;&#21152;&#38145;&#23601;&#35201;&#29983;&#25104;&#19968;&#20010;&#38145;&#32467;&#26500;&#65292;&#37027;&#23682;&#19981;&#26159;&#22826;&#28010;&#36153;&#20102;&#65281;&#35774;&#35745;InnoDB&#30340;&#22823;&#21460;&#25552;&#20986;&#20102;&#19968;&#31181;&#20248;&#21270;&#26041;&#26696;&#65292;&#21363;&#21516;&#19968;&#20010;&#20107;&#21153;&#65292;&#22312;&#21516;&#19968;&#20010;&#39029;&#38754;&#19978;&#21152;&#30340;&#30456;&#21516;&#31867;&#22411;&#30340;&#38145;&#37117;&#25918;&#22312;&#21516;&#19968;&#20010;&#38145;&#32467;&#26500;&#37324;&#12290;
</p>
<p>
 &#21508;&#31181;&#31867;&#22411;&#30340;&#38145;&#26159;&#22914;&#26524;&#36890;&#36807;type_mode&#21306;&#20998;&#12289;&#21508;&#31181;&#38145;&#37117;&#26377;&#20160;&#20040;&#20316;&#29992;&#65292;&#20197;&#21450;&#22914;&#20309;&#20943;&#23569;&#29983;&#25104;&#38145;&#32467;&#26500;&#30340;&#32454;&#33410;&#25105;&#20204;&#36825;&#37324;&#23601;&#19981;&#23637;&#24320;&#20102;&#65292;&#37027;&#21448;&#35201;&#33457;&#36153;&#36229;&#38271;&#30340;&#31687;&#24133;&#65292;&#22823;&#23478;&#21487;&#20197;&#21040;&#12298;MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;&#65306;&#20174;&#26681;&#20799;&#19978;&#29702;&#35299;MySQL&#12299;&#20070;&#31821;&#20013;&#26597;&#30475;&#65292;&#25105;&#20204;&#19979;&#36793;&#26469;&#30475;&#20855;&#20307;&#30340;&#21152;&#38145;&#32454;&#33410;&#12290;
</p>
<h2>
 &#20934;&#22791;&#24037;&#20316;
</h2>
<p>
 &#20026;&#20102;&#25925;&#20107;&#30340;&#39034;&#21033;&#21457;&#23637;&#65292;&#25105;&#20204;&#20808;&#21019;&#24314;&#19968;&#20010;&#34920;
 <code>
  hero
 </code>
 &#65306;
</p>
<pre><code>CREATE TABLE hero (
    number INT,
    name VARCHAR(100),
    country varchar(100),
    PRIMARY KEY (number),
    KEY idx_name (name)
) Engine=InnoDB CHARSET=utf8;
</code></pre>
<p>
 &#28982;&#21518;&#21521;&#36825;&#20010;&#34920;&#37324;&#25554;&#20837;&#20960;&#26465;&#35760;&#24405;&#65306;
</p>
<pre><code>INSERT INTO hero VALUES
    (1, 'l&#21016;&#22791;', '&#34560;'),
    (3, 'z&#35832;&#33883;&#20142;', '&#34560;'),
    (8, 'c&#26361;&#25805;', '&#39759;'),
    (15, 'x&#33600;&#24423;', '&#39759;'),
    (20, 's&#23385;&#26435;', '&#21556;');
</code></pre>
<p>
 &#28982;&#21518;&#29616;&#22312;
 <code>
  hero
 </code>
 &#34920;&#23601;&#26377;&#20102;&#20004;&#20010;&#32034;&#24341;&#65288;&#19968;&#20010;&#20108;&#32423;&#32034;&#24341;&#65292;&#19968;&#20010;&#32858;&#31751;&#32034;&#24341;&#65289;&#65292;&#31034;&#24847;&#22270;&#22914;&#19979;&#65306;
</p>
<p>
 <img alt="" src="EPUB/48e17fb4-13d6-11ed-838d-acde48001122">
</p>
<h2>
 &#21152;&#38145;&#21463;&#21738;&#20123;&#22240;&#32032;&#24433;&#21709;
</h2>
<p>
 &#19968;&#26465;&#35821;&#21477;&#21152;&#20160;&#20040;&#38145;&#21463;&#22810;&#31181;&#22240;&#32032;&#24433;&#21709;&#65292;&#22914;&#26524;&#20320;&#19981;&#33021;&#30830;&#35748;&#19979;&#36793;&#36825;&#20123;&#22240;&#32032;&#30340;&#26102;&#20505;&#65292;&#26368;&#22909;&#19981;&#35201;&#25250;&#20808;&#21457;&#35328;&#35828;"XXX&#35821;&#21477;&#23545;XXX&#35760;&#24405;&#21152;&#20102;&#20160;&#20040;&#38145;"&#65306;
</p>
<ul>
 <li>
  &#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;
 </li>
 <li>
  &#35821;&#21477;&#25191;&#34892;&#26102;&#20351;&#29992;&#30340;&#32034;&#24341;&#31867;&#22411;&#65288;&#27604;&#22914;&#32858;&#31751;&#32034;&#24341;&#12289;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#12289;&#26222;&#36890;&#20108;&#32423;&#32034;&#24341;&#65289;
 </li>
 <li>
  &#26159;&#21542;&#26159;&#31934;&#30830;&#21305;&#37197;
 </li>
 <li>
  &#26159;&#21542;&#26159;&#21807;&#19968;&#24615;&#25628;&#32034;
 </li>
 <li>
  &#20855;&#20307;&#25191;&#34892;&#30340;&#35821;&#21477;&#31867;&#22411;&#65288;SELECT&#12289;INSERT&#12289;DELETE&#12289;UPDATE&#65289;
 </li>
 <li>
  &#26159;&#21542;&#24320;&#21551;innodb_locks_unsafe_for_binlog&#31995;&#32479;&#21464;&#37327;
 </li>
 <li>
  &#35760;&#24405;&#26159;&#21542;&#34987;&#26631;&#35760;&#21024;&#38500;
 </li>
</ul>
<p>
 &#36825;&#37324;&#36793;&#26377;&#20960;&#20010;&#27010;&#24565;&#22823;&#23478;&#21487;&#33021;&#19981;&#26159;&#24456;&#28165;&#26970;&#65292;&#25105;&#20204;&#20808;&#35299;&#37322;&#19968;&#19979;&#12290;
</p>
<h3>
 &#25195;&#25551;&#21306;&#38388;
</h3>
<p>
 &#27604;&#26041;&#35828;&#19979;&#36793;&#36825;&#20010;&#26597;&#35810;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE name &lt;=  'l&#21016;&#22791;' AND country = '&#39759;';
</code></pre>
<p>
 MySQL&#21487;&#20197;&#20351;&#29992;&#19979;&#36793;&#20004;&#31181;&#26041;&#24335;&#26469;&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#65306;
</p>
<ul>
 <li>
  <p>
   &#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#65292;&#37027;&#20040;&#23601;&#38656;&#35201;&#25195;&#25551;name&#20540;&#22312;
   <code>
    (-&#8734;, 'l&#21016;&#22791;']
   </code>
   &#36825;&#20010;&#21306;&#38388;&#20013;&#30340;&#25152;&#26377;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#38024;&#23545;&#33719;&#21462;&#21040;&#30340;&#27599;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#37117;&#38656;&#35201;&#25191;&#34892;&#22238;&#34920;&#25805;&#20316;&#26469;&#33719;&#21462;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#30452;&#25509;&#25195;&#25551;&#25152;&#26377;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#21363;&#36827;&#34892;&#20840;&#34920;&#25195;&#25551;&#12290;&#27492;&#26102;&#30456;&#24403;&#20110;&#25195;&#25551;number&#20540;&#22312;
   <code>
    (-&#8734;, +&#8734;)
   </code>
   &#36825;&#20010;&#21306;&#38388;&#20013;&#30340;&#25152;&#26377;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20248;&#21270;&#22120;&#20250;&#35745;&#31639;&#19978;&#36848;&#20108;&#31181;&#26041;&#24335;&#21738;&#20010;&#25104;&#26412;&#26356;&#20302;&#65292;&#36873;&#29992;&#25104;&#26412;&#26356;&#20302;&#30340;&#37027;&#31181;&#26469;&#25191;&#34892;&#26597;&#35810;&#12290;
</p>
<p>
 &#24403;&#20248;&#21270;&#22120;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#25191;&#34892;&#26597;&#35810;&#26102;&#65292;&#25105;&#20204;&#25226;
 <code>
  (-&#8734;, 'l&#21016;&#22791;']
 </code>
 &#31216;&#20316;
 <code>
  &#25195;&#25551;&#21306;&#38388;
 </code>
 &#65292;&#24847;&#21619;&#30528;&#38656;&#35201;&#25195;&#25551;name&#21015;&#20540;&#22312;&#36825;&#20010;&#21306;&#38388;&#20013;&#30340;&#25152;&#26377;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#25105;&#20204;&#20063;&#21487;&#20197;&#25226;&#24418;&#25104;&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#26465;&#20214;
 <code>
  name &lt;=  'l&#21016;&#22791;'
 </code>
 &#31216;&#20316;&#26159;&#24418;&#25104;&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;
 <code>
  &#36793;&#30028;&#26465;&#20214;
 </code>
 &#65307;&#24403;&#20248;&#21270;&#22120;&#20351;&#29992;&#20840;&#34920;&#25195;&#25551;&#25191;&#34892;&#26597;&#35810;&#26102;&#65292;&#25105;&#20204;&#25226;
 <code>
  (-&#8734;, +&#8734;)
 </code>
 &#31216;&#20316;
 <code>
  &#25195;&#25551;&#21306;&#38388;
 </code>
 &#65292;&#24847;&#21619;&#30528;&#38656;&#35201;&#25195;&#25551;number&#20540;&#22312;&#36825;&#20010;&#21306;&#38388;&#20013;&#30340;&#25152;&#26377;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#12290;
</p>
<p>
 &#22312;&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;&#30340;&#36807;&#31243;&#20013;&#65292;&#21487;&#33021;&#20250;&#29992;&#21040;&#22810;&#20010;&#25195;&#25551;&#21306;&#38388;&#65292;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE name &lt; 'l&#21016;&#22791;' OR name &gt; 'x&#33600;&#24423;';
</code></pre>
<p>
 &#22914;&#26524;&#20248;&#21270;&#22120;&#37319;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#26102;&#65292;&#37027;&#20040;&#23545;&#24212;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
 <code>
  (-&#8734;, l&#21016;&#22791;)
 </code>
 &#20197;&#21450;
 <code>
  ('x&#33600;&#24423;', +&#8734;)
 </code>
 &#65292;&#21363;&#38656;&#35201;&#25195;&#25551;name&#20540;&#22312;&#19978;&#36848;&#20004;&#20010;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#35760;&#24405;&#12290;
</p>
<p>
 &#27599;&#24403;InnoDB&#38656;&#35201;&#25195;&#25551;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#35760;&#24405;&#26102;&#65292;&#37117;&#38656;&#35201;&#20998;&#20004;&#27493;&#65306;
</p>
<ul>
 <li>
  <p>
   &#20808;&#36890;&#36807;&#32034;&#24341;&#23545;&#24212;&#30340;B+&#26641;&#65292;&#20174;&#26681;&#39029;&#38754;&#24320;&#22987;&#19968;&#36335;&#21521;&#19979;&#23450;&#20301;&#65292;&#30452;&#21040;&#23450;&#20301;&#21040;&#21494;&#23376;&#33410;&#28857;&#20013;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20043;&#21518;&#23601;&#21487;&#20197;&#19981;&#38656;&#35201;&#32487;&#32493;&#20174;&#26681;&#33410;&#28857;&#23450;&#20301;&#20102;&#65292;&#32780;&#26159;&#36890;&#36807;&#35760;&#24405;&#30340;
   <code>
    next_record
   </code>
   &#23646;&#24615;&#30452;&#25509;&#25214;&#21040;&#25195;&#25551;&#21306;&#38388;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#21363;&#21487;&#65288;&#39029;&#38754;&#20043;&#38388;&#36890;&#36807;&#21452;&#21521;&#38142;&#34920;&#36830;&#25509;&#65292;&#25214;&#23436;&#19968;&#20010;&#39029;&#38754;&#20013;&#30340;&#35760;&#24405;&#21518;&#65292;&#21487;&#20197;&#39034;&#30528;&#21452;&#21521;&#38142;&#34920;&#20877;&#21435;&#19979;&#19968;&#20010;&#39029;&#38754;&#20013;&#21435;&#25214;&#23646;&#20110;&#21516;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#65289;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20063;&#23601;&#26159;&#35828;&#22312;&#25195;&#25551;&#26576;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#26102;&#65292;&#21482;&#26377;&#23450;&#20301;&#31532;1&#26465;&#35760;&#24405;&#30340;&#26102;&#20505;&#31245;&#24494;&#40635;&#28902;&#28857;&#20799;&#65292;&#20854;&#20182;&#35760;&#24405;&#21482;&#38656;&#35201;&#39034;&#30528;&#38142;&#34920;&#65288;&#21333;&#20010;&#39029;&#38754;&#20013;&#30340;&#35760;&#24405;&#36830;&#25104;&#19968;&#20010;&#21333;&#21521;&#38142;&#34920;&#65292;&#19981;&#21516;&#30340;&#39029;&#38754;&#20043;&#38388;&#26159;&#21452;&#21521;&#38142;&#34920;&#65289;&#25195;&#25551;&#21363;&#21487;&#12290;
</p>
<h3>
 &#31934;&#30830;&#21305;&#37197;
</h3>
<p>
 &#23545;&#20110;&#24418;&#25104;&#25195;&#25551;&#21306;&#38388;&#30340;&#36793;&#30028;&#26465;&#20214;&#26469;&#35828;&#65292;&#22914;&#26524;&#26159;&#31561;&#20540;&#21305;&#37197;&#30340;&#26465;&#20214;&#65292;&#25105;&#20204;&#23601;&#25226;&#23545;&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#21305;&#37197;&#27169;&#24335;&#31216;&#20316;
 <code>
  &#31934;&#30830;&#21305;&#37197;
 </code>
 &#12290;&#27604;&#26041;&#35828;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE name = 'l&#21016;&#22791;' AND country = '&#39759;';
</code></pre>
<p>
 &#22914;&#26524;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#26102;&#65292;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
 <code>
  ['l&#21016;&#22791;', 'l&#21016;&#22791;']
 </code>
 &#65292;&#24418;&#25104;&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#36793;&#30028;&#26465;&#20214;&#23601;&#26159;
 <code>
  name = 'l&#21016;&#22791;'
 </code>
 &#12290;&#25105;&#20204;&#23601;&#25226;&#22312;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#26102;&#30340;&#21305;&#37197;&#27169;&#24335;&#31216;&#20316;
 <code>
  &#31934;&#30830;&#21305;&#37197;
 </code>
 &#12290;
</p>
<p>
 &#32780;&#23545;&#20110;&#19979;&#36793;&#36825;&#20010;&#26597;&#35810;&#26469;&#35828;
</p>
<pre><code>SELECT * FROM hero WHERE name &lt;=  'l&#21016;&#22791;' AND country = '&#39759;';
</code></pre>
<p>
 &#26174;&#28982;&#23601;&#19981;&#26159;
 <code>
  &#31934;&#30830;&#21305;&#37197;
 </code>
 &#20102;&#12290;
</p>
<h3>
 &#21807;&#19968;&#24615;&#25628;&#32034;
</h3>
<p>
 &#22914;&#26524;&#22312;&#25195;&#25551;&#26576;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#21069;&#65292;&#23601;&#33021;&#20107;&#20808;&#30830;&#23450;&#35813;&#25195;&#25551;&#21306;&#38388;&#26368;&#22810;&#21482;&#21253;&#21547;1&#26465;&#35760;&#24405;&#30340;&#35805;&#65292;&#37027;&#20040;&#23601;&#25226;&#36825;&#31181;&#24773;&#20917;&#31216;&#20316;&#21807;&#19968;&#24615;&#25628;&#32034;&#12290;&#25105;&#20204;&#30475;&#19968;&#19979;&#20195;&#30721;&#20013;&#21028;&#23450;&#25195;&#25551;&#26576;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#26159;&#21542;&#26159;&#21807;&#19968;&#24615;&#25628;&#32034;&#30340;&#20195;&#30721;&#26159;&#24590;&#20040;&#20889;&#30340;&#65306;
</p>
<p>
 <img alt="" src="EPUB/48f40b20-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;&#65306;
</p>
<ol>
 <li>
  &#21305;&#37197;&#27169;&#24335;&#26159;&#31934;&#30830;&#21305;&#37197;
 </li>
 <li>
  &#20351;&#29992;&#30340;&#32034;&#24341;&#26159;&#32858;&#31751;&#32034;&#24341;&#25110;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;
 </li>
 <li>
  &#22914;&#26524;&#32034;&#24341;&#20013;&#21253;&#21547;&#22810;&#20010;&#21015;&#65292;&#21017;&#27599;&#20010;&#21015;&#22312;&#29983;&#25104;&#25195;&#25551;&#21306;&#38388;&#26102;&#37117;&#24212;&#35813;&#34987;&#29992;&#21040;
 </li>
 <li>
  &#22914;&#26524;&#20351;&#29992;&#30340;&#32034;&#24341;&#26159;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#65292;&#37027;&#20040;&#22312;&#25628;&#32034;&#26102;&#19981;&#33021;&#25628;&#32034;&#26576;&#20010;&#32034;&#24341;&#21015;&#20026;NULL&#30340;&#35760;&#24405;&#65288;&#22240;&#20026;&#23545;&#20110;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;&#26469;&#35828;&#65292;&#26159;&#21487;&#20197;&#23384;&#20648;&#22810;&#20010;&#20540;&#20026;NULL&#30340;&#35760;&#24405;&#30340;&#65289;&#12290;
 </li>
</ol>
<p>
 &#19978;&#36793;&#20960;&#28857;&#37117;&#27604;&#36739;&#22909;&#29702;&#35299;&#65292;&#25105;&#20204;&#31245;&#24494;&#35299;&#37322;&#19968;&#19979;&#31532;3&#28857;&#12290;&#27604;&#26041;&#35828;&#25105;&#20204;&#20026;&#26576;&#20010;&#34920;&#30340;a&#12289;b&#20004;&#21015;&#24314;&#31435;&#20102;&#19968;&#20010;&#21807;&#19968;&#20108;&#32423;&#32034;&#24341;
 <code>
  uk_a_b(a, b)
 </code>
 &#65292;&#37027;&#20040;&#23545;&#20110;&#25628;&#32034;&#26465;&#20214;
 <code>
  a=1
 </code>
 &#24418;&#25104;&#30340;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#19981;&#33021;&#20445;&#35777;&#35813;&#25195;&#25551;&#21306;&#38388;&#26368;&#22810;&#21482;&#21253;&#21547;&#19968;&#26465;&#35760;&#24405;&#65307;&#23545;&#20110;&#25628;&#32034;&#26465;&#20214;
 <code>
  a=1 AND b= 1
 </code>
 &#24418;&#25104;&#30340;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#25165;&#21487;&#20197;&#20445;&#35777;&#35813;&#25195;&#25551;&#21306;&#38388;&#20013;&#20165;&#21253;&#21547;1&#26465;&#35760;&#24405;&#65288;&#19981;&#21253;&#25324;&#35760;&#24405;&#30340;delete_flag=1&#30340;&#35760;&#24405;&#65289;&#12290;
</p>
<h2>
 row_search_mvcc
</h2>
<p>
 &#25105;&#20204;&#30693;&#36947;MySQL&#20854;&#23454;&#26159;&#20998;&#25104;server&#23618;&#21644;&#23384;&#20648;&#24341;&#25806;&#23618;&#20004;&#37096;&#20998;&#65292;&#27599;&#24403;&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;&#26102;&#65292;server&#23618;&#36127;&#36131;&#29983;&#25104;&#25191;&#34892;&#35745;&#21010;&#65292;&#21363;&#36873;&#21462;&#21363;&#23558;&#20351;&#29992;&#30340;&#32034;&#24341;&#20197;&#21450;&#23545;&#24212;&#30340;&#25195;&#25551;&#21306;&#38388;&#12290;&#25105;&#20204;&#36825;&#37324;&#20197;InnoDB&#20026;&#20363;&#65292;&#38024;&#23545;&#27599;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#65292;&#37117;&#20250;&#65306;
</p>
<ul>
 <li>
  <p>
   server&#23618;&#21521;InnoDB&#35201;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;1&#26465;&#35760;&#24405;
  </p>
 </li>
 <li>
  <p>
   InnoDB&#36890;&#36807;B+&#26641;&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;1&#26465;&#35760;&#24405;&#65288;&#22914;&#26524;&#23450;&#20301;&#30340;&#26159;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#24182;&#26377;&#22238;&#34920;&#38656;&#27714;&#21017;&#22238;&#34920;&#33719;&#21462;&#23436;&#25972;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65289;&#65292;&#28982;&#21518;&#36820;&#22238;&#32473;server&#23618;
  </p>
 </li>
 <li>
  <p>
   server&#23618;&#21028;&#26029;&#35760;&#24405;&#26159;&#21542;&#31526;&#21512;&#25628;&#32034;&#26465;&#20214;&#65292;&#22914;&#26524;&#31526;&#21512;&#21017;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#65292;&#19981;&#31526;&#21512;&#21017;&#36339;&#36807;&#12290;&#32487;&#32493;&#21521;InnoDB&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#12290;
  </p>
 </li>
</ul>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#27492;&#22788;&#23558;&#35760;&#24405;&#21457;&#36865;&#32473;&#23458;&#25143;&#31471;&#20854;&#23454;&#26159;&#21457;&#36865;&#21040;&#26412;&#22320;&#30340;&#32593;&#32476;&#32531;&#20914;&#21306;&#65292;&#32531;&#20914;&#21306;&#22823;&#23567;&#30001;net_buffer_length&#25511;&#21046;&#65292;&#40664;&#35748;&#26159;16KB&#22823;&#23567;&#12290;&#31561;&#32531;&#20914;&#21306;&#28385;&#20102;&#25165;&#30495;&#27491;&#21457;&#36865;&#32593;&#32476;&#21253;&#21040;&#23458;&#25143;&#31471;&#12290;
 </p>
</blockquote>
<ul>
 <li>
  <p>
   InnoDB&#26681;&#25454;&#35760;&#24405;&#30340;&#21333;&#21521;&#38142;&#34920;&#20197;&#21450;&#39029;&#38754;&#20043;&#38388;&#30340;&#21452;&#21521;&#38142;&#34920;&#25214;&#21040;&#19979;&#19968;&#26465;&#35760;&#24405;&#65288;&#22914;&#26524;&#23450;&#20301;&#30340;&#26159;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#24182;&#26377;&#22238;&#34920;&#38656;&#27714;&#21017;&#22238;&#34920;&#33719;&#21462;&#23436;&#25972;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65289;&#65292;&#36820;&#22238;&#32473;server&#23618;&#12290;
  </p>
 </li>
 <li>
  <p>
   server&#23618;&#22788;&#29702;&#35813;&#35760;&#24405;&#65292;&#24182;&#21521;InnoDB&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;
  </p>
 </li>
 <li>
  <p>
   ... &#19981;&#20572;&#25191;&#34892;&#19978;&#36848;&#36807;&#31243;&#65292;&#30452;&#21040;InnoDB&#35835;&#21040;&#19968;&#26465;&#19981;&#31526;&#21512;&#36793;&#30028;&#26465;&#20214;&#30340;&#35760;&#24405;&#20026;&#27490;
  </p>
 </li>
</ul>
<p>
 &#21487;&#35265;&#19968;&#33324;&#24773;&#20917;&#19979;&#65292;server&#23618;&#21644;&#23384;&#20648;&#24341;&#25806;&#23618;&#26159;&#20197;&#35760;&#24405;&#20026;&#21333;&#20301;&#36827;&#34892;&#36890;&#20449;&#30340;&#65292;&#32780;InnoDB&#35835;&#21462;&#19968;&#26465;&#35760;&#24405;&#26368;&#37325;&#35201;&#30340;&#20989;&#25968;&#23601;&#26159;
 <code>
  row_search_mvcc
 </code>
 &#65306;
</p>
<p>
 <img alt="" src="EPUB/4906df48-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#21487;&#20197;&#30475;&#21040;&#36825;&#20010;&#20989;&#25968;&#38271;&#21040;&#21523;&#20154;&#65292;&#26377;&#19968;&#21315;&#22810;&#34892;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#19981;&#30693;&#36947;&#20320;&#20204;&#20844;&#21496;&#26377;&#27809;&#26377;&#22312;&#19968;&#20010;&#20989;&#25968;&#20013;&#25226;&#19994;&#21153;&#36923;&#36753;&#20889;&#21040;&#19968;&#21315;&#22810;&#34892;&#30340;&#21516;&#20107;&#65292;&#22914;&#26524;&#26377;&#30340;&#35805;&#20320;&#24819;&#19981;&#24819;&#25171;&#20182;&#12290;
 </p>
</blockquote>
<p>
 &#22312;
 <code>
  row_search_mvcc
 </code>
 &#37324;&#65292;&#23545;&#19968;&#26465;&#35760;&#24405;&#36827;&#34892;&#35832;&#22914;&#22810;&#29256;&#26412;&#30340;&#21487;&#35265;&#24615;&#21028;&#26029;&#65292;&#35201;&#19981;&#35201;&#23545;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#30340;&#21028;&#26029;&#65292;&#35201;&#26159;&#21152;&#38145;&#30340;&#35805;&#21152;&#20160;&#20040;&#38145;&#30340;&#36873;&#25321;&#65292;&#23436;&#25104;&#35760;&#24405;&#20174;InnoDB&#30340;&#23384;&#20648;&#26684;&#24335;&#21040;server&#23618;&#23384;&#20648;&#26684;&#24335;&#30340;&#36716;&#25442;&#31561;&#31561;&#31561;&#31561;&#21313;&#20998;&#32321;&#26434;&#30340;&#24037;&#20316;&#12290;
</p>
<p>
 &#20854;&#23454;&#23545;&#20110;UPDATE&#12289;DELETE&#35821;&#21477;&#26469;&#35828;&#65292;&#25191;&#34892;&#23427;&#20204;&#21069;&#37117;&#38656;&#35201;&#20808;&#22312;B+&#26641;&#20013;&#23450;&#20301;&#21040;&#30456;&#24212;&#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#23427;&#20204;&#20063;&#20250;&#35843;&#29992;
 <code>
  row_search_mvcc
 </code>
 &#12290;
</p>
<p>
 InnoDB&#23545;&#35760;&#24405;&#30340;&#21152;&#38145;&#25805;&#20316;&#20027;&#35201;&#26159;&#22312;
 <code>
  row_search_mvcc
 </code>
 &#20013;&#30340;&#65292;&#20687;
 <code>
  SELECT ... LOCK IN SHARE MODE
 </code>
 &#12289;
 <code>
  SELECT ... FOR UPDATE
 </code>
 &#12289;
 <code>
  UPDATE
 </code>
 &#12289;
 <code>
  DELETE
 </code>
 &#36825;&#26679;&#30340;&#35821;&#21477;&#37117;&#20250;&#35843;&#29992;
 <code>
  row_search_mvcc
 </code>
 &#23436;&#25104;&#21152;&#38145;&#25805;&#20316;&#12290;
 <code>
  SELECT ... LOCK IN SHARE MODE
 </code>
 &#20250;&#20026;&#35760;&#24405;&#28155;&#21152;S&#22411;&#38145;&#65292;
 <code>
  SELECT ... FOR UPDATE
 </code>
 &#12289;
 <code>
  UPDATE
 </code>
 &#12289;
 <code>
  DELETE
 </code>
 &#20250;&#20026;&#35760;&#24405;&#28155;&#21152;X&#22411;&#38145;&#12290;
</p>
<p>
 InnoDB&#27599;&#24403;&#35835;&#21462;&#19968;&#26465;&#35760;&#24405;&#26102;&#65292;&#37117;&#20250;&#35843;&#29992;&#19968;&#27425;
 <code>
  row_search_mvcc
 </code>
 &#65292;&#22312;&#20570;&#20102;&#36275;&#22815;&#38271;&#30340;&#38138;&#22443;&#20043;&#21518;&#65292;&#25105;&#20204;&#32456;&#20110;&#21487;&#20197;&#30475;&#19968;&#19979;&#22312;
 <code>
  row_search_mvcc
 </code>
 &#20989;&#25968;&#20013;&#26159;&#24590;&#20040;&#23545;&#26576;&#26465;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#30340;&#12290;
</p>
<h2>
 &#35821;&#21477;&#21040;&#24213;&#26159;&#24590;&#20040;&#21152;&#38145;&#30340;
</h2>
<p>
 &#39318;&#20808;&#30475;&#19968;&#20010;&#21313;&#20998;&#37325;&#35201;&#30340;&#21464;&#37327;&#65306;
</p>
<p>
 <img alt="" src="EPUB/49141cee-13d6-11ed-838d-acde48001122">
</p>
<p>
 <code>
  set_also_gap_locks
 </code>
 &#34920;&#31034;&#26159;&#21542;&#35201;&#32473;&#35760;&#24405;&#28155;&#21152;gap&#38145;&#65288;next-key&#38145;&#21487;&#20197;&#30475;&#25104;&#26159;&#27491;&#32463;&#35760;&#24405;&#38145;&#21644;gap&#38145;&#30340;&#32452;&#21512;&#65289;&#65292;&#23427;&#30340;&#40664;&#35748;&#20540;&#26159;
 <code>
  TRUE
 </code>
 &#65292;&#34920;&#31034;&#40664;&#35748;&#20250;&#32473;&#35760;&#24405;&#28155;&#21152;gap&#38145;&#12290;
</p>
<p>
 <code>
  set_also_gap_locks
 </code>
 &#21487;&#33021;&#20250;&#22312;&#19979;&#36793;&#36825;&#20010;&#22320;&#26041;&#21457;&#29983;&#21464;&#21270;&#65306;
</p>
<p>
 <img alt="" src="EPUB/491d8f4a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#21363;&#22914;&#26524;&#24403;&#21069;&#25191;&#34892;&#30340;&#26159;SELECT ... LOCK IN SHARE MODE&#25110;&#32773;SELECT ... FOR UPDATE&#36825;&#26679;&#30340;&#21152;&#38145;&#35835;&#35821;&#21477;&#65288;&#38750;DELETE&#25110;UPDATE&#35821;&#21477;&#65289;&#65292;&#24182;&#19988;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED &#26102;&#65292;&#23558;
 <code>
  set_also_gap_locks
 </code>
 &#35774;&#32622;&#20026;FALSE&#12290;
</p>
<p>
 &#20854;&#20013;
 <code>
  prebuilt-&gt;select_lock_type
 </code>
 &#34920;&#31034;&#21152;&#38145;&#30340;&#31867;&#22411;&#65292;
 <code>
  LOCK_NONE
 </code>
 &#34920;&#31034;&#19981;&#21152;&#38145;&#65292;
 <code>
  LOCK_S
 </code>
 &#34920;&#31034;&#21152;S&#38145;&#65288;&#27604;&#26041;&#35828;&#25191;&#34892;SELECT ... LOCK IN SHARE MODE&#26102;&#65289;&#65292;
 <code>
  LOCK_X
 </code>
 &#34920;&#31034;&#21152;X&#38145;&#65288;&#27604;&#26041;&#35828;&#25191;&#34892;SELECT ... FOR UPDATE&#12289;DELETE&#12289;UPDATE&#26102;&#65289;&#12290;
</p>
<h3>
 &#23545;&#26222;&#36890;&#30340;SELECT&#30340;&#22788;&#29702;&#21644;&#24847;&#21521;&#38145;&#30340;&#28155;&#21152;
</h3>
<p>
 &#20877;&#24448;&#21518;&#30475;&#65306;
</p>
<p>
 <img alt="" src="EPUB/492ee434-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;&#65306;
</p>
<ul>
 <li>
  &#26631;&#21495;1&#30340;&#31661;&#22836;&#26159;&#23545;&#26222;&#36890;&#30340;SELECT&#30340;&#22788;&#29702;&#65292;&#22312;&#26597;&#35810;&#24320;&#21551;&#21069;&#38656;&#35201;&#29983;&#25104;ReadView&#12290;
 </li>
</ul>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#20855;&#20307;&#30340;&#35762;&#23601;&#26159;&#23545;&#20110;Repeatable Read&#38548;&#31163;&#32423;&#21035;&#26469;&#35828;&#65292;&#21482;&#22312;&#39318;&#27425;&#25191;&#34892;SELECT&#35821;&#21477;&#26102;&#29983;&#25104;Readview&#65292;&#20043;&#21518;&#30340;SELECT&#35821;&#21477;&#37117;&#22797;&#29992;&#36825;&#20010;ReadView&#65307;&#23545;&#20110;Read Committed&#38548;&#31163;&#32423;&#21035;&#26469;&#35828;&#65292;&#27599;&#27425;&#25191;&#34892;SELECT&#35821;&#21477;&#26102;&#37117;&#20250;&#29983;&#25104;&#19968;&#20010;ReadView&#12290;&#36825;&#19968;&#28857;&#24182;&#19981;&#26159;&#22312;&#19978;&#36793;&#25130;&#22270;&#20013;&#30340;&#20195;&#30721;&#37324;&#23454;&#29616;&#30340;&#12290;
 </p>
</blockquote>
<ul>
 <li>
  &#26631;&#21495;2&#30340;&#31661;&#22836;&#26159;&#23545;&#21152;&#38145;&#35835;&#30340;&#35821;&#21477;&#30340;&#22788;&#29702;&#65292;&#22312;&#39318;&#27425;&#35835;&#21462;&#35760;&#24405;&#65288;prebuilt-&gt;sql_stat_start&#34920;&#31034;&#26159;&#21542;&#26159;&#39318;&#27425;&#35835;&#21462;&#65289;&#21069;&#65292;&#38656;&#35201;&#28155;&#21152;&#34920;&#32423;&#21035;&#30340;&#24847;&#21521;&#38145;&#65288;IS&#25110;IX&#38145;&#65289;&#12290;
 </li>
</ul>
<p>
 &#19979;&#36793;&#26159;&#30495;&#27491;&#22788;&#29702;&#35760;&#24405;&#24182;&#32473;&#35760;&#24405;&#21152;&#38145;&#30340;&#27969;&#31243;&#65292;&#25105;&#20204;&#32473;&#36825;&#20123;&#27969;&#31243;&#32534;&#20010;&#21495;&#12290;
</p>
<h3>
 1. &#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;
</h3>
<p>
 &#19979;&#36793;&#24320;&#22987;&#36890;&#36807;B+&#26641;&#23450;&#20301;&#26576;&#20010;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#20102;&#65288;&#23545;&#20110;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#21482;&#25191;&#34892;&#19968;&#27425;&#19979;&#36848;&#20989;&#25968;&#65292;&#22240;&#20026;&#21482;&#35201;&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#20043;&#21518;&#65292;&#23601;&#21487;&#20197;&#27839;&#30528;&#35760;&#24405;&#25152;&#22312;&#30340;&#21333;&#21521;&#38142;&#34920;&#36827;&#34892;&#26597;&#35810;&#20102;&#65289;&#65306;
</p>
<p>
 <img alt="" src="EPUB/493c4642-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;
 <code>
  btr_pcur_open_with_no_init
 </code>
 &#26159;&#29992;&#20110;&#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#30340;&#20989;&#25968;&#12290;
</p>
<h3>
 2. &#23545;&#20110;ORDER BY ... DESC&#26465;&#20214;&#24418;&#25104;&#30340;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#30340;&#22788;&#29702;
</h3>
<p>
 &#22312;B+&#26641;&#30340;&#27599;&#23618;&#33410;&#28857;&#20013;&#65292;&#35760;&#24405;&#26159;&#25353;&#29031;&#38190;&#20540;&#20174;&#23567;&#21040;&#22823;&#30340;&#26041;&#24335;&#36827;&#34892;&#25490;&#24207;&#30340;&#12290;&#23545;&#20110;&#26576;&#20010;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;InnoDB&#36890;&#24120;&#26159;&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;&#20013;&#26368;&#24038;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;&#38190;&#20540;&#26368;&#23567;&#30340;&#37027;&#26465;&#35760;&#24405;&#65292;&#28982;&#21518;&#27839;&#30528;&#20174;&#24038;&#24448;&#21491;&#30340;&#26041;&#24335;&#21521;&#21518;&#25195;&#25551;&#12290;
</p>
<p>
 &#20294;&#26159;&#23545;&#20110;&#19979;&#36793;&#36825;&#20010;&#26597;&#35810;&#26469;&#35828;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE name &lt; 's&#23385;&#26435;' AND country = '&#39759;' ORDER BY name DESC FOR UPDATE ;
</code></pre>
<p>
 &#22914;&#26524;&#20248;&#21270;&#22120;&#20915;&#23450;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#30340;&#35805;&#65292;&#37027;&#20040;&#23545;&#24212;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
 <code>
  (-&#8734;, 's&#23385;&#26435;')
 </code>
 &#12290;&#30001;&#20110;&#19978;&#36848;&#26597;&#35810;&#35201;&#27714;&#35760;&#24405;&#26159;&#25353;&#29031;&#20174;&#22823;&#21040;&#23567;&#30340;&#39034;&#24207;&#36820;&#22238;&#32473;&#29992;&#25143;&#65292;&#25152;&#20197;InnoDB&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#24212;&#35813;&#26159;&#35813;&#25195;&#25551;&#21306;&#38388;&#20013;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;&#38190;&#20540;&#26368;&#22823;&#30340;&#37027;&#26465;&#35760;&#24405;&#65288;&#22312;&#25191;&#34892;
 <code>
  btr_pcur_open_with_no_init
 </code>
 &#26102;&#23601;&#23450;&#20301;&#21040;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#65289;&#65292;&#25105;&#20204;&#30475;&#19968;&#19979;idx_name&#20108;&#32423;&#32034;&#24341;&#31034;&#24847;&#22270;&#65306;
</p>
<p>
 <img alt="" src="EPUB/49485b30-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#24456;&#26174;&#28982;&#65292;name&#20540;&#20026;
 <code>
  'l&#21016;&#22791;'
 </code>
 &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#26159;&#25195;&#25551;&#21306;&#38388;
 <code>
  (-&#8734;, 's&#23385;&#26435;')
 </code>
 &#20013;&#26368;&#21491;&#36793;&#30340;&#35760;&#24405;&#12290;
</p>
<p>
 &#23545;&#20110;&#20174;&#21491;&#21521;&#24038;&#25195;&#25551;
 <code>
  &#25195;&#25551;&#21306;&#38388;
 </code>
 &#20013;&#35760;&#24405;&#30340;&#24773;&#20917;&#65292;&#38024;&#23545;&#20174;&#25195;&#25551;&#21306;&#38388;&#20013;&#23450;&#20301;&#21040;&#30340;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#65292;&#38656;&#35201;&#20570;&#22914;&#19979;&#22788;&#29702;&#65306;
</p>
<p>
 <img alt="" src="EPUB/4953170a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;
 <code>
  sel_set_rec_lock
 </code>
 &#23601;&#26159;&#23545;&#19968;&#26465;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#30340;&#20989;&#25968;&#12290;
</p>
<p>
 &#21487;&#20197;&#30475;&#21040;&#65292;&#23545;&#20110;&#21152;&#38145;&#35835;&#26469;&#35828;&#65292;&#22312;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;
 <code>
  REPEATABLE READ
 </code>
 &#24182;&#19988;&#20063;&#27809;&#26377;&#24320;&#21551;
 <code>
  innodb_locks_unsafe_for_binlog
 </code>
 &#31995;&#32479;&#21464;&#37327;&#30340;&#24773;&#20917;&#19979;&#65292;&#20250;&#23545;&#25195;&#25551;&#21306;&#38388;&#20013;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#21152;&#19968;&#20010;&#31867;&#22411;&#20026;
 <code>
  LOCK_GAP
 </code>
 &#30340;&#38145;&#65292;&#36825;&#20010;&#31867;&#22411;&#20026;
 <code>
  LOCK_GAP
 </code>
 &#30340;&#38145;&#20854;&#23454;&#23601;&#26159;
 <code>
  gap&#38145;
 </code>
 &#12290;
</p>
<p>
 &#22312;&#26412;&#20363;&#20013;&#65292;&#20551;&#35774;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#26159;REPATABLE&#12288;READ&#12290;&#25195;&#25551;&#21306;&#38388;
 <code>
  (-&#8734;, 's&#23385;&#26435;')
 </code>
 &#20013;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#23601;&#26159;name&#20540;&#20026;
 <code>
  'l&#21016;&#22791;'
 </code>
 &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#25509;&#19979;&#26469;&#23601;&#24212;&#35813;&#20026;&#35813;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;name&#20540;&#20026;
 <code>
  's&#23385;&#26435;'
 </code>
 &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19968;&#20010;
 <code>
  gap
 </code>
 &#38145;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#22823;&#23478;&#21487;&#20197;&#35835;&#19968;&#19979;&#19978;&#36848;&#20195;&#30721;&#30340;&#27880;&#37322;&#65292;&#20854;&#23454;&#36825;&#26679;&#21152;&#38145;&#20027;&#35201;&#26159;&#20026;&#20102;&#38459;&#27490;&#24187;&#35835;&#12290;&#21478;&#22806;&#65292;&#36825;&#19968;&#27493;&#39588;&#30340;&#21152;&#38145;&#20165;&#20165;&#38024;&#23545;&#20174;&#21491;&#21521;&#24038;&#30340;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#65292;&#20043;&#21518;&#25195;&#25551;&#35813;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#20854;&#20182;&#35760;&#24405;&#26102;&#23601;&#19981;&#20570;&#36825;&#19968;&#27493;&#30340;&#25805;&#20316;&#20102;&#12290;
 </p>
</blockquote>
<h3>
 3. &#30495;&#27491;&#30340;&#21152;&#38145;&#27969;&#31243;&#25165;&#24320;&#22987;&#8212;&#8212;&#23545;Infimum&#21644;Supremum&#35760;&#24405;&#30340;&#22788;&#29702;
</h3>
<p>
 &#27493;&#39588;1&#26159;&#29992;&#26469;&#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#38024;&#23545;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#21482;&#25191;&#34892;1&#27425;&#12290;
</p>
<p>
 &#27493;&#39588;2&#26159;&#38024;&#23545;&#20174;&#21491;&#21521;&#24038;&#25195;&#25551;&#30340;&#25195;&#25551;&#21306;&#38388;&#20013;&#26368;&#21491;&#36793;&#30340;&#37027;&#26465;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#38024;&#23545;&#19968;&#20010;&#25195;&#25551;&#21306;&#38388;&#20063;&#25191;&#34892;1&#27425;&#12290;
</p>
<p>
 &#20174;&#31532;3&#27493;&#39588;&#24320;&#22987;&#20197;&#21450;&#24448;&#21518;&#30340;&#27493;&#39588;&#65292;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#27599;&#19968;&#26465;&#35760;&#24405;&#37117;&#35201;&#32463;&#21382;&#12290;
</p>
<p>
 &#20808;&#30475;&#19968;&#19979;&#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#26159;
 <code>
  Infimum&#35760;&#24405;
 </code>
 &#25110;&#32773;
 <code>
  Supremum&#35760;&#24405;
 </code>
 &#26102;&#30340;&#22788;&#29702;&#65306;
</p>
<p>
 <img alt="" src="EPUB/495e9f62-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20174;&#19978;&#36793;&#30340;&#20195;&#30721;&#20013;&#21487;&#20197;&#30475;&#20986;&#65292;&#22914;&#26524;&#24403;&#21069;&#35835;&#21462;&#30340;&#35760;&#24405;&#26159;
 <code>
  Infimum&#35760;&#24405;
 </code>
 &#65292;&#21017;&#21861;&#20063;&#19981;&#20570;&#65292;&#30452;&#25509;&#21435;&#35835;&#19979;&#19968;&#26465;&#35760;&#24405;&#12290;
</p>
<p>
 &#22914;&#26524;&#24403;&#21069;&#35835;&#21462;&#30340;&#35760;&#24405;&#26159;
 <code>
  Supremum&#35760;&#24405;
 </code>
 &#65292;&#21017;&#22312;&#19979;&#36793;&#36825;&#20123;&#26465;&#20214;&#25104;&#31435;&#30340;&#26102;&#20505;&#23601;&#20250;&#20026;&#35760;&#24405;&#28155;&#21152;&#19968;&#20010;&#31867;&#22411;&#20026;
 <code>
  LOCK_ORDINARY
 </code>
 &#30340;&#38145;&#65292;&#20854;&#23454;&#20063;&#23601;&#26159;
 <code>
  next-key&#38145;
 </code>
 &#65306;
</p>
<ul>
 <li>
  <p>
   set_also_gap_locks&#26159;TRUE&#65288;&#36825;&#20010;&#21464;&#37327;&#21482;&#22312;&#21069;&#36793;&#35774;&#32622;&#36807;&#65292;&#24403;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED&#30340;SELECT&#35821;&#21477;&#30340;&#21152;&#38145;&#35835;&#20250;&#35774;&#32622;&#20026;FALSE&#65292;&#21542;&#21017;&#20026;TRUE&#65289;
  </p>
 </li>
 <li>
  <p>
   &#26410;&#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;&#24182;&#19988;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;REPEATABLE READ&#12290;
  </p>
 </li>
 <li>
  <p>
   &#26412;&#27425;&#35835;&#21462;&#23646;&#20110;&#21152;&#38145;&#35835;
  </p>
 </li>
 <li>
  <p>
   &#25152;&#20351;&#29992;&#30340;&#19981;&#26159;&#31354;&#38388;&#32034;&#24341;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20854;&#23454;&#30001;&#20110;
 <code>
  Supremum&#35760;&#24405;
 </code>
 &#26412;&#36523;&#26159;&#19968;&#26465;&#20266;&#35760;&#24405;&#65292;&#21035;&#30340;&#20107;&#21153;&#24182;&#19981;&#20250;&#26356;&#26032;&#25110;&#21024;&#38500;&#23427;&#65292;&#25152;&#20197;&#32473;&#23427;&#28155;&#21152;
 <code>
  next-key&#38145;
 </code>
 &#36215;&#21040;&#30340;&#25928;&#26524;&#21644;&#32473;&#23427;&#28155;&#21152;
 <code>
  gap&#38145;
 </code>
 &#26159;&#19968;&#26679;&#30340;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  Infimum&#35760;&#24405;&#21644;Supremum&#35760;&#24405;&#26159;InnoDB&#33258;&#21160;&#20026;B+&#26641;&#20013;&#30340;&#27599;&#20010;&#39029;&#38754;&#37117;&#28155;&#21152;&#30340;&#20004;&#26465;&#34394;&#25311;&#35760;&#24405;&#65292;&#20063;&#21487;&#20197;&#34987;&#31216;&#20316;&#20266;&#35760;&#24405;&#12290;Infimum&#35760;&#24405;&#21644;Supremum&#35760;&#24405;&#20998;&#21035;&#21344;&#29992;13&#23383;&#33410;&#30340;&#23384;&#20648;&#31354;&#38388;&#65292;&#34987;&#25918;&#32622;&#22312;&#39029;&#38754;&#20013;&#22266;&#23450;&#30340;&#20301;&#32622;&#12290;&#20854;&#20013;Infimum&#35760;&#24405;&#34987;&#30475;&#20316;&#26368;&#23567;&#30340;&#35760;&#24405;&#65292;Supremum&#35760;&#24405;&#34987;&#30475;&#20316;&#26368;&#22823;&#30340;&#35760;&#24405;&#65292;Infimum&#35760;&#24405;&#23646;&#20110;&#39029;&#38754;&#20013;&#30340;&#35760;&#24405;&#21333;&#21521;&#38142;&#34920;&#30340;&#22836;&#33410;&#28857;&#65292;Supremum&#35760;&#24405;&#23646;&#20110;&#39029;&#38754;&#20013;&#30340;&#35760;&#24405;&#21333;&#21521;&#38142;&#34920;&#30340;&#23614;&#33410;&#28857;&#12290;&#26356;&#22810;&#20851;&#20110;&#39029;&#38754;&#32467;&#26500;&#30340;&#20869;&#23481;&#23567;&#20249;&#20276;&#20204;&#21487;&#20197;&#21442;&#32771;&#12298;MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;&#65306;&#20174;&#26681;&#20799;&#19978;&#29702;&#35299;MySQL&#12299;&#20070;&#31821;&#21704;&#65374;
 </p>
</blockquote>
<h3>
 4. &#30495;&#27491;&#30340;&#21152;&#38145;&#27969;&#31243;&#25165;&#24320;&#22987;&#8212;&#8212;&#23545;&#31934;&#30830;&#21305;&#37197;&#30340;&#29305;&#27530;&#22788;&#29702;
</h3>
<p>
 &#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#19981;&#26159;
 <code>
  Infimum&#35760;&#24405;
 </code>
 &#25110;&#32773;
 <code>
  Supremum&#35760;&#24405;
 </code>
 &#65292;&#19979;&#36793;&#36827;&#20837;&#23545;&#21305;&#37197;&#27169;&#24335;&#26159;
 <code>
  &#31934;&#30830;&#21305;&#37197;
 </code>
 &#30340;&#19968;&#20010;&#29305;&#27530;&#22788;&#29702;&#65306;
</p>
<p>
 <img alt="" src="EPUB/497bac24-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#21487;&#20197;&#30475;&#21040;&#65292;&#23545;&#20110;&#21305;&#37197;&#27169;&#24335;&#26159;
 <code>
  &#31934;&#30830;&#21305;&#37197;
 </code>
 &#30340;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#22914;&#26524;&#25191;&#34892;&#26412;&#27425;
 <code>
  row_search_mvcc
 </code>
 &#33719;&#21462;&#21040;&#30340;&#35760;&#24405;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65288;0 != cmp_dtuple_rec(search_tuple, rec, offsets)&#65289;&#65292;&#21017;&#38656;&#35201;&#36827;&#34892;&#19968;&#20123;&#29305;&#27530;&#22788;&#29702;&#65292;&#21363;&#65306;
</p>
<p>
 &#23545;&#20110;&#21152;&#38145;&#35835;&#26469;&#35828;&#65292;&#22914;&#26524;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;Repeatable Read&#24182;&#19988;&#26410;&#24320;&#21551;
 <code>
  innodb_locks_unsafe_for_binlog
 </code>
 &#31995;&#32479;&#21464;&#37327;&#65292;&#37027;&#20040;&#23601;&#23545;&#35813;&#35760;&#24405;&#21152;&#19968;&#20010;
 <code>
  gap&#38145;
 </code>
 &#65292;&#24182;&#19988;&#30452;&#25509;&#36820;&#22238;&#65288;&#20195;&#30721;&#20013;&#30452;&#25509;&#36339;&#36716;&#21040;
 <code>
  normal_return
 </code>
 &#22788;&#65289;&#65292;&#23601;&#19981;&#36827;&#34892;&#21518;&#32493;&#30340;&#21152;&#38145;&#25805;&#20316;&#20102;&#12290;
</p>
<p>
 &#25105;&#20204;&#20030;&#19968;&#20010;&#20363;&#23376;&#65292;&#27604;&#26041;&#35828;&#24403;&#21069;&#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#20026;Repeatable Read&#65292;&#25191;&#34892;&#22914;&#19979;&#35821;&#21477;&#65306;
</p>
<pre><code>SELECT * FROM hero WHERE name = 's&#23385;&#26435;' FOR UPDATE;
</code></pre>
<p>
 &#22914;&#26524;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#65292;&#37027;&#20040;&#23545;&#24212;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
 <code>
  ['s&#23385;&#26435;', 's&#23385;&#26435;']
 </code>
 &#12290;&#35813;&#35821;&#21477;&#20250;&#39318;&#20808;&#23545;name&#20540;&#26159;
 <code>
  's&#23385;&#26435;'
 </code>
 &#30340;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#19981;&#36807;&#35813;&#35760;&#24405;&#26159;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#65292;&#19978;&#36848;&#20195;&#30721;&#24182;&#19981;&#22788;&#29702;&#36825;&#31181;&#27491;&#24120;&#24773;&#20917;&#65292;&#20851;&#20110;&#27491;&#24120;&#24773;&#20917;&#30340;&#21152;&#38145;&#25105;&#20204;&#31245;&#21518;&#20998;&#26512;&#12290;
</p>
<p>
 &#24403;&#35835;&#21462;&#23436;
 <code>
  's&#23385;&#26435;'
 </code>
 &#30340;&#35760;&#24405;&#21518;&#65292;InnoDB&#20250;&#26681;&#25454;&#35760;&#24405;&#30340;next_record&#23646;&#24615;&#25214;&#21040;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#21363;name&#20540;&#20026;
 <code>
  'x&#33600;&#24423;'
 </code>
 &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#35813;&#35760;&#24405;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;
 <code>
  ['s&#23385;&#26435;', 's&#23385;&#26435;']
 </code>
 &#20013;&#65292;&#21363;&#31526;&#21512;
 <code>
  0 != cmp_dtuple_rec(search_tuple, rec, offsets)
 </code>
 &#26465;&#20214;&#65292;&#37027;&#20040;&#23601;&#25191;&#34892;&#19978;&#36848;&#20195;&#30721;&#30340;&#21152;&#38145;&#27969;&#31243; &#8212;&#8212; &#23545;name&#20540;&#20026;
 <code>
  'x&#33600;&#24423;'
 </code>
 &#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#21152;&#19968;&#20010;gap&#38145;&#12290;&#21478;&#22806;&#65292;
 <code>
  err
 </code>
 &#34987;&#36171;&#20540;&#20026;
 <code>
  DB_RECORD_NOT_FOUND
 </code>
 &#65292;&#36825;&#24847;&#21619;&#30528;&#21521;server&#23618;&#25253;&#21578;&#24403;&#21069;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#37117;&#24050;&#32463;&#25195;&#25551;&#23436;&#20102;&#65292;server&#23618;&#22312;&#25910;&#21040;&#36825;&#20010;&#20449;&#24687;&#21518;&#23601;&#20250;&#20572;&#27490;&#21521;Innodb&#32034;&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#30340;&#35831;&#27714;&#65292;&#21363;&#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#36825;&#19968;&#27493;&#39588;&#26159;&#23545;&#31934;&#30830;&#21305;&#37197;&#30340;&#25195;&#25551;&#21306;&#38388;&#30340;&#19968;&#20010;&#29305;&#27530;&#22788;&#29702;&#65292;&#21363;&#24403;server&#23618;&#25910;&#21040;InnoDB&#36820;&#22238;&#30340;&#25195;&#25551;&#21306;&#38388;&#30340;&#26368;&#21518;&#19968;&#26465;&#35760;&#24405;&#65292;server&#23618;&#20173;&#20250;&#21521;InnoDB&#32034;&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#12290;InnoDB&#20173;&#20250;&#27839;&#30528;&#35760;&#24405;&#25152;&#22312;&#30340;&#38142;&#34920;&#21521;&#21518;&#35835;&#21462;&#65292;&#27492;&#27425;&#35835;&#21462;&#21040;&#30340;&#35760;&#24405;&#23601;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#20102;&#65292;&#22914;&#20363;&#23376;&#20013;&#30340;name&#20540;&#20026;'x&#33600;&#24423;'&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#23601;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;['s&#23385;&#26435;', 's&#23385;&#26435;']&#20013;&#12290;&#22914;&#26524;&#36825;&#26159;&#19968;&#20010;&#31934;&#30830;&#21305;&#37197;&#30340;&#25195;&#25551;&#21306;&#38388;&#65292;&#37027;&#20040;&#23601;&#36827;&#34892;&#22914;&#27493;&#39588;4&#25152;&#31034;&#30340;&#29305;&#27530;&#22788;&#29702;&#65292;&#22914;&#26524;&#19981;&#26159;&#30340;&#35805;&#65292;&#23601;&#32487;&#32493;&#25191;&#34892;&#31532;5&#27493;&#65292;&#20063;&#23601;&#26159;&#36208;&#27491;&#24120;&#30340;&#21152;&#38145;&#27969;&#31243;&#12290;
 </p>
</blockquote>
<h3>
 5. &#30495;&#27491;&#30340;&#21152;&#38145;&#27969;&#31243;&#25165;&#24320;&#22987;&#8212;&#8212;&#36825;&#22238;&#30495;&#30340;&#24320;&#22987;&#20102;
</h3>
<p>
 <img alt="" src="EPUB/49946e8a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#25105;&#20204;&#22312;&#20195;&#30721;&#20013;&#30011;&#20102;2&#20010;&#32418;&#26694;&#65292;&#36825;&#20004;&#20010;&#32418;&#26694;&#26159;&#23545;&#35760;&#24405;&#26159;&#19981;&#23545;&#35760;&#24405;&#21152;
 <code>
  gap&#38145;
 </code>
 &#30340;&#22330;&#26223;&#12290;&#25105;&#20204;&#20855;&#20307;&#30475;&#19968;&#19979;&#12290;
</p>
<p>
 &#23545;&#20110;
 <code>
  1&#21495;&#32418;&#26694;
 </code>
 &#26469;&#35828;&#65306;
</p>
<ul>
 <li>
  <p>
   set_also_gap_locks&#26159;FALSE&#65288;&#36825;&#20010;&#21464;&#37327;&#21482;&#22312;&#21069;&#36793;&#35774;&#32622;&#36807;&#65292;&#24403;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED&#30340;SELECT&#35821;&#21477;&#30340;&#21152;&#38145;&#35835;&#20250;&#35774;&#32622;&#20026;FALSE&#65292;&#21542;&#21017;&#20026;TRUE&#65289;
  </p>
 </li>
 <li>
  <p>
   &#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;
  </p>
 </li>
 <li>
  <p>
   &#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED
  </p>
 </li>
 <li>
  <p>
   &#21807;&#19968;&#24615;&#25628;&#32034;&#24182;&#19988;&#35813;&#35760;&#24405;&#30340;delete_flag&#19981;&#20026;1
  </p>
 </li>
 <li>
  <p>
   &#35813;&#32034;&#24341;&#26159;&#31354;&#38388;&#32034;&#24341;
  </p>
 </li>
</ul>
<p>
 &#20063;&#23601;&#26159;&#35828;&#21482;&#35201;&#19978;&#36793;&#20219;&#24847;&#19968;&#20010;&#26465;&#20214;&#25104;&#31435;&#65292;&#35813;&#35760;&#24405;&#23601;&#19981;&#24212;&#35813;&#34987;&#21152;
 <code>
  gap&#38145;
 </code>
 &#65292;&#32780;&#24212;&#35813;&#28155;&#21152;
 <code>
  &#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#12290;&#20854;&#20313;&#24773;&#20917;&#23601;&#24212;&#35813;&#21152;
 <code>
  next-key&#38145;
 </code>
 &#65288;gap&#38145;&#21644;&#27491;&#32463;&#35760;&#24405;&#38145;&#30340;&#21512;&#20307;&#65289;&#20102;&#12290;
</p>
<p>
 &#32039;&#25509;&#30528;
 <code>
  2&#21495;&#32418;&#26694;
 </code>
 &#23601;&#21448;&#21465;&#36848;&#20102;&#19968;&#20010;&#19981;&#21152;
 <code>
  gap&#38145;
 </code>
 &#30340;&#22330;&#26223;&#65306;
</p>
<p>
 <strong>
  &#23545;&#20110;
  <code>
   &gt;= &#20027;&#38190;
  </code>
  &#30340;&#36825;&#31181;&#36793;&#30028;&#26465;&#20214;&#26469;&#35828;&#65292;&#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#24688;&#22909;&#26159;&#24320;&#22987;&#36793;&#30028;&#65292;&#23601;&#20165;&#38656;&#23545;&#35813;&#35760;&#24405;&#21152;&#27491;&#32463;&#35760;&#24405;&#38145;&#65292;&#32780;&#19981;&#38656;&#28155;&#21152;gap&#38145;&#12290;
 </strong>
</p>
<p>
 <code>
  1&#21495;&#32418;&#26694;
 </code>
 &#30340;&#20869;&#23481;&#27604;&#36739;&#22909;&#29702;&#35299;&#65292;&#25105;&#20204;&#20030;&#20010;&#20363;&#23376;&#30475;&#19968;&#19979;
 <code>
  2&#21495;&#32418;&#26694;
 </code>
 &#26159;&#22312;&#35828;&#20160;&#20040;&#12290;&#27604;&#26041;&#35828;&#19979;&#36793;&#36825;&#20010;&#26597;&#35810;&#65306;
</p>
<pre><code>SELCT * FROM hero WHERE number &gt;= 8 FOR UPDATE;
</code></pre>
<p>
 &#25105;&#20204;&#20551;&#35774;&#36825;&#20010;&#35821;&#21477;&#22312;&#38548;&#31163;&#32423;&#21035;&#20026;REPEATABLE READ&#12290;
</p>
<p>
 &#24456;&#26174;&#28982;&#65292;&#20248;&#21270;&#22120;&#20250;&#25195;&#25551;
 <code>
  [8, +&#8734;)
 </code>
 &#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#12290;&#39318;&#20808;&#35201;&#36890;&#36807;B+&#26641;&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;
 <code>
  [8, +&#8734;)
 </code>
 &#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;number&#20540;&#20026;8&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#36825;&#26465;&#35760;&#24405;&#23601;&#26159;&#25195;&#25551;&#21306;&#38388;
 <code>
  [8, +&#8734;)
 </code>
 &#30340;&#24320;&#22987;&#36793;&#30028;&#35760;&#24405;&#12290;&#25353;&#29702;&#35828;&#22312;REPEATABLE READ&#38548;&#31163;&#32423;&#21035;&#19979;&#24212;&#35813;&#28155;&#21152;
 <code>
  next-key&#38145;
 </code>
 &#65292;&#20294;&#30001;&#20110;
 <code>
  2&#21495;&#32418;&#26694;
 </code>
 &#20013;&#20195;&#30721;&#30340;&#23384;&#22312;&#65292;&#20165;&#20250;&#32473;number&#20540;&#20026;8&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#28155;&#21152;
 <code>
  &#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  2&#21495;&#26041;&#26694;&#30340;&#20248;&#21270;&#20027;&#35201;&#26159;&#22522;&#20110;&#8220;&#20027;&#38190;&#20540;&#26159;&#21807;&#19968;&#30340;&#8221;&#36825;&#26465;&#32422;&#26463;&#65292;&#22312;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#20102;&#19978;&#36848;&#26597;&#35810;&#20043;&#21518;&#65292;&#20854;&#20182;&#20107;&#21153;&#26159;&#19981;&#33021;&#25554;&#20837;number&#20540;&#20026;8&#30340;&#35760;&#24405;&#30340;&#65292;&#36825;&#20063;&#29992;&#19981;&#30528;gap&#38145;&#20102;&#12290;
 </p>
</blockquote>
<p>
 &#38500;&#20102;
 <code>
  1&#21495;&#26041;&#26694;
 </code>
 &#21644;
 <code>
  2&#21495;&#26041;&#26694;
 </code>
 &#30340;&#22330;&#26223;&#65292;&#20854;&#20313;&#22330;&#26223;&#37117;&#32473;&#35760;&#24405;&#21152;
 <code>
  next-key&#38145;
 </code>
 &#23601;&#22909;&#21949;&#65374;
</p>
<h3>
 6. &#21028;&#26029;&#32034;&#24341;&#26465;&#20214;&#19979;&#25512;&#30340;&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;
</h3>
<p>
 &#22914;&#26524;&#26159;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#25191;&#34892;&#26597;&#35810;&#65292;&#24182;&#19988;&#26377;&#32034;&#24341;&#26465;&#20214;&#19979;&#25512;&#65288;Index Condition Pushdown&#65292;&#31616;&#31216;ICP&#65289;&#30340;&#26465;&#20214;&#30340;&#35805;&#65292;&#21028;&#26029;&#19979;&#25512;&#30340;&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;&#65306;
</p>
<p>
 <img alt="" src="EPUB/49a5ea7a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#36825;&#37324;&#22823;&#23478;&#29305;&#21035;&#27880;&#24847;&#19968;&#19979;&#65292;&#22312;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;&#25191;&#34892;&#26597;&#35810;&#65292;&#23545;&#20110;&#38750;&#31934;&#30830;&#21305;&#37197;&#30340;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#24418;&#25104;&#25195;&#25551;&#21306;&#38388;&#30340;&#36793;&#30028;&#26465;&#20214;&#20063;&#20250;&#34987;&#24403;&#20316;ICP&#26465;&#20214;&#19979;&#25512;&#21040;&#23384;&#20648;&#24341;&#25806;&#21028;&#26029;&#65292;&#27604;&#26041;&#35828;&#19979;&#36793;&#36825;&#20010;&#26597;&#35810;&#65306;
</p>
<pre><code>mysql&gt; EXPLAIN SELECT * FROM hero WHERE name &gt; 's&#23385;&#26435;' AND name &lt; 'z&#35832;&#33883;&#20142;' FOR UPDATE;
+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+
| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref  | rows | filtered | Extra                 |
+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+
|  1 | SIMPLE      | hero  | NULL       | range | idx_name      | idx_name | 303     | NULL |    1 |   100.00 | Using index condition |
+----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+
1 row in set, 1 warning (0.03 sec)
</code></pre>
<p>
 &#21487;&#20197;&#30475;&#21040;&#20248;&#21270;&#22120;&#20915;&#23450;&#20351;&#29992;idx_name&#25191;&#34892;&#19978;&#36848;&#26597;&#35810;&#65292;&#23545;&#24212;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
 <code>
  ('s&#23385;&#26435;', 'z&#35832;&#33883;&#20142;')
 </code>
 &#65292;&#24418;&#25104;&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#30340;&#36793;&#30028;&#26465;&#20214;&#23601;&#26159;
 <code>
  name &gt; 's&#23385;&#26435;' AND name &lt; 'z&#35832;&#33883;&#20142;'
 </code>
 &#12290;&#22312;&#25191;&#34892;&#35745;&#21010;&#30340;Extra&#21015;&#20013;&#20986;&#29616;&#20102;
 <code>
  Using index condition
 </code>
 &#65292;&#34920;&#26126;&#23558;&#36793;&#30028;&#26465;&#20214;
 <code>
  name &gt; 's&#23385;&#26435;' AND name &lt; 'z&#35832;&#33883;&#20142;'
 </code>
 &#20316;&#20026;ICP&#26465;&#20214;&#19979;&#25512;&#21040;&#20102;&#23384;&#20648;&#24341;&#25806;&#12290;
</p>
<p>
 &#19981;&#19979;&#25512;&#19981;&#35201;&#32039;&#65292;&#19968;&#19979;&#25512;&#30340;&#35805;
 <code>
  row_search_idx_cond_check
 </code>
 &#23601;&#20250;&#21028;&#26029;&#24403;&#21069;&#35760;&#24405;&#26159;&#21542;&#24050;&#32463;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#20102;&#65292;&#22914;&#26524;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#35805;&#65292;&#35813;&#20989;&#25968;&#23601;&#20250;&#36820;&#22238;
 <code>
  ICP_OUT_OF_RANGE
 </code>
 &#12290;&#36825;&#26679;&#30340;&#35805;&#65292;
 <code>
  err
 </code>
 &#34987;&#36171;&#20540;&#20026;
 <code>
  DB_RECORD_NOT_FOUND
 </code>
 &#65292;&#36825;&#24847;&#21619;&#30528;&#21521;server&#23618;&#25253;&#21578;&#24403;&#21069;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#37117;&#24050;&#32463;&#25195;&#25551;&#23436;&#20102;&#65292;server&#23618;&#22312;&#25910;&#21040;&#36825;&#20010;&#20449;&#24687;&#21518;&#23601;&#20250;&#20572;&#27490;&#21521;Innodb&#32034;&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#30340;&#35831;&#27714;&#65292;&#21363;&#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;&#12290;
</p>
<p>
 &#24403;&#28982;&#65292;&#22914;&#26524;&#26412;&#27425;&#26597;&#35810;&#27809;&#26377;ICP&#26465;&#20214;&#65292;
 <code>
  row_search_idx_cond_check
 </code>
 &#30452;&#25509;&#36820;&#22238;
 <code>
  ICP_MATCH
 </code>
 &#65292;&#37027;&#23601;&#27809;&#26377;&#19978;&#36848;&#30340;&#40635;&#28902;&#20107;&#20799;&#65292;&#32487;&#32493;&#21521;&#19979;&#36208;&#12290;
</p>
<h3>
 7. &#22238;&#34920;&#23545;&#35760;&#24405;&#21152;&#38145;
</h3>
<p>
 &#22914;&#26524;
 <code>
  row_search_mvcc
 </code>
 &#35835;&#21462;&#30340;&#26159;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#21017;&#36824;&#38656;&#36827;&#34892;&#22238;&#34920;&#65292;&#25214;&#21040;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21518;&#38656;&#23545;&#35813;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;&#19968;&#20010;
 <code>
  &#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#65306;
</p>
<p>
 <img alt="" src="EPUB/49b37352-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;&#65292;
 <code>
  row_sel_get_clust_rec_for_mysql
 </code>
 &#20415;&#26159;&#29992;&#20110;&#22238;&#34920;&#30340;&#20989;&#25968;&#65292;&#23545;&#32858;&#31751;&#32034;&#24341;&#36827;&#34892;&#21152;&#38145;&#30340;&#36923;&#36753;&#22312;&#35813;&#20989;&#25968;&#20013;&#23454;&#29616;&#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#19981;&#23637;&#24320;&#20102;&#12290;
</p>
<p>
 &#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#21363;&#20351;&#26159;&#23545;&#20110;&#35206;&#30422;&#32034;&#24341;&#30340;&#22330;&#26223;&#19979;&#65292;&#22914;&#26524;&#25105;&#20204;&#24819;&#23545;&#35760;&#24405;&#21152;X&#22411;&#38145;&#65288;&#20063;&#23601;&#26159;&#20351;&#29992;SELECT ... FOR UPDATE&#12289;DELETE&#12289;UPDATE&#35821;&#21477;&#26102;&#65289;&#26102;&#65292;&#20063;&#38656;&#35201;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#25191;&#34892;&#22238;&#34920;&#25805;&#20316;&#65292;&#24182;&#32473;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#28155;&#21152;
 <code>
  &#27491;&#32463;&#35760;&#24405;&#38145;
 </code>
 &#12290;
</p>
<p>
 <img alt="" src="EPUB/49c3e8b8-13d6-11ed-838d-acde48001122">
</p>
<h3>
 8. row_search_mvcc&#36820;&#22238;&#65292;&#21028;&#26029;&#26159;&#21542;&#24050;&#32463;&#21040;&#36798;&#36793;&#30028;
</h3>
<p>
 &#27599;&#24403;&#22788;&#29702;&#23436;&#19968;&#26465;&#35760;&#24405;&#21518;&#65292;&#36824;&#38656;&#35201;&#21028;&#26029;&#19968;&#19979;&#36825;&#26465;&#35760;&#24405;&#36824;&#22312;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65292;&#21028;&#26029;&#30340;&#20195;&#30721;&#22914;&#19979;&#65306;
</p>
<p>
 <img alt="" src="EPUB/49da072e-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#36824;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65292;&#23601;&#32473;server&#23618;&#27491;&#24120;&#36820;&#22238;&#65292;&#22914;&#26524;&#19981;&#22312;&#20102;&#65292;&#23601;&#32473;server&#23618;&#36820;&#22238;&#19968;&#20010;
 <code>
  HA_ERR_END_OF_FILE
 </code>
 &#20449;&#24687;&#65292;&#34920;&#31034;&#24403;&#21069;&#25195;&#25551;&#21306;&#38388;&#30340;&#35760;&#24405;&#37117;&#24050;&#32463;&#25195;&#25551;&#23436;&#20102;&#65292;server&#23618;&#22312;&#25910;&#21040;&#36825;&#20010;&#20449;&#24687;&#21518;&#23601;&#20250;&#20572;&#27490;&#21521;Innodb&#32034;&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#30340;&#35831;&#27714;&#65292;&#21363;&#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#20043;&#21069;&#22312;&#22788;&#29702;&#31934;&#30830;&#21305;&#37197;&#20197;&#21450;ICP&#26465;&#20214;&#26102;&#21487;&#33021;&#25226;err&#21464;&#37327;&#36171;&#20540;&#20026;DB_RECORD_NOT_FOUND&#65292;&#20854;&#23454;&#21518;&#32493;&#20195;&#30721;&#20250;&#23558;&#36825;&#31181;&#24773;&#20917;&#20063;&#36716;&#25442;&#20026;&#32473;server&#23618;&#36820;&#22238;HA_ERR_END_OF_FILE&#20449;&#24687;&#12290;
 </p>
</blockquote>
<h3>
 9. &#28982;&#21518;&#65292;&#20877;&#22788;&#29702;&#19979;&#19968;&#26465;&#35760;&#24405;
</h3>
<p>
 server&#23618;&#25910;&#21040;InnoDB&#30340;&#19968;&#26465;&#35760;&#24405;&#21518;&#65292;&#22914;&#26524;&#25910;&#21040;InnoDB&#36890;&#30693;&#30340;&#26412;&#25195;&#25551;&#21306;&#38388;&#24050;&#32463;&#25195;&#25551;&#23436;&#27605;&#30340;&#20449;&#24687;&#65292;&#21017;&#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;&#65307;&#21542;&#21017;&#32487;&#32493;&#21521;InnoDB&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#65292;&#20063;&#23601;&#26159;&#38656;&#35201;&#32487;&#32493;&#25191;&#34892;&#19968;&#36941;
 <code>
  row_search_mvcc
 </code>
 &#20989;&#25968;&#20102;&#12290;
</p>
<p>
 &#19981;&#36807;&#27492;&#26102;&#24182;&#19981;&#26159;&#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#65292;&#32780;&#26159;&#26681;&#25454;&#35760;&#24405;&#25152;&#22312;&#30340;&#38142;&#34920;&#21435;&#21462;&#19979;&#19968;&#26465;&#35760;&#24405;&#21363;&#21487;&#65292;&#25152;&#20197;&#30452;&#25509;&#20174;&#27493;&#39588;3&#24320;&#22987;&#25191;&#34892;&#23601;&#22909;&#20102;&#65292;&#21448;&#24320;&#22987;&#20102;&#26032;&#30340;&#19968;&#26465;&#35760;&#24405;&#30340;&#21152;&#38145;&#27969;&#31243;&#12290;&#12290;&#12290;
</p>
<p>
 &#24490;&#29615;&#24448;&#22797;&#65292;&#30452;&#21040;server&#23618;&#25910;&#21040;&#26412;&#25195;&#25551;&#21306;&#38388;&#25152;&#26377;&#35760;&#24405;&#37117;&#25195;&#25551;&#23436;&#20102;&#30340;&#20449;&#24687;&#20026;&#27490;&#12290;
</p>
<h2>
 &#36824;&#26377;&#19968;&#20123;&#37322;&#25918;&#38145;&#30340;&#22330;&#26223;
</h2>
<p>
 &#22823;&#23478;&#22312;
 <code>
  &#27493;&#39588;8
 </code>
 &#21028;&#26029;&#24403;&#21069;&#35760;&#24405;&#26159;&#21542;&#24050;&#32463;&#19981;&#20877;&#25195;&#25551;&#21306;&#38388;&#20013;&#26102;&#21487;&#20197;&#30475;&#21040;&#65292;&#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65292;&#20250;&#25191;&#34892;&#19968;&#20010;
 <code>
  unlock_row
 </code>
 &#30340;&#20989;&#25968;&#65292;&#36825;&#20010;&#20989;&#25968;&#20027;&#35201;&#26159;&#29992;&#20110;&#22312;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED&#26102;&#37322;&#25918;&#24403;&#21069;&#35760;&#24405;&#19978;&#30340;&#38145;&#65288;&#22914;&#26524;&#26159;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36824;&#35201;&#37322;&#25918;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#19978;&#30340;&#38145;&#65289;&#12290;
</p>
<p>
 &#37322;&#25918;&#38145;&#30340;&#22330;&#26223;&#24182;&#19981;&#26159;&#21482;&#26377;&#36825;&#20040;&#19968;&#20010;&#65292;&#22312;
 <code>
  row_search_mvcc
 </code>
 &#20013;&#20063;&#26377;&#20960;&#22788;&#37322;&#25918;&#38145;&#30340;&#22330;&#26223;&#65292;&#25105;&#20204;&#36825;&#37324;&#23601;&#19981;&#22810;&#21792;&#21480;&#20102;&#12290;
</p>
<h2>
 &#24635;&#32467;&#19968;&#19979;
</h2>
<p>
 &#20854;&#23454;&#22823;&#23478;&#20877;&#22238;&#22836;&#30475;
 <code>
  row_search_mvcc
 </code>
 &#37324;&#30340;&#20851;&#20110;&#21152;&#38145;&#30340;&#20195;&#30721;&#23601;&#20250;&#21457;&#29616;&#65292;&#20854;&#23454;&#27969;&#31243;&#36824;&#26159;&#24456;&#31616;&#21333;&#30340;&#65306;
</p>
<ul>
 <li>
  <p>
   &#27493;&#39588;1. &#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;2. &#22914;&#26524;&#25195;&#25551;&#21306;&#38388;&#26159;&#20174;&#21491;&#21040;&#24038;&#25195;&#25551;&#65292;&#37027;&#20040;&#38656;&#35201;&#32473;&#25195;&#25551;&#21306;&#38388;&#26368;&#21491;&#36793;&#30340;&#35760;&#24405;&#30340;&#19979;&#19968;&#26465;&#35760;&#24405;&#28155;&#21152;&#19968;&#20010;gap&#38145;&#65288;&#22312;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;
   <code>
    REPEATABLE READ
   </code>
   &#24182;&#19988;&#20063;&#27809;&#26377;&#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;3. &#23545;&#20110;
   <code>
    Infimum&#35760;&#24405;
   </code>
   &#26159;&#19981;&#21152;&#38145;&#30340;&#65292;&#23545;&#20110;
   <code>
    Supremum&#35760;&#24405;
   </code>
   &#21152;
   <code>
    next-key&#38145;
   </code>
   &#65288;&#22312;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;
   <code>
    REPEATABLE READ
   </code>
   &#24182;&#19988;&#20063;&#27809;&#26377;&#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;4. &#23545;&#20110;&#31934;&#30830;&#21305;&#37197;&#30340;&#25195;&#25551;&#21306;&#38388;&#26469;&#35828;&#65292;&#24403;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#35760;&#24405;&#37117;&#34987;&#35835;&#23436;&#21518;&#65292;&#38656;&#23545;&#25195;&#25551;&#21306;&#38388;&#21518;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#21152;&#19968;&#20010;gap&#38145;&#21363;&#21487;&#65292;&#24182;&#19988;&#21521;server&#23618;&#36820;&#22238;&#21487;
   <strong>
    &#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;
   </strong>
   &#30340;&#20449;&#24687;&#65288;&#22312;&#38548;&#31163;&#32423;&#21035;&#19981;&#23567;&#20110;
   <code>
    REPEATABLE READ
   </code>
   &#24182;&#19988;&#20063;&#27809;&#26377;&#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;&#30340;&#24773;&#20917;&#19979;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;5. &#20107;&#21153;&#30340;&#38548;&#31163;&#32423;&#21035;&#19981;&#22823;&#20110;READ COMMITTED&#65292;&#24320;&#21551;
   <code>
    innodb_locks_unsafe_for_binlog
   </code>
   &#31995;&#32479;&#21464;&#37327;&#65292;&#21807;&#19968;&#24615;&#25628;&#32034;&#24182;&#19988;&#35813;&#35760;&#24405;&#30340;delete_flag&#19981;&#20026;1&#65292;&#23545;&#20110;
   <code>
    &gt;= &#20027;&#38190;
   </code>
   &#30340;&#36825;&#31181;&#36793;&#30028;&#26465;&#20214;&#26469;&#35828;&#65292;&#24403;&#21069;&#35760;&#24405;&#24688;&#22909;&#26159;&#24320;&#22987;&#36793;&#30028;&#35760;&#24405;&#65292;&#21017;&#23545;&#35760;&#24405;&#21152;
   <code>
    &#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65292;&#21542;&#21017;&#28155;&#21152;
   <code>
    next-key&#38145;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;6. &#21028;&#26029;ICP&#26465;&#20214;&#26159;&#21542;&#25104;&#31435;&#12290;&#22914;&#26524;&#24403;&#21069;&#35760;&#24405;&#26159;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#24182;&#19988;&#24050;&#32463;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65292;&#21017;&#21521;server&#23618;&#36820;&#22238;&#21487;
   <strong>
    &#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;
   </strong>
   &#30340;&#20449;&#24687;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;7. &#22914;&#26524;&#23545;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#36827;&#34892;&#21152;&#38145;&#65292;&#36824;&#38656;&#35201;&#23545;&#30456;&#24212;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21152;
   <code>
    &#27491;&#32463;&#35760;&#24405;&#38145;
   </code>
   &#65288;&#20351;&#29992;&#35206;&#30422;&#32034;&#24341;&#65292;&#24182;&#19988;&#21152;S&#22411;&#38145;&#30340;&#35760;&#24405;&#21487;&#36339;&#36807;&#27492;&#27493;&#39588;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;8. &#21028;&#26029;&#24403;&#21069;&#35760;&#24405;&#26159;&#21542;&#24050;&#19981;&#22312;&#25195;&#25551;&#21306;&#38388;&#20013;&#65292;&#22914;&#26524;&#19981;&#22312;&#30340;&#35805;&#65292;&#21017;&#21521;server&#36820;&#22238;&#21487;
   <strong>
    &#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;
   </strong>
   &#30340;&#20449;&#24687;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;9. &#22914;&#26524;server&#23618;&#25910;&#21040;&#21487;
   <strong>
    &#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;
   </strong>
   &#30340;&#20449;&#24687;&#65292;&#21017;&#32467;&#26463;&#26412;&#25195;&#25551;&#21306;&#38388;&#30340;&#26597;&#35810;&#65292;&#21542;&#21017;&#32487;&#32493;&#21521;InnoDB&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#65292;InnoDB&#26681;&#25454;&#35760;&#24405;&#25152;&#22312;&#30340;&#38142;&#34920;&#33719;&#21462;&#21040;&#19979;&#19968;&#26465;&#35760;&#24405;&#21518;&#65292;&#20174;
   <code>
    &#27493;&#39588;3
   </code>
   &#24320;&#22987;&#26032;&#19968;&#36718;&#30340;&#36718;&#22238;&#12290;
  </p>
 </li>
</ul>
<p>
 &#22909;&#20102;&#65292;&#21040;&#29616;&#22312;&#20026;&#27490;&#22823;&#23478;&#24212;&#35813;&#26126;&#30333;&#20026;&#20160;&#20040;&#26368;&#24320;&#22987;&#35828;&#30340;&#21363;&#20351;&#26159;&#20840;&#34920;&#25195;&#25551;&#30340;&#21152;&#38145;&#35835;&#65292;&#21152;&#30340;&#20063;&#26159;&#34892;&#38145;&#32780;&#19981;&#26159;&#34920;&#38145;&#20102;&#12290;&#22312;&#20351;&#29992;InnoDB&#23384;&#20648;&#24341;&#25806;&#26102;&#65292;&#24403;&#36827;&#34892;&#20840;&#34920;&#25195;&#25551;&#26102;&#65292;&#20854;&#23454;&#23601;&#26159;&#30456;&#24403;&#20110;&#25195;&#25551;&#20027;&#38190;&#20540;&#22312;(-&#8734;, +&#8734;)&#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#38024;&#23545;&#27599;&#19968;&#26465;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#37117;&#38656;&#35201;&#25191;&#34892;&#19968;&#27425;
 <code>
  row_search_mvcc
 </code>
 &#20989;&#25968;&#65292;&#37117;&#38656;&#35201;&#36827;&#34892;&#22914;&#19978;&#25152;&#36848;&#30340;&#21508;&#31181;&#21028;&#26029;&#65292;&#26368;&#21518;&#20915;&#23450;&#32473;&#25195;&#25551;&#30340;&#35760;&#24405;&#21152;&#20160;&#20040;&#38145;&#12290;
</p>
</div>

</div>
</div>

        </body>
        
        