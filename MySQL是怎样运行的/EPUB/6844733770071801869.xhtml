<div><div class="markdown-body">
    <h1>&#21518;&#24724;&#20102;&#24590;&#20040;&#21150; &#8212;&#8212; undo &#26085;&#24535; (&#19979;)</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1 class="heading">
 undo&#26085;&#24535;&#65288;&#19979;&#65289;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<hr>
<p>
 &#19978;&#19968;&#31456;&#25105;&#20204;&#20027;&#35201;&#21792;&#21480;&#20102;&#20026;&#20160;&#20040;&#38656;&#35201;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#20197;&#21450;
 <code>
  INSERT
 </code>
 &#12289;
 <code>
  DELETE
 </code>
 &#12289;
 <code>
  UPDATE
 </code>
 &#36825;&#20123;&#20250;&#23545;&#25968;&#25454;&#20570;&#25913;&#21160;&#30340;&#35821;&#21477;&#37117;&#20250;&#20135;&#29983;&#20160;&#20040;&#31867;&#22411;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#36824;&#26377;&#19981;&#21516;&#31867;&#22411;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#30340;&#20855;&#20307;&#26684;&#24335;&#26159;&#20160;&#20040;&#12290;&#26412;&#31456;&#20250;&#32487;&#32493;&#21792;&#21480;&#36825;&#20123;
 <code>
  undo&#26085;&#24535;
 </code>
 &#20250;&#34987;&#20855;&#20307;&#20889;&#21040;&#20160;&#20040;&#22320;&#26041;&#65292;&#20197;&#21450;&#22312;&#20889;&#20837;&#36807;&#31243;&#20013;&#38656;&#35201;&#27880;&#24847;&#30340;&#19968;&#20123;&#38382;&#39064;&#12290;
</p>
<h2 class="heading">
 &#36890;&#29992;&#38142;&#34920;&#32467;&#26500;
</h2>
<p>
 &#22312;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#30340;&#36807;&#31243;&#20013;&#20250;&#20351;&#29992;&#21040;&#22810;&#20010;&#38142;&#34920;&#65292;&#24456;&#22810;&#38142;&#34920;&#37117;&#26377;&#21516;&#26679;&#30340;&#33410;&#28857;&#32467;&#26500;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d79gnaudfg2psk2l7mi1146r20.png-104.8kB" src="EPUB/3b4bdb1a-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#22312;&#26576;&#20010;&#34920;&#31354;&#38388;&#20869;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#19968;&#20010;&#39029;&#30340;&#39029;&#21495;&#21644;&#22312;&#39029;&#20869;&#30340;&#20559;&#31227;&#37327;&#26469;&#21807;&#19968;&#23450;&#20301;&#19968;&#20010;&#33410;&#28857;&#30340;&#20301;&#32622;&#65292;&#36825;&#20004;&#20010;&#20449;&#24687;&#20063;&#23601;&#30456;&#24403;&#20110;&#25351;&#21521;&#36825;&#20010;&#33410;&#28857;&#30340;&#19968;&#20010;&#25351;&#38024;&#12290;&#25152;&#20197;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    Pre Node Page Number
   </code>
   &#21644;
   <code>
    Pre Node Offset
   </code>
   &#30340;&#32452;&#21512;&#23601;&#26159;&#25351;&#21521;&#21069;&#19968;&#20010;&#33410;&#28857;&#30340;&#25351;&#38024;
  </p>
 </li>
 <li>
  <p>
   <code>
    Next Node Page Number
   </code>
   &#21644;
   <code>
    Next Node Offset
   </code>
   &#30340;&#32452;&#21512;&#23601;&#26159;&#25351;&#21521;&#21518;&#19968;&#20010;&#33410;&#28857;&#30340;&#25351;&#38024;&#12290;
  </p>
 </li>
</ul>
<p>
 &#25972;&#20010;
 <code>
  List Node
 </code>
 &#21344;&#29992;
 <code>
  12
 </code>
 &#20010;&#23383;&#33410;&#30340;&#23384;&#20648;&#31354;&#38388;&#12290;
</p>
<p>
 &#20026;&#20102;&#26356;&#22909;&#30340;&#31649;&#29702;&#38142;&#34920;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#36824;&#25552;&#20986;&#20102;&#19968;&#20010;&#22522;&#33410;&#28857;&#30340;&#32467;&#26500;&#65292;&#37324;&#36793;&#23384;&#20648;&#20102;&#36825;&#20010;&#38142;&#34920;&#30340;
 <code>
  &#22836;&#33410;&#28857;
 </code>
 &#12289;
 <code>
  &#23614;&#33410;&#28857;
 </code>
 &#20197;&#21450;&#38142;&#34920;&#38271;&#24230;&#20449;&#24687;&#65292;&#22522;&#33410;&#28857;&#30340;&#32467;&#26500;&#31034;&#24847;&#22270;&#22914;&#19979;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d79o8ra61jh6k0k6af13vpg329.png-103.9kB" src="EPUB/3b5ff7bc-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#20854;&#20013;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    List Length
   </code>
   &#34920;&#26126;&#35813;&#38142;&#34920;&#19968;&#20849;&#26377;&#22810;&#23569;&#33410;&#28857;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    First Node Page Number
   </code>
   &#21644;
   <code>
    First Node Offset
   </code>
   &#30340;&#32452;&#21512;&#23601;&#26159;&#25351;&#21521;&#38142;&#34920;&#22836;&#33410;&#28857;&#30340;&#25351;&#38024;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    Last Node Page Number
   </code>
   &#21644;
   <code>
    Last Node Offset
   </code>
   &#30340;&#32452;&#21512;&#23601;&#26159;&#25351;&#21521;&#38142;&#34920;&#23614;&#33410;&#28857;&#30340;&#25351;&#38024;&#12290;
  </p>
 </li>
</ul>
<p>
 &#25972;&#20010;
 <code>
  List Base Node
 </code>
 &#21344;&#29992;
 <code>
  16
 </code>
 &#20010;&#23383;&#33410;&#30340;&#23384;&#20648;&#31354;&#38388;&#12290;
</p>
<p>
 &#25152;&#20197;&#20351;&#29992;
 <code>
  List Base Node
 </code>
 &#21644;
 <code>
  List Node
 </code>
 &#36825;&#20004;&#20010;&#32467;&#26500;&#32452;&#25104;&#30340;&#38142;&#34920;&#30340;&#31034;&#24847;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d79nq0ge1gn7pmcaa7gma1uh62q.png-71kB" src="EPUB/3b763ebe-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<blockquote class="warning">
 <p>
  &#23567;&#36148;&#22763;&#65306;

&#19978;&#36848;&#38142;&#34920;&#32467;&#26500;&#25105;&#20204;&#22312;&#21069;&#36793;&#30340;&#25991;&#31456;&#20013;&#39057;&#39057;&#25552;&#21040;&#65292;&#23588;&#20854;&#26159;&#22312;&#34920;&#31354;&#38388;&#37027;&#19968;&#31456;&#37325;&#28857;&#25551;&#36848;&#36807;&#65292;&#19981;&#36807;&#25105;&#19981;&#25954;&#22882;&#27714;&#22823;&#23478;&#37117;&#35760;&#20303;&#20102;&#65292;&#25152;&#20197;&#22312;&#36825;&#37324;&#21448;&#24378;&#35843;&#19968;&#36941;&#65292;&#24076;&#26395;&#22823;&#23478;&#19981;&#35201;&#23244;&#25105;&#28902;&#65292;&#25105;&#21482;&#26159;&#24597;&#22823;&#23478;&#24536;&#20102;&#23398;&#20064;&#21518;&#32493;&#20869;&#23481;&#21507;&#21147;&#32780;&#24050;&#65374;
 </p>
</blockquote>
<h2 class="heading">
 FIL_PAGE_UNDO_LOG&#39029;&#38754;
</h2>
<p>
 &#25105;&#20204;&#21069;&#36793;&#21792;&#21480;&#34920;&#31354;&#38388;&#30340;&#26102;&#20505;&#35828;&#36807;&#65292;&#34920;&#31354;&#38388;&#20854;&#23454;&#26159;&#30001;&#35768;&#35768;&#22810;&#22810;&#30340;&#39029;&#38754;&#26500;&#25104;&#30340;&#65292;&#39029;&#38754;&#40664;&#35748;&#22823;&#23567;&#20026;
 <code>
  16KB
 </code>
 &#12290;&#36825;&#20123;&#39029;&#38754;&#26377;&#19981;&#21516;&#30340;&#31867;&#22411;&#65292;&#27604;&#22914;&#31867;&#22411;&#20026;
 <code>
  FIL_PAGE_INDEX
 </code>
 &#30340;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;&#32858;&#31751;&#32034;&#24341;&#20197;&#21450;&#20108;&#32423;&#32034;&#24341;&#65292;&#31867;&#22411;&#20026;
 <code>
  FIL_PAGE_TYPE_FSP_HDR
 </code>
 &#30340;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;&#34920;&#31354;&#38388;&#22836;&#37096;&#20449;&#24687;&#30340;&#65292;&#36824;&#26377;&#20854;&#20182;&#21508;&#31181;&#31867;&#22411;&#30340;&#39029;&#38754;&#65292;&#20854;&#20013;&#26377;&#19968;&#31181;&#31216;&#20043;&#20026;
 <code>
  FIL_PAGE_UNDO_LOG
 </code>
 &#31867;&#22411;&#30340;&#39029;&#38754;&#26159;&#19987;&#38376;&#29992;&#26469;&#23384;&#20648;
 <code>
  undo&#26085;&#24535;
 </code>
 &#30340;&#65292;&#36825;&#31181;&#31867;&#22411;&#30340;&#39029;&#38754;&#30340;&#36890;&#29992;&#32467;&#26500;&#22914;&#19979;&#22270;&#25152;&#31034;&#65288;&#20197;&#40664;&#35748;&#30340;
 <code>
  16KB
 </code>
 &#22823;&#23567;&#20026;&#20363;&#65289;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d79ec33apm47brq901sur3bi16.png-63.2kB" src="EPUB/3bc29e12-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#8220;&#31867;&#22411;&#20026;
 <code>
  FIL_PAGE_UNDO_LOG
 </code>
 &#30340;&#39029;&#8221;&#36825;&#31181;&#35828;&#27861;&#22826;&#32469;&#21475;&#65292;&#20197;&#21518;&#25105;&#20204;&#23601;&#31616;&#31216;&#20026;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20102;&#21704;&#12290;&#19978;&#22270;&#20013;&#30340;
 <code>
  File Header
 </code>
 &#21644;
 <code>
  File Trailer
 </code>
 &#26159;&#21508;&#31181;&#39029;&#38754;&#37117;&#26377;&#30340;&#36890;&#29992;&#32467;&#26500;&#65292;&#25105;&#20204;&#21069;&#36793;&#21792;&#21480;&#36807;&#24456;&#22810;&#36941;&#20102;&#65292;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#65288;&#24536;&#35760;&#20102;&#30340;&#21487;&#20197;&#21040;&#35762;&#36848;&#25968;&#25454;&#39029;&#32467;&#26500;&#25110;&#32773;&#34920;&#31354;&#38388;&#30340;&#31456;&#33410;&#20013;&#26597;&#30475;&#65289;&#12290;
 <code>
  Undo Page Header
 </code>
 &#26159;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#25152;&#29305;&#26377;&#30340;&#65292;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;&#23427;&#30340;&#32467;&#26500;&#65306;
</p>
<p>
</p>
<figure>
 <img src="EPUB/3bd770d0-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#20854;&#20013;&#21508;&#20010;&#23646;&#24615;&#30340;&#24847;&#24605;&#22914;&#19979;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    TRX_UNDO_PAGE_TYPE
   </code>
   &#65306;&#26412;&#39029;&#38754;&#20934;&#22791;&#23384;&#20648;&#20160;&#20040;&#31181;&#31867;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#12290;
  </p>
  <p>
   &#25105;&#20204;&#21069;&#36793;&#20171;&#32461;&#20102;&#22909;&#20960;&#31181;&#31867;&#22411;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#23427;&#20204;&#21487;&#20197;&#34987;&#20998;&#20026;&#20004;&#20010;&#22823;&#31867;&#65306;
  </p>
  <ul>
   <li>
    <p>
     <code>
      TRX_UNDO_INSERT
     </code>
     &#65288;&#20351;&#29992;&#21313;&#36827;&#21046;
     <code>
      1
     </code>
     &#34920;&#31034;&#65289;&#65306;&#31867;&#22411;&#20026;
     <code>
      TRX_UNDO_INSERT_REC
     </code>
     &#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#23646;&#20110;&#27492;&#22823;&#31867;&#65292;&#19968;&#33324;&#30001;
     <code>
      INSERT
     </code>
     &#35821;&#21477;&#20135;&#29983;&#65292;&#25110;&#32773;&#22312;
     <code>
      UPDATE
     </code>
     &#35821;&#21477;&#20013;&#26377;&#26356;&#26032;&#20027;&#38190;&#30340;&#24773;&#20917;&#20063;&#20250;&#20135;&#29983;&#27492;&#31867;&#22411;&#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     <code>
      TRX_UNDO_UPDATE
     </code>
     &#65288;&#20351;&#29992;&#21313;&#36827;&#21046;
     <code>
      2
     </code>
     &#34920;&#31034;&#65289;&#65292;&#38500;&#20102;&#31867;&#22411;&#20026;
     <code>
      TRX_UNDO_INSERT_REC
     </code>
     &#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#65292;&#20854;&#20182;&#31867;&#22411;&#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#37117;&#23646;&#20110;&#36825;&#20010;&#22823;&#31867;&#65292;&#27604;&#22914;&#25105;&#20204;&#21069;&#36793;&#35828;&#30340;
     <code>
      TRX_UNDO_DEL_MARK_REC
     </code>
     &#12289;
     <code>
      TRX_UNDO_UPD_EXIST_REC
     </code>
     &#21861;&#30340;&#65292;&#19968;&#33324;&#30001;
     <code>
      DELETE
     </code>
     &#12289;
     <code>
      UPDATE
     </code>
     &#35821;&#21477;&#20135;&#29983;&#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#23646;&#20110;&#36825;&#20010;&#22823;&#31867;&#12290;
    </p>
   </li>
  </ul>
  <p>
   &#36825;&#20010;
   <code>
    TRX_UNDO_PAGE_TYPE
   </code>
   &#23646;&#24615;&#21487;&#36873;&#30340;&#20540;&#23601;&#26159;&#19978;&#36793;&#30340;&#20004;&#20010;&#65292;&#29992;&#26469;&#26631;&#35760;&#26412;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;&#21738;&#20010;&#22823;&#31867;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#19981;&#21516;&#22823;&#31867;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#19981;&#33021;&#28151;&#30528;&#23384;&#20648;&#65292;&#27604;&#22914;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#30340;
   <code>
    TRX_UNDO_PAGE_TYPE
   </code>
   &#23646;&#24615;&#20540;&#20026;
   <code>
    TRX_UNDO_INSERT
   </code>
   &#65292;&#37027;&#20040;&#36825;&#20010;&#39029;&#38754;&#23601;&#21482;&#33021;&#23384;&#20648;&#31867;&#22411;&#20026;
   <code>
    TRX_UNDO_INSERT_REC
   </code>
   &#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#20854;&#20182;&#31867;&#22411;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#23601;&#19981;&#33021;&#25918;&#21040;&#36825;&#20010;&#39029;&#38754;&#20013;&#20102;&#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#20043;&#25152;&#20197;&#25226;undo&#26085;&#24535;&#20998;&#25104;&#20004;&#20010;&#22823;&#31867;&#65292;&#26159;&#22240;&#20026;&#31867;&#22411;&#20026;TRX_UNDO_INSERT_REC&#30340;undo&#26085;&#24535;&#22312;&#20107;&#21153;&#25552;&#20132;&#21518;&#21487;&#20197;&#30452;&#25509;&#21024;&#38500;&#25481;&#65292;&#32780;&#20854;&#20182;&#31867;&#22411;&#30340;undo&#26085;&#24535;&#36824;&#38656;&#35201;&#20026;&#25152;&#35859;&#30340;MVCC&#26381;&#21153;&#65292;&#19981;&#33021;&#30452;&#25509;&#21024;&#38500;&#25481;&#65292;&#23545;&#23427;&#20204;&#30340;&#22788;&#29702;&#38656;&#35201;&#21306;&#21035;&#23545;&#24453;&#12290;&#24403;&#28982;&#65292;&#22914;&#26524;&#20320;&#30475;&#36825;&#27573;&#35805;&#36855;&#36855;&#31946;&#31946;&#30340;&#35805;&#65292;&#37027;&#23601;&#19981;&#38656;&#35201;&#20877;&#30475;&#19968;&#36941;&#20102;&#65292;&#29616;&#22312;&#21482;&#38656;&#35201;&#30693;&#36947;undo&#26085;&#24535;&#20998;&#20026;2&#20010;&#22823;&#31867;&#23601;&#22909;&#20102;&#65292;&#26356;&#35814;&#32454;&#30340;&#19996;&#35199;&#25105;&#20204;&#21518;&#36793;&#20250;&#20180;&#32454;&#21792;&#21480;&#30340;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_PAGE_START
   </code>
   &#65306;&#34920;&#31034;&#22312;&#24403;&#21069;&#39029;&#38754;&#20013;&#26159;&#20174;&#20160;&#20040;&#20301;&#32622;&#24320;&#22987;&#23384;&#20648;
   <code>
    undo&#26085;&#24535;
   </code>
   &#30340;&#65292;&#25110;&#32773;&#35828;&#34920;&#31034;&#31532;&#19968;&#26465;
   <code>
    undo&#26085;&#24535;
   </code>
   &#22312;&#26412;&#39029;&#38754;&#20013;&#30340;&#36215;&#22987;&#20559;&#31227;&#37327;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_PAGE_FREE
   </code>
   &#65306;&#19982;&#19978;&#36793;&#30340;
   <code>
    TRX_UNDO_PAGE_START
   </code>
   &#23545;&#24212;&#65292;&#34920;&#31034;&#24403;&#21069;&#39029;&#38754;&#20013;&#23384;&#20648;&#30340;&#26368;&#21518;&#19968;&#26465;
   <code>
    undo
   </code>
   &#26085;&#24535;&#32467;&#26463;&#26102;&#30340;&#20559;&#31227;&#37327;&#65292;&#25110;&#32773;&#35828;&#20174;&#36825;&#20010;&#20301;&#32622;&#24320;&#22987;&#65292;&#21487;&#20197;&#32487;&#32493;&#20889;&#20837;&#26032;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#12290;
  </p>
  <p>
   &#20551;&#35774;&#29616;&#22312;&#21521;&#39029;&#38754;&#20013;&#20889;&#20837;&#20102;3&#26465;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#37027;&#20040;
   <code>
    TRX_UNDO_PAGE_START
   </code>
   &#21644;
   <code>
    TRX_UNDO_PAGE_FREE
   </code>
   &#30340;&#31034;&#24847;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
  </p>
  <figure>
   <img alt="image_1d79s1ib21rku5fkq3to1e14313.png-54kB" src="EPUB/3bef556a-13d6-11ed-838d-acde48001122">
   <figcaption>
   </figcaption>
  </figure>
  <p>
  </p>
  <p>
   &#24403;&#28982;&#65292;&#22312;&#26368;&#21021;&#19968;&#26465;
   <code>
    undo&#26085;&#24535;
   </code>
   &#20063;&#27809;&#20889;&#20837;&#30340;&#24773;&#20917;&#19979;&#65292;
   <code>
    TRX_UNDO_PAGE_START
   </code>
   &#21644;
   <code>
    TRX_UNDO_PAGE_FREE
   </code>
   &#30340;&#20540;&#26159;&#30456;&#21516;&#30340;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_PAGE_NODE
   </code>
   &#65306;&#20195;&#34920;&#19968;&#20010;
   <code>
    List Node
   </code>
   &#32467;&#26500;&#65288;&#38142;&#34920;&#30340;&#26222;&#36890;&#33410;&#28857;&#65292;&#25105;&#20204;&#19978;&#36793;&#21018;&#35828;&#30340;&#65289;&#12290;
  </p>
  <p>
   &#19979;&#36793;&#39532;&#19978;&#29992;&#21040;&#36825;&#20010;&#23646;&#24615;&#65292;&#31245;&#23433;&#21247;&#36481;&#12290;
  </p>
 </li>
</ul>
<h2 class="heading">
 Undo&#39029;&#38754;&#38142;&#34920;
</h2>
<h3 class="heading">
 &#21333;&#20010;&#20107;&#21153;&#20013;&#30340;Undo&#39029;&#38754;&#38142;&#34920;
</h3>
<p>
 &#22240;&#20026;&#19968;&#20010;&#20107;&#21153;&#21487;&#33021;&#21253;&#21547;&#22810;&#20010;&#35821;&#21477;&#65292;&#32780;&#19988;&#19968;&#20010;&#35821;&#21477;&#21487;&#33021;&#23545;&#33509;&#24178;&#26465;&#35760;&#24405;&#36827;&#34892;&#25913;&#21160;&#65292;&#32780;&#23545;&#27599;&#26465;&#35760;&#24405;&#36827;&#34892;&#25913;&#21160;&#21069;&#65292;&#37117;&#38656;&#35201;&#35760;&#24405;1&#26465;&#25110;2&#26465;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#25152;&#20197;&#22312;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21487;&#33021;&#20135;&#29983;&#24456;&#22810;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#36825;&#20123;&#26085;&#24535;&#21487;&#33021;&#19968;&#20010;&#39029;&#38754;&#25918;&#19981;&#19979;&#65292;&#38656;&#35201;&#25918;&#21040;&#22810;&#20010;&#39029;&#38754;&#20013;&#65292;&#36825;&#20123;&#39029;&#38754;&#23601;&#36890;&#36807;&#25105;&#20204;&#19978;&#36793;&#20171;&#32461;&#30340;
 <code>
  TRX_UNDO_PAGE_NODE
 </code>
 &#23646;&#24615;&#36830;&#25104;&#20102;&#38142;&#34920;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d79v7bib12041n9d1gpe1t8a10jc1g.png-60.8kB" src="EPUB/3c03a600-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#22823;&#23478;&#24448;&#19978;&#20877;&#30597;&#19968;&#30597;&#19978;&#36793;&#30340;&#22270;&#65292;&#25105;&#20204;&#29305;&#24847;&#25226;&#38142;&#34920;&#20013;&#30340;&#31532;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#32473;&#26631;&#20102;&#20986;&#26469;&#65292;&#31216;&#23427;&#20026;
 <code>
  first undo page
 </code>
 &#65292;&#20854;&#20313;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#31216;&#20043;&#20026;
 <code>
  normal undo page
 </code>
 &#65292;&#36825;&#26159;&#22240;&#20026;&#22312;
 <code>
  first undo page
 </code>
 &#20013;&#38500;&#20102;&#35760;&#24405;
 <code>
  Undo Page Header
 </code>
 &#20043;&#22806;&#65292;&#36824;&#20250;&#35760;&#24405;&#20854;&#20182;&#30340;&#19968;&#20123;&#31649;&#29702;&#20449;&#24687;&#65292;&#36825;&#20010;&#25105;&#20204;&#31245;&#21518;&#20877;&#35828;&#21704;&#12290;
</p>
<p>
 &#22312;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#65292;&#21487;&#33021;&#28151;&#30528;&#25191;&#34892;
 <code>
  INSERT
 </code>
 &#12289;
 <code>
  DELETE
 </code>
 &#12289;
 <code>
  UPDATE
 </code>
 &#35821;&#21477;&#65292;&#20063;&#23601;&#24847;&#21619;&#30528;&#20250;&#20135;&#29983;&#19981;&#21516;&#31867;&#22411;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#12290;&#20294;&#26159;&#25105;&#20204;&#21069;&#36793;&#21448;&#24378;&#35843;&#36807;&#65292;&#21516;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#35201;&#20040;&#21482;&#23384;&#20648;
 <code>
  TRX_UNDO_INSERT
 </code>
 &#22823;&#31867;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#35201;&#20040;&#21482;&#23384;&#20648;
 <code>
  TRX_UNDO_UPDATE
 </code>
 &#22823;&#31867;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#21453;&#27491;&#19981;&#33021;&#28151;&#30528;&#23384;&#65292;&#25152;&#20197;&#22312;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#23601;&#21487;&#33021;&#38656;&#35201;2&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#30340;&#38142;&#34920;&#65292;&#19968;&#20010;&#31216;&#20043;&#20026;
 <code>
  insert undo&#38142;&#34920;
 </code>
 &#65292;&#21478;&#19968;&#20010;&#31216;&#20043;&#20026;
 <code>
  update undo&#38142;&#34920;
 </code>
 &#65292;&#30011;&#20010;&#31034;&#24847;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7a6t4va1e0c1l9t1hq51vlt183l2d.png-54.6kB" src="EPUB/3c162e4c-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#21478;&#22806;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#35268;&#23450;&#23545;&#26222;&#36890;&#34920;&#21644;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#25913;&#21160;&#26102;&#20135;&#29983;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#35201;&#20998;&#21035;&#35760;&#24405;&#65288;&#25105;&#20204;&#31245;&#21518;&#38416;&#37322;&#20026;&#21861;&#36825;&#20040;&#20570;&#65289;&#65292;&#25152;&#20197;&#22312;&#19968;&#20010;&#20107;&#21153;&#20013;
 <span style="color:red">
  &#26368;&#22810;
 </span>
 &#26377;4&#20010;&#20197;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20026;&#33410;&#28857;&#32452;&#25104;&#30340;&#38142;&#34920;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7bg5o7c3t11nch988lj51hsl9.png-106.8kB" src="EPUB/3c278188-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#24403;&#28982;&#65292;&#24182;&#19981;&#26159;&#22312;&#20107;&#21153;&#19968;&#24320;&#22987;&#23601;&#20250;&#20026;&#36825;&#20010;&#20107;&#21153;&#20998;&#37197;&#36825;4&#20010;&#38142;&#34920;&#65292;&#20855;&#20307;&#20998;&#37197;&#31574;&#30053;&#22914;&#19979;&#65306;
</p>
<ul>
 <li>
  <p>
   &#21018;&#21018;&#24320;&#21551;&#20107;&#21153;&#26102;&#65292;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20063;&#19981;&#20998;&#37197;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21521;&#26222;&#36890;&#34920;&#20013;&#25554;&#20837;&#35760;&#24405;&#25110;&#32773;&#25191;&#34892;&#26356;&#26032;&#35760;&#24405;&#20027;&#38190;&#30340;&#25805;&#20316;&#20043;&#21518;&#65292;&#23601;&#20250;&#20026;&#20854;&#20998;&#37197;&#19968;&#20010;
   <code>
    &#26222;&#36890;&#34920;&#30340;insert undo&#38142;&#34920;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21024;&#38500;&#25110;&#32773;&#26356;&#26032;&#20102;&#26222;&#36890;&#34920;&#20013;&#30340;&#35760;&#24405;&#20043;&#21518;&#65292;&#23601;&#20250;&#20026;&#20854;&#20998;&#37197;&#19968;&#20010;
   <code>
    &#26222;&#36890;&#34920;&#30340;update undo&#38142;&#34920;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21521;&#20020;&#26102;&#34920;&#20013;&#25554;&#20837;&#35760;&#24405;&#25110;&#32773;&#25191;&#34892;&#26356;&#26032;&#35760;&#24405;&#20027;&#38190;&#30340;&#25805;&#20316;&#20043;&#21518;&#65292;&#23601;&#20250;&#20026;&#20854;&#20998;&#37197;&#19968;&#20010;
   <code>
    &#20020;&#26102;&#34920;&#30340;insert undo&#38142;&#34920;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21024;&#38500;&#25110;&#32773;&#26356;&#26032;&#20102;&#20020;&#26102;&#34920;&#20013;&#30340;&#35760;&#24405;&#20043;&#21518;&#65292;&#23601;&#20250;&#20026;&#20854;&#20998;&#37197;&#19968;&#20010;
   <code>
    &#20020;&#26102;&#34920;&#30340;update undo&#38142;&#34920;
   </code>
   &#12290;
  </p>
 </li>
</ul>
<p>
 &#24635;&#32467;&#19968;&#21477;&#23601;&#26159;&#65306;
 <span style="color:red">
  &#25353;&#38656;&#20998;&#37197;&#65292;&#21861;&#26102;&#20505;&#38656;&#35201;&#21861;&#26102;&#20505;&#20877;&#20998;&#37197;&#65292;&#19981;&#38656;&#35201;&#23601;&#19981;&#20998;&#37197;
 </span>
 &#12290;
</p>
<h3 class="heading">
 &#22810;&#20010;&#20107;&#21153;&#20013;&#30340;Undo&#39029;&#38754;&#38142;&#34920;
</h3>
<p>
 &#20026;&#20102;&#23613;&#21487;&#33021;&#25552;&#39640;
 <code>
  undo&#26085;&#24535;
 </code>
 &#30340;&#20889;&#20837;&#25928;&#29575;&#65292;
 <span style="color:red">
  &#19981;&#21516;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#20135;&#29983;&#30340;undo&#26085;&#24535;&#38656;&#35201;&#34987;&#20889;&#20837;&#21040;&#19981;&#21516;&#30340;Undo&#39029;&#38754;&#38142;&#34920;&#20013;
 </span>
 &#12290;&#27604;&#26041;&#35828;&#29616;&#22312;&#26377;&#20107;&#21153;
 <code>
  id
 </code>
 &#20998;&#21035;&#20026;
 <code>
  1
 </code>
 &#12289;
 <code>
  2
 </code>
 &#30340;&#20004;&#20010;&#20107;&#21153;&#65292;&#25105;&#20204;&#20998;&#21035;&#31216;&#20043;&#20026;
 <code>
  trx 1
 </code>
 &#21644;
 <code>
  trx 2
 </code>
 &#65292;&#20551;&#35774;&#22312;&#36825;&#20004;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    trx 1
   </code>
   &#23545;&#26222;&#36890;&#34920;&#20570;&#20102;
   <code>
    DELETE
   </code>
   &#25805;&#20316;&#65292;&#23545;&#20020;&#26102;&#34920;&#20570;&#20102;
   <code>
    INSERT
   </code>
   &#21644;
   <code>
    UPDATE
   </code>
   &#25805;&#20316;&#12290;
  </p>
  <p>
   <code>
    InnoDB
   </code>
   &#20250;&#20026;
   <code>
    trx 1
   </code>
   &#20998;&#37197;3&#20010;&#38142;&#34920;&#65292;&#20998;&#21035;&#26159;&#65306;
  </p>
  <ul>
   <li>
    <p>
     &#38024;&#23545;&#26222;&#36890;&#34920;&#30340;
     <code>
      update undo&#38142;&#34920;
     </code>
    </p>
   </li>
   <li>
    <p>
     &#38024;&#23545;&#20020;&#26102;&#34920;&#30340;
     <code>
      insert undo&#38142;&#34920;
     </code>
    </p>
   </li>
   <li>
    <p>
     &#38024;&#23545;&#20020;&#26102;&#34920;&#30340;
     <code>
      update undo&#38142;&#34920;
     </code>
     &#12290;
    </p>
   </li>
  </ul>
 </li>
 <li>
  <p>
   <code>
    trx 2
   </code>
   &#23545;&#26222;&#36890;&#34920;&#20570;&#20102;
   <code>
    INSERT
   </code>
   &#12289;
   <code>
    UPDATE
   </code>
   &#21644;
   <code>
    DELETE
   </code>
   &#25805;&#20316;&#65292;&#27809;&#26377;&#23545;&#20020;&#26102;&#34920;&#20570;&#25913;&#21160;&#12290;
  </p>
  <p>
   <code>
    InnoDB
   </code>
   &#20250;&#20026;
   <code>
    trx 2
   </code>
   &#20998;&#37197;2&#20010;&#38142;&#34920;&#65292;&#20998;&#21035;&#26159;&#65306;
  </p>
  <ul>
   <li>
    <p>
     &#38024;&#23545;&#26222;&#36890;&#34920;&#30340;
     <code>
      insert undo&#38142;&#34920;
     </code>
    </p>
   </li>
   <li>
    <p>
     &#38024;&#23545;&#26222;&#36890;&#34920;&#30340;
     <code>
      update undo&#38142;&#34920;
     </code>
     &#12290;
    </p>
   </li>
  </ul>
 </li>
</ul>
<p>
 &#32508;&#19978;&#25152;&#36848;&#65292;&#22312;
 <code>
  trx 1
 </code>
 &#21644;
 <code>
  trx 2
 </code>
 &#25191;&#34892;&#36807;&#31243;&#20013;&#65292;
 <code>
  InnoDB
 </code>
 &#20849;&#38656;&#20026;&#36825;&#20004;&#20010;&#20107;&#21153;&#20998;&#37197;5&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#30011;&#20010;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7blo9dp1m4tj1f1ke9te11654m.png-96.8kB" src="EPUB/3c3db160-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#22914;&#26524;&#26377;&#26356;&#22810;&#30340;&#20107;&#21153;&#65292;&#37027;&#23601;&#24847;&#21619;&#30528;&#21487;&#33021;&#20250;&#20135;&#29983;&#26356;&#22810;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#12290;
</p>
<h2 class="heading">
 undo&#26085;&#24535;&#20855;&#20307;&#20889;&#20837;&#36807;&#31243;
</h2>
<h3 class="heading">
 &#27573;&#65288;Segment&#65289;&#30340;&#27010;&#24565;
</h3>
<p>
 &#22914;&#26524;&#20320;&#26377;&#35748;&#30495;&#30475;&#36807;&#34920;&#31354;&#38388;&#37027;&#19968;&#31456;&#30340;&#35805;&#65292;&#23545;&#36825;&#20010;
 <code>
  &#27573;
 </code>
 &#30340;&#27010;&#24565;&#24212;&#35813;&#21360;&#35937;&#28145;&#21051;&#65292;&#25105;&#20204;&#24403;&#26102;&#33457;&#20102;&#38750;&#24120;&#22823;&#30340;&#31687;&#24133;&#26469;&#21792;&#21480;&#36825;&#20010;&#27010;&#24565;&#12290;&#31616;&#21333;&#35762;&#65292;&#36825;&#20010;
 <code>
  &#27573;
 </code>
 &#26159;&#19968;&#20010;&#36923;&#36753;&#19978;&#30340;&#27010;&#24565;&#65292;&#26412;&#36136;&#19978;&#26159;&#30001;&#33509;&#24178;&#20010;&#38646;&#25955;&#39029;&#38754;&#21644;&#33509;&#24178;&#20010;&#23436;&#25972;&#30340;&#21306;&#32452;&#25104;&#30340;&#12290;&#27604;&#22914;&#19968;&#20010;
 <code>
  B+
 </code>
 &#26641;&#32034;&#24341;&#34987;&#21010;&#20998;&#25104;&#20004;&#20010;&#27573;&#65292;&#19968;&#20010;&#21494;&#23376;&#33410;&#28857;&#27573;&#65292;&#19968;&#20010;&#38750;&#21494;&#23376;&#33410;&#28857;&#27573;&#65292;&#36825;&#26679;&#21494;&#23376;&#33410;&#28857;&#23601;&#21487;&#20197;&#34987;&#23613;&#21487;&#33021;&#30340;&#23384;&#21040;&#19968;&#36215;&#65292;&#38750;&#21494;&#23376;&#33410;&#28857;&#34987;&#23613;&#21487;&#33021;&#30340;&#23384;&#21040;&#19968;&#36215;&#12290;&#27599;&#19968;&#20010;&#27573;&#23545;&#24212;&#19968;&#20010;
 <code>
  INODE Entry
 </code>
 &#32467;&#26500;&#65292;&#36825;&#20010;
 <code>
  INODE Entry
 </code>
 &#32467;&#26500;&#25551;&#36848;&#20102;&#36825;&#20010;&#27573;&#30340;&#21508;&#31181;&#20449;&#24687;&#65292;&#27604;&#22914;&#27573;&#30340;
 <code>
  ID
 </code>
 &#65292;&#27573;&#20869;&#30340;&#21508;&#31181;&#38142;&#34920;&#22522;&#33410;&#28857;&#65292;&#38646;&#25955;&#39029;&#38754;&#30340;&#39029;&#21495;&#26377;&#21738;&#20123;&#31561;&#20449;&#24687;&#65288;&#20855;&#20307;&#35813;&#32467;&#26500;&#20013;&#27599;&#20010;&#23646;&#24615;&#30340;&#24847;&#24605;&#22823;&#23478;&#21487;&#20197;&#21040;&#34920;&#31354;&#38388;&#37027;&#19968;&#31456;&#37324;&#20877;&#27425;&#37325;&#28201;&#19968;&#19979;&#65289;&#12290;&#25105;&#20204;&#21069;&#36793;&#20063;&#35828;&#36807;&#65292;&#20026;&#20102;&#23450;&#20301;&#19968;&#20010;
 <code>
  INODE Entry
 </code>
 &#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#35774;&#35745;&#20102;&#19968;&#20010;
 <code>
  Segment Header
 </code>
 &#30340;&#32467;&#26500;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7bp5ndt171bb6rkohot41e023.png-75.7kB" src="EPUB/3c4d681c-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#25972;&#20010;
 <code>
  Segment Header
 </code>
 &#21344;&#29992;10&#20010;&#23383;&#33410;&#22823;&#23567;&#65292;&#21508;&#20010;&#23646;&#24615;&#30340;&#24847;&#24605;&#22914;&#19979;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    Space ID of the INODE Entry
   </code>
   &#65306;
   <code>
    INODE Entry
   </code>
   &#32467;&#26500;&#25152;&#22312;&#30340;&#34920;&#31354;&#38388;ID&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    Page Number of the INODE Entry
   </code>
   &#65306;
   <code>
    INODE Entry
   </code>
   &#32467;&#26500;&#25152;&#22312;&#30340;&#39029;&#38754;&#39029;&#21495;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    Byte Offset of the INODE Ent
   </code>
   &#65306;
   <code>
    INODE Entry
   </code>
   &#32467;&#26500;&#22312;&#35813;&#39029;&#38754;&#20013;&#30340;&#20559;&#31227;&#37327;
  </p>
 </li>
</ul>
<p>
 &#30693;&#36947;&#20102;&#34920;&#31354;&#38388;ID&#12289;&#39029;&#21495;&#12289;&#39029;&#20869;&#20559;&#31227;&#37327;&#65292;&#19981;&#23601;&#21487;&#20197;&#21807;&#19968;&#23450;&#20301;&#19968;&#20010;
 <code>
  INODE Entry
 </code>
 &#30340;&#22320;&#22336;&#20102;&#20040;&#65374;
</p>
<blockquote class="warning">
 <p>
  &#23567;&#36148;&#22763;&#65306;

&#36825;&#37096;&#20998;&#20851;&#20110;&#27573;&#30340;&#21508;&#31181;&#27010;&#24565;&#25105;&#20204;&#22312;&#34920;&#31354;&#38388;&#37027;&#19968;&#31456;&#20013;&#37117;&#26377;&#35814;&#32454;&#35299;&#37322;&#65292;&#22312;&#36825;&#37324;&#37325;&#25552;&#19968;&#19979;&#21482;&#26159;&#20026;&#20102;&#21796;&#37266;&#22823;&#23478;&#27785;&#30561;&#30340;&#35760;&#24518;&#65292;&#22914;&#26524;&#26377;&#20219;&#20309;&#19981;&#28165;&#26970;&#30340;&#22320;&#26041;&#21487;&#20197;&#20877;&#27425;&#36339;&#22238;&#34920;&#31354;&#38388;&#30340;&#37027;&#19968;&#31456;&#20180;&#32454;&#35835;&#19968;&#19979;&#12290;
 </p>
</blockquote>
<h3 class="heading">
 Undo Log Segment Header
</h3>
<p>
 &#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#35268;&#23450;&#65292;&#27599;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#37117;&#23545;&#24212;&#30528;&#19968;&#20010;
 <code>
  &#27573;
 </code>
 &#65292;&#31216;&#20043;&#20026;
 <code>
  Undo Log Segment
 </code>
 &#12290;&#20063;&#23601;&#26159;&#35828;&#38142;&#34920;&#20013;&#30340;&#39029;&#38754;&#37117;&#26159;&#20174;&#36825;&#20010;&#27573;&#37324;&#36793;&#30003;&#35831;&#30340;&#65292;&#25152;&#20197;&#20182;&#20204;&#22312;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#65292;&#20063;&#23601;&#26159;&#19978;&#36793;&#25552;&#21040;&#30340;
 <code>
  first undo page
 </code>
 &#20013;&#35774;&#35745;&#20102;&#19968;&#20010;&#31216;&#20043;&#20026;
 <code>
  Undo Log Segment Header
 </code>
 &#30340;&#37096;&#20998;&#65292;&#36825;&#20010;&#37096;&#20998;&#20013;&#21253;&#21547;&#20102;&#35813;&#38142;&#34920;&#23545;&#24212;&#30340;&#27573;&#30340;
 <code>
  segment header
 </code>
 &#20449;&#24687;&#20197;&#21450;&#20854;&#20182;&#30340;&#19968;&#20123;&#20851;&#20110;&#36825;&#20010;&#27573;&#30340;&#20449;&#24687;&#65292;&#25152;&#20197;
 <code>
  Undo
 </code>
 &#39029;&#38754;&#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#20854;&#23454;&#38271;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7brcccqah1rdn10573vh1onip.png-70.5kB" src="EPUB/3c5efea6-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#21487;&#20197;&#30475;&#21040;&#36825;&#20010;
 <code>
  Undo
 </code>
 &#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#27604;&#26222;&#36890;&#39029;&#38754;&#22810;&#20102;&#20010;
 <code>
  Undo Log Segment Header
 </code>
 &#65292;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;&#23427;&#30340;&#32467;&#26500;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7bsbk8o15ja2bk1s9p11c51vs2p.png-80.2kB" src="EPUB/3c921264-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#20854;&#20013;&#21508;&#20010;&#23646;&#24615;&#30340;&#24847;&#24605;&#22914;&#19979;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    TRX_UNDO_STATE
   </code>
   &#65306;&#26412;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#22788;&#22312;&#20160;&#20040;&#29366;&#24577;&#12290;
  </p>
  <p>
   &#19968;&#20010;
   <code>
    Undo Log Segment
   </code>
   &#21487;&#33021;&#22788;&#22312;&#30340;&#29366;&#24577;&#21253;&#25324;&#65306;
  </p>
  <ul>
   <li>
    <p>
     <code>
      TRX_UNDO_ACTIVE
     </code>
     &#65306;&#27963;&#36291;&#29366;&#24577;&#65292;&#20063;&#23601;&#26159;&#19968;&#20010;&#27963;&#36291;&#30340;&#20107;&#21153;&#27491;&#22312;&#24448;&#36825;&#20010;&#27573;&#37324;&#36793;&#20889;&#20837;
     <code>
      undo&#26085;&#24535;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     <code>
      TRX_UNDO_CACHED
     </code>
     &#65306;&#34987;&#32531;&#23384;&#30340;&#29366;&#24577;&#12290;&#22788;&#22312;&#35813;&#29366;&#24577;&#30340;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#31561;&#24453;&#30528;&#20043;&#21518;&#34987;&#20854;&#20182;&#20107;&#21153;&#37325;&#29992;&#12290;
    </p>
   </li>
   <li>
    <p>
     <code>
      TRX_UNDO_TO_FREE
     </code>
     &#65306;&#23545;&#20110;
     <code>
      insert undo
     </code>
     &#38142;&#34920;&#26469;&#35828;&#65292;&#22914;&#26524;&#22312;&#23427;&#23545;&#24212;&#30340;&#20107;&#21153;&#25552;&#20132;&#20043;&#21518;&#65292;&#35813;&#38142;&#34920;&#19981;&#33021;&#34987;&#37325;&#29992;&#65292;&#37027;&#20040;&#23601;&#20250;&#22788;&#20110;&#36825;&#31181;&#29366;&#24577;&#12290;
    </p>
   </li>
   <li>
    <p>
     <code>
      TRX_UNDO_TO_PURGE
     </code>
     &#65306;&#23545;&#20110;
     <code>
      update undo
     </code>
     &#38142;&#34920;&#26469;&#35828;&#65292;&#22914;&#26524;&#22312;&#23427;&#23545;&#24212;&#30340;&#20107;&#21153;&#25552;&#20132;&#20043;&#21518;&#65292;&#35813;&#38142;&#34920;&#19981;&#33021;&#34987;&#37325;&#29992;&#65292;&#37027;&#20040;&#23601;&#20250;&#22788;&#20110;&#36825;&#31181;&#29366;&#24577;&#12290;
    </p>
   </li>
   <li>
    <p>
     <code>
      TRX_UNDO_PREPARED
     </code>
     &#65306;&#21253;&#21547;&#22788;&#20110;
     <code>
      PREPARE
     </code>
     &#38454;&#27573;&#30340;&#20107;&#21153;&#20135;&#29983;&#30340;
     <code>
      undo&#26085;&#24535;
     </code>
     &#12290;
    </p>
   </li>
  </ul>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

Undo&#39029;&#38754;&#38142;&#34920;&#20160;&#20040;&#26102;&#20505;&#20250;&#34987;&#37325;&#29992;&#65292;&#24590;&#20040;&#37325;&#29992;&#25105;&#20204;&#20043;&#21518;&#20250;&#35814;&#32454;&#35828;&#30340;&#12290;&#20107;&#21153;&#30340;PREPARE&#38454;&#27573;&#26159;&#22312;&#25152;&#35859;&#30340;&#20998;&#24067;&#24335;&#20107;&#21153;&#20013;&#25165;&#20986;&#29616;&#30340;&#65292;&#26412;&#20070;&#20013;&#19981;&#20250;&#20171;&#32461;&#26356;&#22810;&#20851;&#20110;&#20998;&#24067;&#24335;&#20107;&#21153;&#30340;&#20107;&#24773;&#65292;&#25152;&#20197;&#22823;&#23478;&#30446;&#21069;&#24573;&#30053;&#36825;&#20010;&#29366;&#24577;&#23601;&#22909;&#20102;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_LAST_LOG
   </code>
   &#65306;&#26412;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#26368;&#21518;&#19968;&#20010;
   <code>
    Undo Log Header
   </code>
   &#30340;&#20301;&#32622;&#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#20851;&#20110;&#20160;&#20040;&#26159;Undo Log Header&#65292;&#25105;&#20204;&#31245;&#21518;&#39532;&#19978;&#20171;&#32461;&#21704;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_FSEG_HEADER
   </code>
   &#65306;&#26412;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#23545;&#24212;&#30340;&#27573;&#30340;
   <code>
    Segment Header
   </code>
   &#20449;&#24687;&#65288;&#23601;&#26159;&#25105;&#20204;&#19978;&#19968;&#33410;&#20171;&#32461;&#30340;&#37027;&#20010;10&#23383;&#33410;&#32467;&#26500;&#65292;&#36890;&#36807;&#36825;&#20010;&#20449;&#24687;&#21487;&#20197;&#25214;&#21040;&#35813;&#27573;&#23545;&#24212;&#30340;
   <code>
    INODE Entry
   </code>
   &#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_PAGE_LIST
   </code>
   &#65306;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;&#22522;&#33410;&#28857;&#12290;
  </p>
  <p>
   &#25105;&#20204;&#19978;&#36793;&#35828;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#30340;
   <code>
    Undo Page Header
   </code>
   &#37096;&#20998;&#26377;&#19968;&#20010;12&#23383;&#33410;&#22823;&#23567;&#30340;
   <code>
    TRX_UNDO_PAGE_NODE
   </code>
   &#23646;&#24615;&#65292;&#36825;&#20010;&#23646;&#24615;&#20195;&#34920;&#19968;&#20010;
   <code>
    List Node
   </code>
   &#32467;&#26500;&#12290;&#27599;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#37117;&#21253;&#21547;
   <code>
    Undo Page Header
   </code>
   &#32467;&#26500;&#65292;&#36825;&#20123;&#39029;&#38754;&#23601;&#21487;&#20197;&#36890;&#36807;&#36825;&#20010;&#23646;&#24615;&#36830;&#25104;&#19968;&#20010;&#38142;&#34920;&#12290;&#36825;&#20010;
   <code>
    TRX_UNDO_PAGE_LIST
   </code>
   &#23646;&#24615;&#20195;&#34920;&#30528;&#36825;&#20010;&#38142;&#34920;&#30340;&#22522;&#33410;&#28857;&#65292;&#24403;&#28982;&#36825;&#20010;&#22522;&#33410;&#28857;&#21482;&#23384;&#22312;&#20110;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#65292;&#20063;&#23601;&#26159;
   <code>
    first undo page
   </code>
   &#20013;&#12290;
  </p>
 </li>
</ul>
<h3 class="heading">
 Undo Log Header
</h3>
<p>
 &#19968;&#20010;&#20107;&#21153;&#22312;&#21521;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20013;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#26102;&#30340;&#26041;&#24335;&#26159;&#21313;&#20998;&#31616;&#21333;&#26292;&#21147;&#30340;&#65292;&#23601;&#26159;&#30452;&#25509;&#24448;&#37324;&#24636;&#65292;&#20889;&#23436;&#19968;&#26465;&#32039;&#25509;&#30528;&#20889;&#21478;&#19968;&#26465;&#65292;&#21508;&#26465;
 <code>
  undo&#26085;&#24535;
 </code>
 &#20043;&#38388;&#26159;&#20146;&#23494;&#26080;&#38388;&#30340;&#12290;&#20889;&#23436;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#21518;&#65292;&#20877;&#20174;&#27573;&#37324;&#30003;&#35831;&#19968;&#20010;&#26032;&#39029;&#38754;&#65292;&#28982;&#21518;&#25226;&#36825;&#20010;&#39029;&#38754;&#25554;&#20837;&#21040;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#20013;&#65292;&#32487;&#32493;&#24448;&#36825;&#20010;&#26032;&#30003;&#35831;&#30340;&#39029;&#38754;&#20013;&#20889;&#12290;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#35748;&#20026;&#21516;&#19968;&#20010;&#20107;&#21153;&#21521;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#20013;&#20889;&#20837;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#31639;&#26159;&#19968;&#20010;&#32452;&#65292;&#27604;&#26041;&#35828;&#25105;&#20204;&#19978;&#36793;&#20171;&#32461;&#30340;
 <code>
  trx 1
 </code>
 &#30001;&#20110;&#20250;&#20998;&#37197;3&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#20063;&#23601;&#20250;&#20889;&#20837;3&#20010;&#32452;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65307;
 <code>
  trx 2
 </code>
 &#30001;&#20110;&#20250;&#20998;&#37197;2&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#20063;&#23601;&#20250;&#20889;&#20837;2&#20010;&#32452;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#12290;&#22312;&#27599;&#20889;&#20837;&#19968;&#32452;
 <code>
  undo&#26085;&#24535;
 </code>
 &#26102;&#65292;&#37117;&#20250;&#22312;&#36825;&#32452;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21069;&#20808;&#35760;&#24405;&#19968;&#19979;&#20851;&#20110;&#36825;&#20010;&#32452;&#30340;&#19968;&#20123;&#23646;&#24615;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#25226;&#23384;&#20648;&#36825;&#20123;&#23646;&#24615;&#30340;&#22320;&#26041;&#31216;&#20043;&#20026;
 <code>
  Undo Log Header
 </code>
 &#12290;&#25152;&#20197;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#22312;&#30495;&#27491;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21069;&#65292;&#20854;&#23454;&#37117;&#20250;&#34987;&#22635;&#20805;
 <code>
  Undo Page Header
 </code>
 &#12289;
 <code>
  Undo Log Segment Header
 </code>
 &#12289;
 <code>
  Undo Log Header
 </code>
 &#36825;3&#20010;&#37096;&#20998;&#65292;&#22914;&#22270;&#25152;&#31034;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7cbktqb16oqih12mqmghn2a1m.png-82kB" src="EPUB/3ca079c6-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#36825;&#20010;
 <code>
  Undo Log Header
 </code>
 &#20855;&#20307;&#30340;&#32467;&#26500;&#22914;&#19979;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7cfr3cjsec64714qgucc1s8s9.png-122.8kB" src="EPUB/3caf4a14-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#21703;&#21780;&#65292;&#26144;&#20837;&#30524;&#24088;&#30340;&#21448;&#26159;&#19968;&#22823;&#22376;&#23646;&#24615;&#65292;&#25105;&#20204;&#20808;&#22823;&#33268;&#30475;&#19968;&#19979;&#23427;&#20204;&#37117;&#26159;&#21861;&#24847;&#24605;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    TRX_UNDO_TRX_ID
   </code>
   &#65306;&#29983;&#25104;&#26412;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#30340;&#20107;&#21153;
   <code>
    id
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_TRX_NO
   </code>
   &#65306;&#20107;&#21153;&#25552;&#20132;&#21518;&#29983;&#25104;&#30340;&#19968;&#20010;&#38656;&#35201;&#24207;&#21495;&#65292;&#20351;&#29992;&#27492;&#24207;&#21495;&#26469;&#26631;&#35760;&#20107;&#21153;&#30340;&#25552;&#20132;&#39034;&#24207;&#65288;&#20808;&#25552;&#20132;&#30340;&#27492;&#24207;&#21495;&#23567;&#65292;&#21518;&#25552;&#20132;&#30340;&#27492;&#24207;&#21495;&#22823;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_DEL_MARKS
   </code>
   &#65306;&#26631;&#35760;&#26412;&#32452;
   <code>
    undo
   </code>
   &#26085;&#24535;&#20013;&#26159;&#21542;&#21253;&#21547;&#30001;&#20110;
   <code>
    Delete mark
   </code>
   &#25805;&#20316;&#20135;&#29983;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_LOG_START
   </code>
   &#65306;&#34920;&#31034;&#26412;&#32452;
   <code>
    undo
   </code>
   &#26085;&#24535;&#20013;&#31532;&#19968;&#26465;
   <code>
    undo&#26085;&#24535;
   </code>
   &#30340;&#22312;&#39029;&#38754;&#20013;&#30340;&#20559;&#31227;&#37327;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_XID_EXISTS
   </code>
   &#65306;&#26412;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#26159;&#21542;&#21253;&#21547;XID&#20449;&#24687;&#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#26412;&#20070;&#19981;&#20250;&#35762;&#36848;&#26356;&#22810;&#20851;&#20110;XID&#26159;&#20010;&#20160;&#20040;&#19996;&#19996;&#65292;&#26377;&#20852;&#36259;&#30340;&#21516;&#23398;&#21487;&#20197;&#21040;&#25628;&#32034;&#24341;&#25806;&#25110;&#32773;&#25991;&#26723;&#20013;&#25628;&#19968;&#25628;&#21704;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_DICT_TRANS
   </code>
   &#65306;&#26631;&#35760;&#26412;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#26159;&#19981;&#26159;&#30001;DDL&#35821;&#21477;&#20135;&#29983;&#30340;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_TABLE_ID
   </code>
   &#65306;&#22914;&#26524;
   <code>
    TRX_UNDO_DICT_TRANS
   </code>
   &#20026;&#30495;&#65292;&#37027;&#20040;&#26412;&#23646;&#24615;&#34920;&#31034;DDL&#35821;&#21477;&#25805;&#20316;&#30340;&#34920;&#30340;
   <code>
    table id
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_NEXT_LOG
   </code>
   &#65306;&#19979;&#19968;&#32452;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#22312;&#39029;&#38754;&#20013;&#24320;&#22987;&#30340;&#20559;&#31227;&#37327;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_PREV_LOG
   </code>
   &#65306;&#19978;&#19968;&#32452;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#22312;&#39029;&#38754;&#20013;&#24320;&#22987;&#30340;&#20559;&#31227;&#37327;&#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#19968;&#33324;&#26469;&#35828;&#19968;&#20010;Undo&#39029;&#38754;&#38142;&#34920;&#21482;&#23384;&#20648;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#20135;&#29983;&#30340;&#19968;&#32452;undo&#26085;&#24535;&#65292;&#20294;&#26159;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#65292;&#21487;&#33021;&#20250;&#22312;&#19968;&#20010;&#20107;&#21153;&#25552;&#20132;&#20043;&#21518;&#65292;&#20043;&#21518;&#24320;&#21551;&#30340;&#20107;&#21153;&#37325;&#22797;&#21033;&#29992;&#36825;&#20010;Undo&#39029;&#38754;&#38142;&#34920;&#65292;&#36825;&#26679;&#23601;&#20250;&#23548;&#33268;&#19968;&#20010;Undo&#39029;&#38754;&#20013;&#21487;&#33021;&#23384;&#25918;&#22810;&#32452;Undo&#26085;&#24535;&#65292;TRX_UNDO_NEXT_LOG&#21644;TRX_UNDO_PREV_LOG&#23601;&#26159;&#29992;&#26469;&#26631;&#35760;&#19979;&#19968;&#32452;&#21644;&#19978;&#19968;&#32452;undo&#26085;&#24535;&#22312;&#39029;&#38754;&#20013;&#30340;&#20559;&#31227;&#37327;&#30340;&#12290;&#20851;&#20110;&#20160;&#20040;&#26102;&#20505;&#37325;&#29992;Undo&#39029;&#38754;&#38142;&#34920;&#65292;&#24590;&#20040;&#37325;&#29992;&#36825;&#20010;&#38142;&#34920;&#25105;&#20204;&#31245;&#21518;&#20250;&#35814;&#32454;&#35828;&#26126;&#30340;&#65292;&#29616;&#22312;&#20808;&#29702;&#35299;TRX_UNDO_NEXT_LOG&#21644;TRX_UNDO_PREV_LOG&#36825;&#20004;&#20010;&#23646;&#24615;&#30340;&#24847;&#24605;&#23601;&#22909;&#20102;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_UNDO_HISTORY_NODE
   </code>
   &#65306;&#19968;&#20010;12&#23383;&#33410;&#30340;
   <code>
    List Node
   </code>
   &#32467;&#26500;&#65292;&#20195;&#34920;&#19968;&#20010;&#31216;&#20043;&#20026;
   <code>
    History
   </code>
   &#38142;&#34920;&#30340;&#33410;&#28857;&#12290;
  </p>
 </li>
</ul>
<h3 class="heading">
 &#23567;&#32467;
</h3>
<p>
 &#23545;&#20110;&#27809;&#26377;&#34987;&#37325;&#29992;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#26469;&#35828;&#65292;&#38142;&#34920;&#30340;&#31532;&#19968;&#20010;&#39029;&#38754;&#65292;&#20063;&#23601;&#26159;
 <code>
  first undo page
 </code>
 &#22312;&#30495;&#27491;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21069;&#65292;&#20250;&#22635;&#20805;
 <code>
  Undo Page Header
 </code>
 &#12289;
 <code>
  Undo Log Segment Header
 </code>
 &#12289;
 <code>
  Undo Log Header
 </code>
 &#36825;3&#20010;&#37096;&#20998;&#65292;&#20043;&#21518;&#25165;&#24320;&#22987;&#27491;&#24335;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#12290;&#23545;&#20110;&#20854;&#20182;&#30340;&#39029;&#38754;&#26469;&#35828;&#65292;&#20063;&#23601;&#26159;
 <code>
  normal undo page
 </code>
 &#22312;&#30495;&#27491;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21069;&#65292;&#21482;&#20250;&#22635;&#20805;
 <code>
  Undo Page Header
 </code>
 &#12290;&#38142;&#34920;&#30340;
 <code>
  List Base Node
 </code>
 &#23384;&#25918;&#21040;
 <code>
  first undo page
 </code>
 &#30340;
 <code>
  Undo Log Segment Header
 </code>
 &#37096;&#20998;&#65292;
 <code>
  List Node
 </code>
 &#20449;&#24687;&#23384;&#25918;&#21040;&#27599;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#30340;
 <code>
  undo Page Header
 </code>
 &#37096;&#20998;&#65292;&#25152;&#20197;&#30011;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#30340;&#31034;&#24847;&#22270;&#23601;&#26159;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7cocjrk1dvm1ehg16da1di4mfb16.png-87kB" src="EPUB/3cc44608-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<h2 class="heading">
 &#37325;&#29992;Undo&#39029;&#38754;
</h2>
<p>
 &#25105;&#20204;&#21069;&#36793;&#35828;&#20026;&#20102;&#33021;&#25552;&#39640;&#24182;&#21457;&#25191;&#34892;&#30340;&#22810;&#20010;&#20107;&#21153;&#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#30340;&#24615;&#33021;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#20915;&#23450;&#20026;&#27599;&#20010;&#20107;&#21153;&#21333;&#29420;&#20998;&#37197;&#30456;&#24212;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65288;&#26368;&#22810;&#21487;&#33021;&#21333;&#29420;&#20998;&#37197;4&#20010;&#38142;&#34920;&#65289;&#12290;&#20294;&#26159;&#36825;&#26679;&#20063;&#36896;&#25104;&#20102;&#19968;&#20123;&#38382;&#39064;&#65292;&#27604;&#22914;&#20854;&#23454;&#22823;&#37096;&#20998;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21487;&#33021;&#21482;&#20462;&#25913;&#20102;&#19968;&#26465;&#25110;&#20960;&#26465;&#35760;&#24405;&#65292;&#38024;&#23545;&#26576;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#21482;&#20135;&#29983;&#20102;&#38750;&#24120;&#23569;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#65292;&#36825;&#20123;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21487;&#33021;&#21482;&#21344;&#29992;&#19968;&#20002;&#20002;&#23384;&#20648;&#31354;&#38388;&#65292;&#27599;&#24320;&#21551;&#19968;&#20010;&#20107;&#21153;&#23601;&#26032;&#21019;&#24314;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65288;&#34429;&#28982;&#36825;&#20010;&#38142;&#34920;&#20013;&#21482;&#26377;&#19968;&#20010;&#39029;&#38754;&#65289;&#26469;&#23384;&#20648;&#36825;&#20040;&#19968;&#20002;&#20002;
 <code>
  undo&#26085;&#24535;
 </code>
 &#23682;&#19981;&#26159;&#22826;&#28010;&#36153;&#20102;&#20040;&#65311;&#30340;&#30830;&#26159;&#25402;&#28010;&#36153;&#65292;&#20110;&#26159;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#26412;&#30528;&#21220;&#20461;&#33410;&#32422;&#30340;&#20248;&#33391;&#20256;&#32479;&#65292;&#20915;&#23450;&#22312;&#20107;&#21153;&#25552;&#20132;&#21518;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#37325;&#29992;&#35813;&#20107;&#21153;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#12290;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#26159;&#21542;&#21487;&#20197;&#34987;&#37325;&#29992;&#30340;&#26465;&#20214;&#24456;&#31616;&#21333;&#65306;
</p>
<ul>
 <li>
  <p>
   &#35813;&#38142;&#34920;&#20013;&#21482;&#21253;&#21547;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#12290;
  </p>
  <p>
   &#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#20135;&#29983;&#20102;&#38750;&#24120;&#22810;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#37027;&#20040;&#23427;&#21487;&#33021;&#30003;&#35831;&#38750;&#24120;&#22810;&#30340;&#39029;&#38754;&#21152;&#20837;&#21040;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#12290;&#22312;&#35813;&#20107;&#29289;&#25552;&#20132;&#21518;&#65292;&#22914;&#26524;&#23558;&#25972;&#20010;&#38142;&#34920;&#20013;&#30340;&#39029;&#38754;&#37117;&#37325;&#29992;&#65292;&#37027;&#23601;&#24847;&#21619;&#30528;&#21363;&#20351;&#26032;&#30340;&#20107;&#21153;&#24182;&#27809;&#26377;&#21521;&#35813;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#20889;&#20837;&#24456;&#22810;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#37027;&#35813;&#38142;&#34920;&#20013;&#20063;&#24471;&#32500;&#25252;&#38750;&#24120;&#22810;&#30340;&#39029;&#38754;&#65292;&#37027;&#20123;&#29992;&#19981;&#21040;&#30340;&#39029;&#38754;&#20063;&#19981;&#33021;&#34987;&#21035;&#30340;&#20107;&#21153;&#25152;&#20351;&#29992;&#65292;&#36825;&#26679;&#23601;&#36896;&#25104;&#20102;&#21478;&#19968;&#31181;&#28010;&#36153;&#12290;&#25152;&#20197;&#35774;&#35745;
   <code>
    InnoDB
   </code>
   &#30340;&#22823;&#21460;&#20204;&#35268;&#23450;&#65292;&#21482;&#26377;&#22312;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#21482;&#21253;&#21547;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#26102;&#65292;&#35813;&#38142;&#34920;&#25165;&#21487;&#20197;&#34987;&#19979;&#19968;&#20010;&#20107;&#21153;&#25152;&#37325;&#29992;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#35813;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#24050;&#32463;&#20351;&#29992;&#30340;&#31354;&#38388;&#23567;&#20110;&#25972;&#20010;&#39029;&#38754;&#31354;&#38388;&#30340;3/4&#12290;
  </p>
 </li>
</ul>
<p>
 &#25105;&#20204;&#21069;&#36793;&#35828;&#36807;&#65292;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#25353;&#29031;&#23384;&#20648;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#25152;&#23646;&#30340;&#22823;&#31867;&#21487;&#20197;&#34987;&#20998;&#20026;
 <code>
  insert undo&#38142;&#34920;
 </code>
 &#21644;
 <code>
  update undo&#38142;&#34920;
 </code>
 &#20004;&#31181;&#65292;&#36825;&#20004;&#31181;&#38142;&#34920;&#22312;&#34987;&#37325;&#29992;&#26102;&#30340;&#31574;&#30053;&#20063;&#26159;&#19981;&#21516;&#30340;&#65292;&#25105;&#20204;&#20998;&#21035;&#30475;&#19968;&#19979;&#65306;
</p>
<ul>
 <li>
  <p>
   insert undo&#38142;&#34920;
  </p>
  <p>
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#20013;&#21482;&#23384;&#20648;&#31867;&#22411;&#20026;
   <code>
    TRX_UNDO_INSERT_REC
   </code>
   &#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#36825;&#31181;&#31867;&#22411;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#22312;&#20107;&#21153;&#25552;&#20132;&#20043;&#21518;&#23601;&#27809;&#29992;&#20102;&#65292;&#23601;&#21487;&#20197;&#34987;&#28165;&#38500;&#25481;&#12290;&#25152;&#20197;&#22312;&#26576;&#20010;&#20107;&#21153;&#25552;&#20132;&#21518;&#65292;&#37325;&#29992;&#36825;&#20010;&#20107;&#21153;&#30340;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#65288;&#36825;&#20010;&#38142;&#34920;&#20013;&#21482;&#26377;&#19968;&#20010;&#39029;&#38754;&#65289;&#26102;&#65292;&#21487;&#20197;&#30452;&#25509;&#25226;&#20043;&#21069;&#20107;&#21153;&#20889;&#20837;&#30340;&#19968;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#35206;&#30422;&#25481;&#65292;&#20174;&#22836;&#24320;&#22987;&#20889;&#20837;&#26032;&#20107;&#21153;&#30340;&#19968;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#22914;&#19979;&#22270;&#25152;&#31034;&#65306;
  </p>
  <p>
  </p>
  <figure>
   <img alt="image_1d7el7sg0pje14rjc06rp51r8r1m.png-91.7kB" src="EPUB/3cd6698c-13d6-11ed-838d-acde48001122">
   <figcaption>
   </figcaption>
  </figure>
  <p>
  </p>
  <p>
   &#22914;&#22270;&#25152;&#31034;&#65292;&#20551;&#35774;&#26377;&#19968;&#20010;&#20107;&#21153;&#20351;&#29992;&#30340;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#65292;&#21040;&#20107;&#21153;&#25552;&#20132;&#26102;&#65292;&#21482;&#21521;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#20013;&#25554;&#20837;&#20102;3&#26465;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#36825;&#20010;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#21482;&#30003;&#35831;&#20102;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#12290;&#20551;&#35774;&#27492;&#21051;&#35813;&#39029;&#38754;&#24050;&#20351;&#29992;&#30340;&#31354;&#38388;&#23567;&#20110;&#25972;&#20010;&#39029;&#38754;&#22823;&#23567;&#30340;3/4&#65292;&#37027;&#20040;&#19979;&#19968;&#20010;&#20107;&#21153;&#23601;&#21487;&#20197;&#37325;&#29992;&#36825;&#20010;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#65288;&#38142;&#34920;&#20013;&#21482;&#26377;&#19968;&#20010;&#39029;&#38754;&#65289;&#12290;&#20551;&#35774;&#27492;&#26102;&#26377;&#19968;&#20010;&#26032;&#20107;&#21153;&#37325;&#29992;&#20102;&#35813;
   <code>
    insert undo&#38142;&#34920;
   </code>
   &#65292;&#37027;&#20040;&#21487;&#20197;&#30452;&#25509;&#25226;&#26087;&#30340;&#19968;&#32452;
   <code>
    undo&#26085;&#24535;
   </code>
   &#35206;&#30422;&#25481;&#65292;&#20889;&#20837;&#19968;&#32452;&#26032;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#24403;&#28982;&#65292;&#22312;&#37325;&#29992;Undo&#39029;&#38754;&#38142;&#34920;&#20889;&#20837;&#26032;&#30340;&#19968;&#32452;undo&#26085;&#24535;&#26102;&#65292;&#19981;&#20165;&#20250;&#20889;&#20837;&#26032;&#30340;Undo Log Header&#65292;&#36824;&#20250;&#36866;&#24403;&#35843;&#25972;Undo Page Header&#12289;Undo Log Segment Header&#12289;Undo Log Header&#20013;&#30340;&#19968;&#20123;&#23646;&#24615;&#65292;&#27604;&#22914;TRX_UNDO_PAGE_START&#12289;TRX_UNDO_PAGE_FREE&#31561;&#31561;&#31561;&#31561;&#65292;&#36825;&#20123;&#25105;&#20204;&#23601;&#19981;&#20855;&#20307;&#21792;&#21480;&#20102;&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   update undo&#38142;&#34920;
  </p>
  <p>
   &#22312;&#19968;&#20010;&#20107;&#21153;&#25552;&#20132;&#21518;&#65292;&#23427;&#30340;
   <code>
    update undo&#38142;&#34920;
   </code>
   &#20013;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#20063;&#19981;&#33021;&#31435;&#21363;&#21024;&#38500;&#25481;&#65288;&#36825;&#20123;&#26085;&#24535;&#29992;&#20110;MVCC&#65292;&#25105;&#20204;&#21518;&#36793;&#20250;&#35828;&#30340;&#65289;&#12290;&#25152;&#20197;&#22914;&#26524;&#20043;&#21518;&#30340;&#20107;&#21153;&#24819;&#37325;&#29992;
   <code>
    update undo&#38142;&#34920;
   </code>
   &#26102;&#65292;&#23601;&#19981;&#33021;&#35206;&#30422;&#20043;&#21069;&#20107;&#21153;&#20889;&#20837;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#12290;&#36825;&#26679;&#23601;&#30456;&#24403;&#20110;&#22312;&#21516;&#19968;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#20013;&#20889;&#20837;&#20102;&#22810;&#32452;&#30340;
   <code>
    undo&#26085;&#24535;
   </code>
   &#65292;&#25928;&#26524;&#30475;&#36215;&#26469;&#23601;&#26159;&#36825;&#26679;&#65306;
  </p>
  <p>
  </p>
  <figure>
   <img alt="image_1d7elkmtjdbv1kth1c9jk17is123.png-126.3kB" src="EPUB/3cea929a-13d6-11ed-838d-acde48001122">
   <figcaption>
   </figcaption>
  </figure>
  <p>
  </p>
 </li>
</ul>
<h2 class="heading">
 &#22238;&#28378;&#27573;
</h2>
<h3 class="heading">
 &#22238;&#28378;&#27573;&#30340;&#27010;&#24565;
</h3>
<p>
 &#25105;&#20204;&#29616;&#22312;&#30693;&#36947;&#19968;&#20010;&#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#26368;&#22810;&#21487;&#20197;&#20998;&#37197;4&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#22312;&#21516;&#19968;&#26102;&#21051;&#19981;&#21516;&#20107;&#21153;&#25317;&#26377;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#26159;&#19981;&#19968;&#26679;&#30340;&#65292;&#25152;&#20197;&#22312;&#21516;&#19968;&#26102;&#21051;&#31995;&#32479;&#37324;&#20854;&#23454;&#21487;&#20197;&#26377;&#35768;&#35768;&#22810;&#22810;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#23384;&#22312;&#12290;&#20026;&#20102;&#26356;&#22909;&#30340;&#31649;&#29702;&#36825;&#20123;&#38142;&#34920;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#21448;&#35774;&#35745;&#20102;&#19968;&#20010;&#31216;&#20043;&#20026;
 <code>
  Rollback Segment Header
 </code>
 &#30340;&#39029;&#38754;&#65292;&#22312;&#36825;&#20010;&#39029;&#38754;&#20013;&#23384;&#25918;&#20102;&#21508;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#30340;
 <code>
  frist undo page
 </code>
 &#30340;
 <code>
  &#39029;&#21495;
 </code>
 &#65292;&#20182;&#20204;&#25226;&#36825;&#20123;
 <code>
  &#39029;&#21495;
 </code>
 &#31216;&#20043;&#20026;
 <code>
  undo slot
 </code>
 &#12290;&#25105;&#20204;&#21487;&#20197;&#36825;&#26679;&#29702;&#35299;&#65292;&#27599;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#37117;&#30456;&#24403;&#20110;&#26159;&#19968;&#20010;&#29677;&#65292;&#36825;&#20010;&#38142;&#34920;&#30340;
 <code>
  first undo page
 </code>
 &#23601;&#30456;&#24403;&#20110;&#36825;&#20010;&#29677;&#30340;&#29677;&#38271;&#65292;&#25214;&#21040;&#20102;&#36825;&#20010;&#29677;&#30340;&#29677;&#38271;&#65292;&#23601;&#21487;&#20197;&#25214;&#21040;&#29677;&#37324;&#30340;&#20854;&#20182;&#21516;&#23398;&#65288;&#20854;&#20182;&#21516;&#23398;&#30456;&#24403;&#20110;
 <code>
  normal undo page
 </code>
 &#65289;&#12290;&#26377;&#26102;&#20505;&#23398;&#26657;&#38656;&#35201;&#21521;&#36825;&#20123;&#29677;&#32423;&#20256;&#36798;&#19968;&#19979;&#31934;&#31070;&#65292;&#23601;&#38656;&#35201;&#25226;&#29677;&#38271;&#37117;&#21484;&#38598;&#22312;&#20250;&#35758;&#23460;&#65292;&#36825;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#23601;&#30456;&#24403;&#20110;&#26159;&#19968;&#20010;&#20250;&#35758;&#23460;&#12290;
</p>
<p>
 &#25105;&#20204;&#30475;&#19968;&#19979;&#36825;&#20010;&#31216;&#20043;&#20026;
 <code>
  Rollback Segment Header
 </code>
 &#30340;&#39029;&#38754;&#38271;&#21861;&#26679;&#65288;&#20197;&#40664;&#35748;&#30340;16KB&#20026;&#20363;&#65289;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7gs2k8u1i9i15r71dg97fj10jv9.png-88kB" src="EPUB/3d02d59e-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#35268;&#23450;&#65292;&#27599;&#19968;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#37117;&#23545;&#24212;&#30528;&#19968;&#20010;&#27573;&#65292;&#36825;&#20010;&#27573;&#23601;&#31216;&#20026;
 <code>
  Rollback Segment
 </code>
 &#65292;&#32763;&#35793;&#36807;&#26469;&#23601;&#26159;
 <code>
  &#22238;&#28378;&#27573;
 </code>
 &#12290;&#19982;&#25105;&#20204;&#20043;&#21069;&#20171;&#32461;&#30340;&#21508;&#31181;&#27573;&#19981;&#21516;&#30340;&#26159;&#65292;&#36825;&#20010;
 <code>
  Rollback Segment
 </code>
 &#37324;&#20854;&#23454;&#21482;&#26377;&#19968;&#20010;&#39029;&#38754;&#65288;&#36825;&#21487;&#33021;&#26159;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#20204;&#30340;&#19968;&#31181;&#27905;&#30294;&#65292;&#20182;&#20204;&#21487;&#33021;&#35273;&#24471;&#20026;&#20102;&#26576;&#20010;&#30446;&#30340;&#21435;&#20998;&#37197;&#39029;&#38754;&#30340;&#35805;&#37117;&#24471;&#20808;&#30003;&#35831;&#19968;&#20010;&#27573;&#65292;&#25110;&#32773;&#20182;&#20204;&#35273;&#24471;&#34429;&#28982;&#30446;&#21069;&#29256;&#26412;&#30340;
 <code>
  MySQL
 </code>
 &#37324;
 <code>
  Rollback Segment
 </code>
 &#37324;&#20854;&#23454;&#21482;&#26377;&#19968;&#20010;&#39029;&#38754;&#65292;&#20294;&#21487;&#33021;&#20043;&#21518;&#30340;&#29256;&#26412;&#37324;&#20250;&#22686;&#21152;&#39029;&#38754;&#20063;&#35828;&#19981;&#23450;&#65289;&#12290;
</p>
<p>
 &#20102;&#35299;&#20102;
 <code>
  Rollback Segment
 </code>
 &#30340;&#21547;&#20041;&#20043;&#21518;&#65292;&#25105;&#20204;&#20877;&#26469;&#30475;&#30475;&#36825;&#20010;&#31216;&#20043;&#20026;
 <code>
  Rollback Segment Header
 </code>
 &#30340;&#39029;&#38754;&#30340;&#21508;&#20010;&#37096;&#20998;&#30340;&#21547;&#20041;&#37117;&#26159;&#21861;&#24847;&#24605;&#65306;
</p>
<ul>
 <li>
  <p>
   <code>
    TRX_RSEG_MAX_SIZE
   </code>
   &#65306;&#26412;
   <code>
    Rollback Segment
   </code>
   &#20013;&#31649;&#29702;&#30340;&#25152;&#26377;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#25968;&#37327;&#20043;&#21644;&#30340;&#26368;&#22823;&#20540;&#12290;&#25442;&#21477;&#35805;&#35828;&#65292;&#26412;
   <code>
    Rollback Segment
   </code>
   &#20013;&#25152;&#26377;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20013;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#25968;&#37327;&#20043;&#21644;&#19981;&#33021;&#36229;&#36807;
   <code>
    TRX_RSEG_MAX_SIZE
   </code>
   &#20195;&#34920;&#30340;&#20540;&#12290;
  </p>
  <p>
   &#35813;&#23646;&#24615;&#30340;&#20540;&#40664;&#35748;&#20026;&#26080;&#38480;&#22823;&#65292;&#20063;&#23601;&#26159;&#25105;&#20204;&#24819;&#20889;&#22810;&#23569;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#37117;&#21487;&#20197;&#12290;
  </p>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#26080;&#38480;&#22823;&#20854;&#23454;&#20063;&#21482;&#26159;&#20010;&#22840;&#24352;&#30340;&#35828;&#27861;&#65292;4&#20010;&#23383;&#33410;&#33021;&#34920;&#31034;&#26368;&#22823;&#30340;&#25968;&#20063;&#23601;&#26159;0xFFFFFFFF&#65292;&#20294;&#26159;&#25105;&#20204;&#20043;&#21518;&#20250;&#30475;&#21040;&#65292;0xFFFFFFFF&#36825;&#20010;&#25968;&#26377;&#29305;&#27530;&#29992;&#36884;&#65292;&#25152;&#20197;&#23454;&#38469;&#19978;TRX_RSEG_MAX_SIZE&#30340;&#20540;&#20026;0xFFFFFFFE&#12290;
   </p>
  </blockquote>
 </li>
 <li>
  <p>
   <code>
    TRX_RSEG_HISTORY_SIZE
   </code>
   &#65306;
   <code>
    History
   </code>
   &#38142;&#34920;&#21344;&#29992;&#30340;&#39029;&#38754;&#25968;&#37327;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_RSEG_HISTORY
   </code>
   &#65306;
   <code>
    History
   </code>
   &#38142;&#34920;&#30340;&#22522;&#33410;&#28857;&#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_RSEG_FSEG_HEADER
   </code>
   &#65306;&#26412;
   <code>
    Rollback Segment
   </code>
   &#23545;&#24212;&#30340;10&#23383;&#33410;&#22823;&#23567;&#30340;
   <code>
    Segment Header
   </code>
   &#32467;&#26500;&#65292;&#36890;&#36807;&#23427;&#21487;&#20197;&#25214;&#21040;&#26412;&#27573;&#23545;&#24212;&#30340;
   <code>
    INODE Entry
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   <code>
    TRX_RSEG_UNDO_SLOTS
   </code>
   &#65306;&#21508;&#20010;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;
   <code>
    first undo page
   </code>
   &#30340;
   <code>
    &#39029;&#21495;
   </code>
   &#38598;&#21512;&#65292;&#20063;&#23601;&#26159;
   <code>
    undo slot
   </code>
   &#38598;&#21512;&#12290;
  </p>
  <p>
   &#19968;&#20010;&#39029;&#21495;&#21344;&#29992;
   <code>
    4
   </code>
   &#20010;&#23383;&#33410;&#65292;&#23545;&#20110;
   <code>
    16KB
   </code>
   &#22823;&#23567;&#30340;&#39029;&#38754;&#26469;&#35828;&#65292;&#36825;&#20010;
   <code>
    TRX_RSEG_UNDO_SLOTS
   </code>
   &#37096;&#20998;&#20849;&#23384;&#20648;&#20102;
   <code>
    1024
   </code>
   &#20010;
   <code>
    undo slot
   </code>
   &#65292;&#25152;&#20197;&#20849;&#38656;
   <code>
    1024 &#215; 4 = 4096
   </code>
   &#20010;&#23383;&#33410;&#12290;
  </p>
 </li>
</ul>
<h3 class="heading">
 &#20174;&#22238;&#28378;&#27573;&#20013;&#30003;&#35831;Undo&#39029;&#38754;&#38142;&#34920;
</h3>
<p>
 &#21021;&#22987;&#24773;&#20917;&#19979;&#65292;&#30001;&#20110;&#26410;&#21521;&#20219;&#20309;&#20107;&#21153;&#20998;&#37197;&#20219;&#20309;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#25152;&#20197;&#23545;&#20110;&#19968;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#26469;&#35828;&#65292;&#23427;&#30340;&#21508;&#20010;
 <code>
  undo slot
 </code>
 &#37117;&#34987;&#35774;&#32622;&#25104;&#20102;&#19968;&#20010;&#29305;&#27530;&#30340;&#20540;&#65306;
 <code>
  FIL_NULL
 </code>
 &#65288;&#23545;&#24212;&#30340;&#21313;&#20845;&#36827;&#21046;&#23601;&#26159;
 <code>
  0xFFFFFFFF
 </code>
 &#65289;&#65292;&#34920;&#31034;&#35813;
 <code>
  undo slot
 </code>
 &#19981;&#25351;&#21521;&#20219;&#20309;&#39029;&#38754;&#12290;
</p>
<p>
 &#38543;&#30528;&#26102;&#38388;&#30340;&#27969;&#36893;&#65292;&#24320;&#22987;&#26377;&#20107;&#21153;&#38656;&#35201;&#20998;&#37197;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#20102;&#65292;&#23601;&#20174;&#22238;&#28378;&#27573;&#30340;&#31532;&#19968;&#20010;
 <code>
  undo slot
 </code>
 &#24320;&#22987;&#65292;&#30475;&#30475;&#35813;
 <code>
  undo slot
 </code>
 &#30340;&#20540;&#26159;&#19981;&#26159;
 <code>
  FIL_NULL
 </code>
 &#65306;
</p>
<ul>
 <li>
  <p>
   &#22914;&#26524;&#26159;
   <code>
    FIL_NULL
   </code>
   &#65292;&#37027;&#20040;&#22312;&#34920;&#31354;&#38388;&#20013;&#26032;&#21019;&#24314;&#19968;&#20010;&#27573;&#65288;&#20063;&#23601;&#26159;
   <code>
    Undo Log Segment
   </code>
   &#65289;&#65292;&#28982;&#21518;&#20174;&#27573;&#37324;&#30003;&#35831;&#19968;&#20010;&#39029;&#38754;&#20316;&#20026;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;
   <code>
    first undo page
   </code>
   &#65292;&#28982;&#21518;&#25226;&#35813;
   <code>
    undo slot
   </code>
   &#30340;&#20540;&#35774;&#32622;&#20026;&#21018;&#21018;&#30003;&#35831;&#30340;&#36825;&#20010;&#39029;&#38754;&#30340;&#39029;&#21495;&#65292;&#36825;&#26679;&#20063;&#23601;&#24847;&#21619;&#30528;&#36825;&#20010;
   <code>
    undo slot
   </code>
   &#34987;&#20998;&#37197;&#32473;&#20102;&#36825;&#20010;&#20107;&#21153;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#22914;&#26524;&#19981;&#26159;
   <code>
    FIL_NULL
   </code>
   &#65292;&#35828;&#26126;&#35813;
   <code>
    undo slot
   </code>
   &#24050;&#32463;&#25351;&#21521;&#20102;&#19968;&#20010;
   <code>
    undo&#38142;&#34920;
   </code>
   &#65292;&#20063;&#23601;&#26159;&#35828;&#36825;&#20010;
   <code>
    undo slot
   </code>
   &#24050;&#32463;&#34987;&#21035;&#30340;&#20107;&#21153;&#21344;&#29992;&#20102;&#65292;&#37027;&#23601;&#36339;&#21040;&#19979;&#19968;&#20010;
   <code>
    undo slot
   </code>
   &#65292;&#21028;&#26029;&#35813;
   <code>
    undo slot
   </code>
   &#30340;&#20540;&#26159;&#19981;&#26159;
   <code>
    FIL_NULL
   </code>
   &#65292;&#37325;&#22797;&#19978;&#36793;&#30340;&#27493;&#39588;&#12290;
  </p>
 </li>
</ul>
<p>
 &#19968;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#20013;&#21253;&#21547;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#65292;&#22914;&#26524;&#36825;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#30340;&#20540;&#37117;&#19981;&#20026;
 <code>
  FIL_NULL
 </code>
 &#65292;&#36825;&#23601;&#24847;&#21619;&#30528;&#36825;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#37117;&#24050;&#32463;&#21517;&#33457;&#26377;&#20027;&#65288;&#34987;&#20998;&#37197;&#32473;&#20102;&#26576;&#20010;&#20107;&#21153;&#65289;&#65292;&#27492;&#26102;&#30001;&#20110;&#26032;&#20107;&#21153;&#26080;&#27861;&#20877;&#33719;&#24471;&#26032;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#23601;&#20250;&#22238;&#28378;&#36825;&#20010;&#20107;&#21153;&#24182;&#19988;&#32473;&#29992;&#25143;&#25253;&#38169;&#65306;
</p>
<pre><code class="hljs bash" lang="bash">Too many active concurrent transactions
</code></pre>
<p>
 &#29992;&#25143;&#30475;&#21040;&#36825;&#20010;&#38169;&#35823;&#65292;&#21487;&#20197;&#36873;&#25321;&#37325;&#26032;&#25191;&#34892;&#36825;&#20010;&#20107;&#21153;&#65288;&#21487;&#33021;&#37325;&#26032;&#25191;&#34892;&#26102;&#26377;&#21035;&#30340;&#20107;&#21153;&#25552;&#20132;&#20102;&#65292;&#35813;&#20107;&#21153;&#23601;&#21487;&#20197;&#34987;&#20998;&#37197;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#20102;&#65289;&#12290;
</p>
<p>
 &#24403;&#19968;&#20010;&#20107;&#21153;&#25552;&#20132;&#26102;&#65292;&#23427;&#25152;&#21344;&#29992;&#30340;
 <code>
  undo slot
 </code>
 &#26377;&#20004;&#31181;&#21629;&#36816;&#65306;
</p>
<ul>
 <li>
  <p>
   &#22914;&#26524;&#35813;
   <code>
    undo slot
   </code>
   &#25351;&#21521;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#31526;&#21512;&#34987;&#37325;&#29992;&#30340;&#26465;&#20214;&#65288;&#23601;&#26159;&#25105;&#20204;&#19978;&#36793;&#35828;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#21482;&#21344;&#29992;&#19968;&#20010;&#39029;&#38754;&#24182;&#19988;&#24050;&#20351;&#29992;&#31354;&#38388;&#23567;&#20110;&#25972;&#20010;&#39029;&#38754;&#30340;3/4&#65289;&#12290;
  </p>
  <p>
   &#35813;
   <code>
    undo slot
   </code>
   &#23601;&#22788;&#20110;&#34987;&#32531;&#23384;&#30340;&#29366;&#24577;&#65292;&#35774;&#35745;
   <code>
    InnoDB
   </code>
   &#30340;&#22823;&#21460;&#35268;&#23450;&#36825;&#26102;&#35813;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;
   <code>
    TRX_UNDO_STATE
   </code>
   &#23646;&#24615;&#65288;&#35813;&#23646;&#24615;&#22312;
   <code>
    first undo page
   </code>
   &#30340;
   <code>
    Undo Log Segment Header
   </code>
   &#37096;&#20998;&#65289;&#20250;&#34987;&#35774;&#32622;&#20026;
   <code>
    TRX_UNDO_CACHED
   </code>
   &#12290;
  </p>
  <p>
   &#34987;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#37117;&#20250;&#34987;&#21152;&#20837;&#21040;&#19968;&#20010;&#38142;&#34920;&#65292;&#26681;&#25454;&#23545;&#24212;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;&#31867;&#22411;&#19981;&#21516;&#65292;&#20063;&#20250;&#34987;&#21152;&#20837;&#21040;&#19981;&#21516;&#30340;&#38142;&#34920;&#65306;
  </p>
  <ul>
   <li>
    <p>
     &#22914;&#26524;&#23545;&#24212;&#30340;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#26159;
     <code>
      insert undo&#38142;&#34920;
     </code>
     &#65292;&#21017;&#35813;
     <code>
      undo slot
     </code>
     &#20250;&#34987;&#21152;&#20837;
     <code>
      insert undo cached&#38142;&#34920;
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#22914;&#26524;&#23545;&#24212;&#30340;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#26159;
     <code>
      update undo&#38142;&#34920;
     </code>
     &#65292;&#21017;&#35813;
     <code>
      undo slot
     </code>
     &#20250;&#34987;&#21152;&#20837;
     <code>
      update undo cached&#38142;&#34920;
     </code>
     &#12290;
    </p>
   </li>
  </ul>
  <p>
   &#19968;&#20010;&#22238;&#28378;&#27573;&#23601;&#23545;&#24212;&#30528;&#19978;&#36848;&#20004;&#20010;
   <code>
    cached&#38142;&#34920;
   </code>
   &#65292;&#22914;&#26524;&#26377;&#26032;&#20107;&#21153;&#35201;&#20998;&#37197;
   <code>
    undo slot
   </code>
   &#26102;&#65292;&#20808;&#20174;&#23545;&#24212;&#30340;
   <code>
    cached&#38142;&#34920;
   </code>
   &#20013;&#25214;&#12290;&#22914;&#26524;&#27809;&#26377;&#34987;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#65292;&#25165;&#20250;&#21040;&#22238;&#28378;&#27573;&#30340;
   <code>
    Rollback Segment Header
   </code>
   &#39029;&#38754;&#20013;&#20877;&#21435;&#25214;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#22914;&#26524;&#35813;
   <code>
    undo slot
   </code>
   &#25351;&#21521;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#19981;&#31526;&#21512;&#34987;&#37325;&#29992;&#30340;&#26465;&#20214;&#65292;&#37027;&#20040;&#38024;&#23545;&#35813;
   <code>
    undo slot
   </code>
   &#23545;&#24212;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#31867;&#22411;&#19981;&#21516;&#65292;&#20063;&#20250;&#26377;&#19981;&#21516;&#30340;&#22788;&#29702;&#65306;
  </p>
  <ul>
   <li>
    <p>
     &#22914;&#26524;&#23545;&#24212;&#30340;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#26159;
     <code>
      insert undo&#38142;&#34920;
     </code>
     &#65292;&#21017;&#35813;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#30340;
     <code>
      TRX_UNDO_STATE
     </code>
     &#23646;&#24615;&#20250;&#34987;&#35774;&#32622;&#20026;
     <code>
      TRX_UNDO_TO_FREE
     </code>
     &#65292;&#20043;&#21518;&#35813;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#23545;&#24212;&#30340;&#27573;&#20250;&#34987;&#37322;&#25918;&#25481;&#65288;&#20063;&#23601;&#24847;&#21619;&#30528;&#27573;&#20013;&#30340;&#39029;&#38754;&#21487;&#20197;&#34987;&#25386;&#20316;&#20182;&#29992;&#65289;&#65292;&#28982;&#21518;&#25226;&#35813;
     <code>
      undo slot
     </code>
     &#30340;&#20540;&#35774;&#32622;&#20026;
     <code>
      FIL_NULL
     </code>
     &#12290;
    </p>
   </li>
   <li>
    <p>
     &#22914;&#26524;&#23545;&#24212;&#30340;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#26159;
     <code>
      update undo&#38142;&#34920;
     </code>
     &#65292;&#21017;&#35813;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#30340;
     <code>
      TRX_UNDO_STATE
     </code>
     &#23646;&#24615;&#20250;&#34987;&#35774;&#32622;&#20026;
     <code>
      TRX_UNDO_TO_PRUGE
     </code>
     &#65292;&#21017;&#20250;&#23558;&#35813;
     <code>
      undo slot
     </code>
     &#30340;&#20540;&#35774;&#32622;&#20026;
     <code>
      FIL_NULL
     </code>
     &#65292;&#28982;&#21518;&#23558;&#26412;&#27425;&#20107;&#21153;&#20889;&#20837;&#30340;&#19968;&#32452;
     <code>
      undo
     </code>
     &#26085;&#24535;&#25918;&#21040;&#25152;&#35859;&#30340;
     <code>
      History&#38142;&#34920;
     </code>
     &#20013;&#65288;&#38656;&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#36825;&#37324;&#24182;&#19981;&#20250;&#23558;
     <code>
      Undo&#39029;&#38754;
     </code>
     &#38142;&#34920;&#23545;&#24212;&#30340;&#27573;&#32473;&#37322;&#25918;&#25481;&#65292;&#22240;&#20026;&#36825;&#20123;
     <code>
      undo
     </code>
     &#26085;&#24535;&#36824;&#26377;&#29992;&#21602;&#65374;&#65289;&#12290;
    </p>
   </li>
  </ul>
  <blockquote class="warning">
   <p>
    &#23567;&#36148;&#22763;&#65306;

&#26356;&#22810;&#20851;&#20110;History&#38142;&#34920;&#30340;&#20107;&#25105;&#20204;&#31245;&#21518;&#20877;&#35828;&#65292;&#31245;&#23433;&#21247;&#36481;&#21704;&#12290;
   </p>
  </blockquote>
 </li>
</ul>
<h3 class="heading">
 &#22810;&#20010;&#22238;&#28378;&#27573;
</h3>
<p>
 &#25105;&#20204;&#35828;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#26368;&#22810;&#20998;&#37197;
 <code>
  4
 </code>
 &#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#32780;&#19968;&#20010;&#22238;&#28378;&#27573;&#37324;&#21482;&#26377;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#65292;&#24456;&#26174;&#28982;
 <code>
  undo slot
 </code>
 &#30340;&#25968;&#37327;&#26377;&#28857;&#23569;&#21834;&#12290;&#25105;&#20204;&#21363;&#20351;&#20551;&#35774;&#19968;&#20010;&#35835;&#20889;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21482;&#20998;&#37197;
 <code>
  1
 </code>
 &#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#37027;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#20063;&#21482;&#33021;&#25903;&#25345;
 <code>
  1024
 </code>
 &#20010;&#35835;&#20889;&#20107;&#21153;&#21516;&#26102;&#25191;&#34892;&#65292;&#20877;&#22810;&#20102;&#23601;&#23849;&#28291;&#20102;&#12290;&#36825;&#23601;&#30456;&#24403;&#20110;&#20250;&#35758;&#23460;&#21482;&#33021;&#23481;&#19979;1024&#20010;&#29677;&#38271;&#21516;&#26102;&#24320;&#20250;&#65292;&#22914;&#26524;&#26377;&#20960;&#21315;&#20154;&#21516;&#26102;&#21040;&#20250;&#35758;&#23460;&#24320;&#20250;&#30340;&#35805;&#65292;&#37027;&#21518;&#26469;&#30340;&#37027;&#20123;&#29677;&#38271;&#23601;&#27809;&#22320;&#26041;&#22352;&#20102;&#65292;&#21482;&#33021;&#31561;&#24453;&#21069;&#36793;&#30340;&#20154;&#24320;&#23436;&#20250;&#33258;&#24049;&#20877;&#36827;&#21435;&#24320;&#12290;
</p>
<p>
 &#35805;&#35828;&#22312;
 <code>
  InnoDB
 </code>
 &#30340;&#26089;&#26399;&#21457;&#23637;&#38454;&#27573;&#30340;&#30830;&#21482;&#26377;&#19968;&#20010;&#22238;&#28378;&#27573;&#65292;&#20294;&#26159;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#21518;&#26469;&#24847;&#35782;&#21040;&#20102;&#36825;&#20010;&#38382;&#39064;&#65292;&#21643;&#35299;&#20915;&#36825;&#38382;&#39064;&#21602;&#65311;&#20250;&#35758;&#23460;&#19981;&#22815;&#65292;&#22810;&#30422;&#20960;&#20010;&#20250;&#35758;&#23460;&#19981;&#23601;&#24471;&#20102;&#12290;&#25152;&#20197;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#19968;&#21475;&#27668;&#23450;&#20041;&#20102;
 <code>
  128
 </code>
 &#20010;&#22238;&#28378;&#27573;&#65292;&#20063;&#23601;&#30456;&#24403;&#20110;&#26377;&#20102;
 <code>
  128 &#215; 1024 = 131072
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#12290;&#20551;&#35774;&#19968;&#20010;&#35835;&#20889;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#21482;&#20998;&#37197;
 <code>
  1
 </code>
 &#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#65292;&#37027;&#20040;&#23601;&#21487;&#20197;&#21516;&#26102;&#25903;&#25345;
 <code>
  131072
 </code>
 &#20010;&#35835;&#20889;&#20107;&#21153;&#24182;&#21457;&#25191;&#34892;&#65288;&#36825;&#20040;&#22810;&#20107;&#21153;&#22312;&#19968;&#21488;&#26426;&#22120;&#19978;&#24182;&#21457;&#25191;&#34892;&#65292;&#36824;&#30495;&#27809;&#35265;&#36807;&#21602;&#65374;&#65289;&#12290;
</p>
<blockquote class="warning">
 <p>
  &#23567;&#36148;&#22763;&#65306;

&#21482;&#35835;&#20107;&#21153;&#24182;&#19981;&#38656;&#35201;&#20998;&#37197;Undo&#39029;&#38754;&#38142;&#34920;&#65292;MySQL 5.7&#20013;&#25152;&#26377;&#21018;&#24320;&#21551;&#30340;&#20107;&#21153;&#40664;&#35748;&#37117;&#26159;&#21482;&#35835;&#20107;&#21153;&#65292;&#21482;&#26377;&#22312;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#23545;&#35760;&#24405;&#20570;&#20102;&#26576;&#20123;&#25913;&#21160;&#26102;&#25165;&#20250;&#34987;&#21319;&#32423;&#20026;&#35835;&#20889;&#20107;&#21153;&#12290;
 </p>
</blockquote>
<p>
 &#27599;&#20010;&#22238;&#28378;&#27573;&#37117;&#23545;&#24212;&#30528;&#19968;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#65292;&#26377;128&#20010;&#22238;&#28378;&#27573;&#65292;&#33258;&#28982;&#23601;&#35201;&#26377;128&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#65292;&#36825;&#20123;&#39029;&#38754;&#30340;&#22320;&#22336;&#24635;&#24471;&#25214;&#20010;&#22320;&#26041;&#23384;&#19968;&#19979;&#21543;&#65281;&#20110;&#26159;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#31532;
 <code>
  5
 </code>
 &#21495;&#39029;&#38754;&#30340;&#26576;&#20010;&#21306;&#22495;&#21253;&#21547;&#20102;128&#20010;8&#23383;&#33410;&#22823;&#23567;&#30340;&#26684;&#23376;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7214jha1cua1dgu1r6718091gbfm.png-27.4kB" src="EPUB/3d19888e-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#27599;&#20010;8&#23383;&#33410;&#30340;&#26684;&#23376;&#30340;&#26500;&#36896;&#23601;&#20687;&#36825;&#26679;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d721oblche9a4pmng15p1dk313.png-9.9kB" src="EPUB/3d2d047c-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#22914;&#26524;&#25152;&#31034;&#65292;&#27599;&#20010;8&#23383;&#33410;&#30340;&#26684;&#23376;&#20854;&#23454;&#30001;&#20004;&#37096;&#20998;&#32452;&#25104;&#65306;
</p>
<ul>
 <li>
  <p>
   4&#23383;&#33410;&#22823;&#23567;&#30340;
   <code>
    Space ID
   </code>
   &#65292;&#20195;&#34920;&#19968;&#20010;&#34920;&#31354;&#38388;&#30340;ID&#12290;
  </p>
 </li>
 <li>
  <p>
   4&#23383;&#33410;&#22823;&#23567;&#30340;
   <code>
    Page number
   </code>
   &#65292;&#20195;&#34920;&#19968;&#20010;&#39029;&#21495;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20063;&#23601;&#26159;&#35828;&#27599;&#20010;8&#23383;&#33410;&#22823;&#23567;&#30340;
 <code>
  &#26684;&#23376;
 </code>
 &#30456;&#24403;&#20110;&#19968;&#20010;&#25351;&#38024;&#65292;&#25351;&#21521;&#26576;&#20010;&#34920;&#31354;&#38388;&#20013;&#30340;&#26576;&#20010;&#39029;&#38754;&#65292;&#36825;&#20123;&#39029;&#38754;&#23601;&#26159;
 <code>
  Rollback Segment Header
 </code>
 &#12290;&#36825;&#37324;&#38656;&#35201;&#27880;&#24847;&#30340;&#19968;&#28857;&#20107;&#65292;&#35201;&#23450;&#20301;&#19968;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#36824;&#38656;&#35201;&#30693;&#36947;&#23545;&#24212;&#30340;&#34920;&#31354;&#38388;ID&#65292;&#36825;&#20063;&#23601;&#24847;&#21619;&#30528;
 <span style="color:red">
  &#19981;&#21516;&#30340;&#22238;&#28378;&#27573;&#21487;&#33021;&#20998;&#24067;&#22312;&#19981;&#21516;&#30340;&#34920;&#31354;&#38388;&#20013;
 </span>
 &#12290;
</p>
<p>
 &#25152;&#20197;&#36890;&#36807;&#19978;&#36793;&#30340;&#21465;&#36848;&#25105;&#20204;&#21487;&#20197;&#22823;&#33268;&#28165;&#26970;&#65292;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#31532;
 <code>
  5
 </code>
 &#21495;&#39029;&#38754;&#20013;&#23384;&#20648;&#20102;128&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#22320;&#22336;&#65292;&#27599;&#20010;
 <code>
  Rollback Segment Header
 </code>
 &#23601;&#30456;&#24403;&#20110;&#19968;&#20010;&#22238;&#28378;&#27573;&#12290;&#22312;
 <code>
  Rollback Segment Header
 </code>
 &#39029;&#38754;&#20013;&#65292;&#21448;&#21253;&#21547;
 <code>
  1024
 </code>
 &#20010;
 <code>
  undo slot
 </code>
 &#65292;&#27599;&#20010;
 <code>
  undo slot
 </code>
 &#37117;&#23545;&#24212;&#19968;&#20010;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#12290;&#25105;&#20204;&#30011;&#20010;&#31034;&#24847;&#22270;&#65306;
</p>
<p>
</p>
<figure>
 <img alt="image_1d7h72gvlin31far16h11elj16tu1m.png-97kB" src="EPUB/3d3d1fce-13d6-11ed-838d-acde48001122">
 <figcaption>
 </figcaption>
</figure>
<p>
</p>
<p>
 &#25226;&#22270;&#19968;&#30011;&#20986;&#26469;&#23601;&#28165;&#29245;&#22810;&#20102;&#12290;
</p>
<h3 class="heading">
 &#22238;&#28378;&#27573;&#30340;&#20998;&#31867;
</h3>
<p>
 &#25105;&#20204;&#25226;&#36825;128&#20010;&#22238;&#28378;&#27573;&#32473;&#32534;&#19968;&#19979;&#21495;&#65292;&#26368;&#24320;&#22987;&#30340;&#22238;&#28378;&#27573;&#31216;&#20043;&#20026;
 <code>
  &#31532;0&#21495;&#22238;&#28378;&#27573;
 </code>
 &#65292;&#20043;&#21518;&#20381;&#27425;&#36882;&#22686;&#65292;&#26368;&#21518;&#19968;&#20010;&#22238;&#28378;&#27573;&#23601;&#31216;&#20043;&#20026;
 <code>
  &#31532;127&#21495;&#22238;&#28378;&#27573;
 </code>
 &#12290;&#36825;128&#20010;&#22238;&#28378;&#27573;&#21487;&#20197;&#34987;&#20998;&#25104;&#20004;&#22823;&#31867;&#65306;
</p>
<ul>
 <li>
  <p>
   &#31532;
   <code>
    0
   </code>
   &#21495;&#12289;&#31532;
   <code>
    33&#65374;127
   </code>
   &#21495;&#22238;&#28378;&#27573;&#23646;&#20110;&#19968;&#31867;&#12290;&#20854;&#20013;&#31532;
   <code>
    0
   </code>
   &#21495;&#22238;&#28378;&#27573;&#24517;&#39035;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#20013;&#65288;&#23601;&#26159;&#35828;&#31532;
   <code>
    0
   </code>
   &#21495;&#22238;&#28378;&#27573;&#23545;&#24212;&#30340;
   <code>
    Rollback Segment Header
   </code>
   &#39029;&#38754;&#24517;&#39035;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#20013;&#65289;&#65292;&#31532;
   <code>
    33&#65374;127
   </code>
   &#21495;&#22238;&#28378;&#27573;&#26082;&#21487;&#20197;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#20013;&#65292;&#20063;&#21487;&#20197;&#22312;&#33258;&#24049;&#37197;&#32622;&#30340;
   <code>
    undo
   </code>
   &#34920;&#31354;&#38388;&#20013;&#65292;&#20851;&#20110;&#24590;&#20040;&#37197;&#32622;&#25105;&#20204;&#31245;&#21518;&#20877;&#35828;&#12290;
  </p>
  <p>
   &#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#30001;&#20110;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#38656;&#35201;&#20998;&#37197;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#26102;&#65292;&#24517;&#39035;&#20174;&#36825;&#19968;&#31867;&#30340;&#27573;&#20013;&#20998;&#37197;&#30456;&#24212;&#30340;
   <code>
    undo slot
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#31532;
   <code>
    1&#65374;32
   </code>
   &#21495;&#22238;&#28378;&#27573;&#23646;&#20110;&#19968;&#31867;&#12290;&#36825;&#20123;&#22238;&#28378;&#27573;&#24517;&#39035;&#22312;&#20020;&#26102;&#34920;&#31354;&#38388;&#65288;&#23545;&#24212;&#30528;&#25968;&#25454;&#30446;&#24405;&#20013;&#30340;
   <code>
    ibtmp1
   </code>
   &#25991;&#20214;&#65289;&#20013;&#12290;
  </p>
  <p>
   &#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#30001;&#20110;&#23545;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#38656;&#35201;&#20998;&#37197;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#26102;&#65292;&#24517;&#39035;&#20174;&#36825;&#19968;&#31867;&#30340;&#27573;&#20013;&#20998;&#37197;&#30456;&#24212;&#30340;
   <code>
    undo slot
   </code>
   &#12290;
  </p>
 </li>
</ul>
<p>
 &#20063;&#23601;&#26159;&#35828;&#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#26082;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#21448;&#23545;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#37027;&#20040;&#38656;&#35201;&#20026;&#36825;&#20010;&#35760;&#24405;&#20998;&#37197;2&#20010;&#22238;&#28378;&#27573;&#65292;&#20877;&#20998;&#21035;&#21040;&#36825;&#20004;&#20010;&#22238;&#28378;&#27573;&#20013;&#20998;&#37197;&#23545;&#24212;&#30340;
 <code>
  undo slot
 </code>
 &#12290;
</p>
<p>
 &#19981;&#30693;&#36947;&#22823;&#23478;&#26377;&#27809;&#26377;&#30097;&#24785;&#65292;&#20026;&#21861;&#35201;&#25226;&#38024;&#23545;&#26222;&#36890;&#34920;&#21644;&#20020;&#26102;&#34920;&#26469;&#21010;&#20998;&#19981;&#21516;&#31181;&#31867;&#30340;
 <code>
  &#22238;&#28378;&#27573;
 </code>
 &#21602;&#65311;&#36825;&#20010;&#36824;&#24471;&#20174;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#26412;&#36523;&#35828;&#36215;&#65292;&#25105;&#20204;&#35828;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20854;&#23454;&#26159;&#31867;&#22411;&#20026;
 <code>
  FIL_PAGE_UNDO_LOG
 </code>
 &#30340;&#39029;&#38754;&#30340;&#31616;&#31216;&#65292;&#35828;&#21040;&#24213;&#23427;&#20063;&#26159;&#19968;&#20010;&#26222;&#36890;&#30340;&#39029;&#38754;&#12290;&#25105;&#20204;&#21069;&#36793;&#35828;&#36807;&#65292;&#22312;&#20462;&#25913;&#39029;&#38754;&#20043;&#21069;&#19968;&#23450;&#35201;&#20808;&#25226;&#23545;&#24212;&#30340;
 <code>
  redo&#26085;&#24535;
 </code>
 &#20889;&#19978;&#65292;&#36825;&#26679;&#22312;&#31995;&#32479;&#22868;&#28291;&#37325;&#21551;&#26102;&#25165;&#33021;&#24674;&#22797;&#21040;&#22868;&#28291;&#21069;&#30340;&#29366;&#24577;&#12290;&#25105;&#20204;&#21521;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20889;&#20837;
 <code>
  undo&#26085;&#24535;
 </code>
 &#26412;&#36523;&#20063;&#26159;&#19968;&#20010;&#20889;&#39029;&#38754;&#30340;&#36807;&#31243;&#65292;&#35774;&#35745;
 <code>
  InnoDB
 </code>
 &#30340;&#22823;&#21460;&#20026;&#27492;&#36824;&#35774;&#35745;&#20102;&#35768;&#22810;&#31181;
 <code>
  redo&#26085;&#24535;
 </code>
 &#30340;&#31867;&#22411;&#65292;&#27604;&#26041;&#35828;
 <code>
  MLOG_UNDO_HDR_CREATE
 </code>
 &#12289;
 <code>
  MLOG_UNDO_INSERT
 </code>
 &#12289;
 <code>
  MLOG_UNDO_INIT
 </code>
 &#31561;&#31561;&#31561;&#31561;&#65292;&#20063;&#23601;&#26159;&#35828;&#25105;&#20204;&#23545;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#20570;&#30340;&#20219;&#20309;&#25913;&#21160;&#37117;&#20250;&#35760;&#24405;&#30456;&#24212;&#31867;&#22411;&#30340;
 <code>
  redo&#26085;&#24535;
 </code>
 &#12290;&#20294;&#26159;&#23545;&#20110;&#20020;&#26102;&#34920;&#26469;&#35828;&#65292;&#22240;&#20026;&#20462;&#25913;&#20020;&#26102;&#34920;&#32780;&#20135;&#29983;&#30340;
 <code>
  undo&#26085;&#24535;
 </code>
 &#21482;&#38656;&#35201;&#22312;&#31995;&#32479;&#36816;&#34892;&#36807;&#31243;&#20013;&#26377;&#25928;&#65292;&#22914;&#26524;&#31995;&#32479;&#22868;&#28291;&#20102;&#65292;&#37027;&#20040;&#22312;&#37325;&#21551;&#26102;&#20063;&#19981;&#38656;&#35201;&#24674;&#22797;&#36825;&#20123;
 <code>
  undo
 </code>
 &#26085;&#24535;&#25152;&#22312;&#30340;&#39029;&#38754;&#65292;&#25152;&#20197;&#22312;&#20889;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#26102;&#65292;&#24182;&#19981;&#38656;&#35201;&#35760;&#24405;&#30456;&#24212;&#30340;
 <code>
  redo&#26085;&#24535;
 </code>
 &#12290;&#24635;&#32467;&#19968;&#19979;&#38024;&#23545;&#26222;&#36890;&#34920;&#21644;&#20020;&#26102;&#34920;&#21010;&#20998;&#19981;&#21516;&#31181;&#31867;&#30340;
 <code>
  &#22238;&#28378;&#27573;
 </code>
 &#30340;&#21407;&#22240;&#65306;
 <span style="color:red">
  &#22312;&#20462;&#25913;&#38024;&#23545;&#26222;&#36890;&#34920;&#30340;&#22238;&#28378;&#27573;&#20013;&#30340;Undo&#39029;&#38754;&#26102;&#65292;&#38656;&#35201;&#35760;&#24405;&#23545;&#24212;&#30340;redo&#26085;&#24535;&#65292;&#32780;&#20462;&#25913;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#22238;&#28378;&#27573;&#20013;&#30340;Undo&#39029;&#38754;&#26102;&#65292;&#19981;&#38656;&#35201;&#35760;&#24405;&#23545;&#24212;&#30340;redo&#26085;&#24535;
 </span>
 &#12290;
</p>
<blockquote class="warning">
 <p>
  &#23567;&#36148;&#22763;&#65306;

&#23454;&#38469;&#19978;&#22312;MySQL 5.7.21&#36825;&#20010;&#29256;&#26412;&#20013;&#65292;&#22914;&#26524;&#25105;&#20204;&#20165;&#20165;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#37027;&#20040;&#21482;&#20250;&#20026;&#35813;&#20107;&#21153;&#20998;&#37197;&#38024;&#23545;&#26222;&#36890;&#34920;&#30340;&#22238;&#28378;&#27573;&#65292;&#19981;&#20998;&#37197;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#22238;&#28378;&#27573;&#12290;&#20294;&#26159;&#22914;&#26524;&#25105;&#20204;&#20165;&#20165;&#23545;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#37027;&#20040;&#26082;&#20250;&#20026;&#35813;&#20107;&#21153;&#20998;&#37197;&#38024;&#23545;&#26222;&#36890;&#34920;&#30340;&#22238;&#28378;&#27573;&#65292;&#21448;&#20250;&#20026;&#20854;&#20998;&#37197;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#22238;&#28378;&#27573;&#65288;&#19981;&#36807;&#20998;&#37197;&#20102;&#22238;&#28378;&#27573;&#24182;&#19981;&#20250;&#31435;&#21363;&#20998;&#37197;undo slot&#65292;&#21482;&#26377;&#22312;&#30495;&#27491;&#38656;&#35201;Undo&#39029;&#38754;&#38142;&#34920;&#26102;&#25165;&#20250;&#21435;&#20998;&#37197;&#22238;&#28378;&#27573;&#20013;&#30340;undo slot&#65289;&#12290;
 </p>
</blockquote>
<h3 class="heading">
 &#20026;&#20107;&#21153;&#20998;&#37197;Undo&#39029;&#38754;&#38142;&#34920;&#35814;&#32454;&#36807;&#31243;
</h3>
<p>
 &#19978;&#36793;&#35828;&#20102;&#19968;&#22823;&#22534;&#30340;&#27010;&#24565;&#65292;&#22823;&#23478;&#24212;&#35813;&#26377;&#19968;&#28857;&#28857;&#30340;&#23567;&#26197;&#65292;&#25509;&#19979;&#26469;&#25105;&#20204;&#20197;&#20107;&#21153;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#25913;&#21160;&#20026;&#20363;&#65292;&#32473;&#22823;&#23478;&#26803;&#29702;&#19968;&#19979;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#20998;&#37197;
 <code>
  Undo&#39029;&#38754;
 </code>
 &#38142;&#34920;&#26102;&#30340;&#23436;&#25972;&#36807;&#31243;&#65292;
</p>
<ul>
 <li>
  <p>
   &#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#39318;&#27425;&#20570;&#25913;&#21160;&#20043;&#21069;&#65292;&#39318;&#20808;&#20250;&#21040;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#31532;
   <code>
    5
   </code>
   &#21495;&#39029;&#38754;&#20013;&#20998;&#37197;&#19968;&#20010;&#22238;&#28378;&#27573;&#65288;&#20854;&#23454;&#23601;&#26159;&#33719;&#21462;&#19968;&#20010;
   <code>
    Rollback Segment Header
   </code>
   &#39029;&#38754;&#30340;&#22320;&#22336;&#65289;&#12290;&#19968;&#26086;&#26576;&#20010;&#22238;&#28378;&#27573;&#34987;&#20998;&#37197;&#32473;&#20102;&#36825;&#20010;&#20107;&#21153;&#65292;&#37027;&#20040;&#20043;&#21518;&#35813;&#20107;&#21153;&#20013;&#20877;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#25913;&#21160;&#26102;&#65292;&#23601;&#19981;&#20250;&#37325;&#22797;&#20998;&#37197;&#20102;&#12290;
  </p>
  <p>
   &#20351;&#29992;&#20256;&#35828;&#20013;&#30340;
   <code>
    round-robin
   </code>
   &#65288;&#24490;&#29615;&#20351;&#29992;&#65289;&#26041;&#24335;&#26469;&#20998;&#37197;&#22238;&#28378;&#27573;&#12290;&#27604;&#22914;&#24403;&#21069;&#20107;&#21153;&#20998;&#37197;&#20102;&#31532;
   <code>
    0
   </code>
   &#21495;&#22238;&#28378;&#27573;&#65292;&#37027;&#20040;&#19979;&#19968;&#20010;&#20107;&#21153;&#23601;&#35201;&#20998;&#37197;&#31532;
   <code>
    33
   </code>
   &#21495;&#22238;&#28378;&#27573;&#65292;&#19979;&#19979;&#20010;&#20107;&#21153;&#23601;&#35201;&#20998;&#37197;&#31532;
   <code>
    34
   </code>
   &#21495;&#22238;&#28378;&#27573;&#65292;&#31616;&#21333;&#19968;&#28857;&#30340;&#35828;&#23601;&#26159;&#36825;&#20123;&#22238;&#28378;&#27573;&#34987;&#36718;&#30528;&#20998;&#37197;&#32473;&#19981;&#21516;&#30340;&#20107;&#21153;&#65288;&#23601;&#26159;&#36825;&#20040;&#31616;&#21333;&#31895;&#26292;&#65292;&#27809;&#21861;&#22909;&#35828;&#30340;&#65289;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#22312;&#20998;&#37197;&#21040;&#22238;&#28378;&#27573;&#21518;&#65292;&#39318;&#20808;&#30475;&#19968;&#19979;&#36825;&#20010;&#22238;&#28378;&#27573;&#30340;&#20004;&#20010;
   <code>
    cached&#38142;&#34920;
   </code>
   &#26377;&#27809;&#26377;&#24050;&#32463;&#32531;&#23384;&#20102;&#30340;
   <code>
    undo slot
   </code>
   &#65292;&#27604;&#22914;&#22914;&#26524;&#20107;&#21153;&#20570;&#30340;&#26159;
   <code>
    INSERT
   </code>
   &#25805;&#20316;&#65292;&#23601;&#21435;&#22238;&#28378;&#27573;&#23545;&#24212;&#30340;
   <code>
    insert undo cached&#38142;&#34920;
   </code>
   &#20013;&#30475;&#30475;&#26377;&#27809;&#26377;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#65307;&#22914;&#26524;&#20107;&#21153;&#20570;&#30340;&#26159;
   <code>
    DELETE
   </code>
   &#25805;&#20316;&#65292;&#23601;&#21435;&#22238;&#28378;&#27573;&#23545;&#24212;&#30340;
   <code>
    update undo cached&#38142;&#34920;
   </code>
   &#20013;&#30475;&#30475;&#26377;&#27809;&#26377;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#12290;&#22914;&#26524;&#26377;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#65292;&#37027;&#20040;&#23601;&#25226;&#36825;&#20010;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#20998;&#37197;&#32473;&#35813;&#20107;&#21153;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#22914;&#26524;&#27809;&#26377;&#32531;&#23384;&#30340;
   <code>
    undo slot
   </code>
   &#21487;&#20379;&#20998;&#37197;&#65292;&#37027;&#20040;&#23601;&#35201;&#21040;
   <code>
    Rollback Segment Header
   </code>
   &#39029;&#38754;&#20013;&#25214;&#19968;&#20010;&#21487;&#29992;&#30340;
   <code>
    undo slot
   </code>
   &#20998;&#37197;&#32473;&#24403;&#21069;&#20107;&#21153;&#12290;
  </p>
  <p>
   &#20174;
   <code>
    Rollback Segment Header
   </code>
   &#39029;&#38754;&#20013;&#20998;&#37197;&#21487;&#29992;&#30340;
   <code>
    undo slot
   </code>
   &#30340;&#26041;&#24335;&#25105;&#20204;&#19978;&#36793;&#20063;&#35828;&#36807;&#20102;&#65292;&#23601;&#26159;&#20174;&#31532;
   <code>
    0
   </code>
   &#20010;
   <code>
    undo slot
   </code>
   &#24320;&#22987;&#65292;&#22914;&#26524;&#35813;
   <code>
    undo slot
   </code>
   &#30340;&#20540;&#20026;
   <code>
    FIL_NULL
   </code>
   &#65292;&#24847;&#21619;&#30528;&#36825;&#20010;
   <code>
    undo slot
   </code>
   &#26159;&#31354;&#38386;&#30340;&#65292;&#23601;&#25226;&#36825;&#20010;
   <code>
    undo slot
   </code>
   &#20998;&#37197;&#32473;&#24403;&#21069;&#20107;&#21153;&#65292;&#21542;&#21017;&#26597;&#30475;&#31532;
   <code>
    1
   </code>
   &#20010;
   <code>
    undo slot
   </code>
   &#26159;&#21542;&#28385;&#36275;&#26465;&#20214;&#65292;&#20381;&#27425;&#31867;&#25512;&#65292;&#30452;&#21040;&#26368;&#21518;&#19968;&#20010;
   <code>
    undo slot
   </code>
   &#12290;&#22914;&#26524;&#36825;
   <code>
    1024
   </code>
   &#20010;
   <code>
    undo slot
   </code>
   &#37117;&#27809;&#26377;&#20540;&#20026;
   <code>
    FIL_NULL
   </code>
   &#30340;&#24773;&#20917;&#65292;&#23601;&#30452;&#25509;&#25253;&#38169;&#21949;&#65288;&#19968;&#33324;&#19981;&#20250;&#20986;&#29616;&#36825;&#31181;&#24773;&#20917;&#65289;&#65374;
  </p>
 </li>
 <li>
  <p>
   &#25214;&#21040;&#21487;&#29992;&#30340;
   <code>
    undo slot
   </code>
   &#21518;&#65292;&#22914;&#26524;&#35813;
   <code>
    undo slot
   </code>
   &#26159;&#20174;
   <code>
    cached&#38142;&#34920;
   </code>
   &#20013;&#33719;&#21462;&#30340;&#65292;&#37027;&#20040;&#23427;&#23545;&#24212;&#30340;
   <code>
    Undo Log Segment
   </code>
   &#24050;&#32463;&#20998;&#37197;&#20102;&#65292;&#21542;&#21017;&#30340;&#35805;&#38656;&#35201;&#37325;&#26032;&#20998;&#37197;&#19968;&#20010;
   <code>
    Undo Log Segment
   </code>
   &#65292;&#28982;&#21518;&#20174;&#35813;
   <code>
    Undo Log Segment
   </code>
   &#20013;&#30003;&#35831;&#19968;&#20010;&#39029;&#38754;&#20316;&#20026;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#30340;
   <code>
    first undo page
   </code>
   &#12290;
  </p>
 </li>
 <li>
  <p>
   &#28982;&#21518;&#20107;&#21153;&#23601;&#21487;&#20197;&#25226;
   <code>
    undo&#26085;&#24535;
   </code>
   &#20889;&#20837;&#21040;&#19978;&#36793;&#30003;&#35831;&#30340;
   <code>
    Undo&#39029;&#38754;
   </code>
   &#38142;&#34920;&#20102;&#65281;
  </p>
 </li>
</ul>
<p>
 &#23545;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#20570;&#25913;&#21160;&#30340;&#27493;&#39588;&#21644;&#19978;&#36848;&#30340;&#19968;&#26679;&#65292;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;&#19981;&#36807;&#38656;&#35201;&#20877;&#27425;&#24378;&#35843;&#19968;&#27425;&#65292;
 <span style="color:red">
  &#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#22312;&#25191;&#34892;&#36807;&#31243;&#20013;&#26082;&#23545;&#26222;&#36890;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#21448;&#23545;&#20020;&#26102;&#34920;&#30340;&#35760;&#24405;&#20570;&#20102;&#25913;&#21160;&#65292;&#37027;&#20040;&#38656;&#35201;&#20026;&#36825;&#20010;&#35760;&#24405;&#20998;&#37197;2&#20010;&#22238;&#28378;&#27573;&#12290;&#24182;&#21457;&#25191;&#34892;&#30340;&#19981;&#21516;&#20107;&#21153;&#20854;&#23454;&#20063;&#21487;&#20197;&#34987;&#20998;&#37197;&#30456;&#21516;&#30340;&#22238;&#28378;&#27573;&#65292;&#21482;&#35201;&#20998;&#37197;&#19981;&#21516;&#30340;undo slot&#23601;&#21487;&#20197;&#20102;
 </span>
 &#12290;
</p>
<h2 class="heading">
 &#22238;&#28378;&#27573;&#30456;&#20851;&#37197;&#32622;
</h2>
<h3 class="heading">
 &#37197;&#32622;&#22238;&#28378;&#27573;&#25968;&#37327;
</h3>
<p>
 &#25105;&#20204;&#21069;&#36793;&#35828;&#31995;&#32479;&#20013;&#19968;&#20849;&#26377;
 <code>
  128
 </code>
 &#20010;&#22238;&#28378;&#27573;&#65292;&#20854;&#23454;&#36825;&#21482;&#26159;&#40664;&#35748;&#20540;&#65292;&#25105;&#20204;&#21487;&#20197;&#36890;&#36807;&#21551;&#21160;&#21442;&#25968;
 <code>
  innodb_rollback_segments
 </code>
 &#26469;&#37197;&#32622;&#22238;&#28378;&#27573;&#30340;&#25968;&#37327;&#65292;&#21487;&#37197;&#32622;&#30340;&#33539;&#22260;&#26159;
 <code>
  1~128
 </code>
 &#12290;&#20294;&#26159;&#36825;&#20010;&#21442;&#25968;&#24182;&#19981;&#20250;&#24433;&#21709;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#22238;&#28378;&#27573;&#25968;&#37327;&#65292;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#22238;&#28378;&#27573;&#25968;&#37327;&#19968;&#30452;&#26159;
 <code>
  32
 </code>
 &#65292;&#20063;&#23601;&#26159;&#35828;&#65306;
</p>
<ul>
 <li>
  <p>
   &#22914;&#26524;&#25105;&#20204;&#25226;
   <code>
    innodb_rollback_segments
   </code>
   &#30340;&#20540;&#35774;&#32622;&#20026;
   <code>
    1
   </code>
   &#65292;&#37027;&#20040;&#21482;&#20250;&#26377;1&#20010;&#38024;&#23545;&#26222;&#36890;&#34920;&#30340;&#21487;&#29992;&#22238;&#28378;&#27573;&#65292;&#20294;&#26159;&#20173;&#28982;&#26377;32&#20010;&#38024;&#23545;&#20020;&#26102;&#34920;&#30340;&#21487;&#29992;&#22238;&#28378;&#27573;&#12290;
  </p>
 </li>
 <li>
  <ul>
   <li>
    &#22914;&#26524;&#25105;&#20204;&#25226;
    <code>
     innodb_rollback_segments
    </code>
    &#30340;&#20540;&#35774;&#32622;&#20026;
    <code>
     2&#65374;33
    </code>
    &#20043;&#38388;&#30340;&#25968;&#65292;&#25928;&#26524;&#21644;&#23558;&#20854;&#35774;&#32622;&#20026;
    <code>
     1
    </code>
    &#26159;&#19968;&#26679;&#30340;&#12290;
   </li>
  </ul>
 </li>
 <li>
  <p>
   &#22914;&#26524;&#25105;&#20204;&#25226;
   <code>
    innodb_rollback_segments
   </code>
   &#35774;&#32622;&#20026;&#22823;&#20110;
   <code>
    33
   </code>
   &#30340;&#25968;&#65292;&#37027;&#20040;&#38024;&#23545;&#26222;&#36890;&#34920;&#30340;&#21487;&#29992;&#22238;&#28378;&#27573;&#25968;&#37327;&#23601;&#26159;&#35813;&#20540;&#20943;&#21435;32&#12290;
  </p>
 </li>
</ul>
<h3 class="heading">
 &#37197;&#32622;undo&#34920;&#31354;&#38388;
</h3>
<p>
 &#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#38024;&#23545;&#26222;&#36890;&#34920;&#35774;&#31435;&#30340;&#22238;&#28378;&#27573;&#65288;&#31532;
 <code>
  0
 </code>
 &#21495;&#20197;&#21450;&#31532;
 <code>
  33~127
 </code>
 &#21495;&#22238;&#28378;&#27573;&#65289;&#37117;&#26159;&#34987;&#20998;&#37197;&#21040;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#12290;&#20854;&#20013;&#30340;&#31532;&#31532;
 <code>
  0
 </code>
 &#21495;&#22238;&#28378;&#27573;&#26159;&#19968;&#30452;&#22312;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#65292;&#20294;&#26159;&#31532;
 <code>
  33~127
 </code>
 &#21495;&#22238;&#28378;&#27573;&#21487;&#20197;&#36890;&#36807;&#37197;&#32622;&#25918;&#21040;&#33258;&#23450;&#20041;&#30340;
 <code>
  undo&#34920;&#31354;&#38388;
 </code>
 &#20013;&#12290;&#20294;&#26159;&#36825;&#31181;&#37197;&#32622;&#21482;&#33021;&#22312;&#31995;&#32479;&#21021;&#22987;&#21270;&#65288;&#21019;&#24314;&#25968;&#25454;&#30446;&#24405;&#26102;&#65289;&#30340;&#26102;&#20505;&#20351;&#29992;&#65292;&#19968;&#26086;&#21021;&#22987;&#21270;&#23436;&#25104;&#65292;&#20043;&#21518;&#23601;&#19981;&#33021;&#20877;&#27425;&#26356;&#25913;&#20102;&#12290;&#25105;&#20204;&#30475;&#19968;&#19979;&#30456;&#20851;&#21551;&#21160;&#21442;&#25968;&#65306;
</p>
<ul>
 <li>
  <p>
   &#36890;&#36807;
   <code>
    innodb_undo_directory
   </code>
   &#25351;&#23450;
   <code>
    undo&#34920;&#31354;&#38388;
   </code>
   &#25152;&#22312;&#30340;&#30446;&#24405;&#65292;&#22914;&#26524;&#27809;&#26377;&#25351;&#23450;&#35813;&#21442;&#25968;&#65292;&#21017;&#40664;&#35748;
   <code>
    undo&#34920;&#31354;&#38388;
   </code>
   &#25152;&#22312;&#30340;&#30446;&#24405;&#23601;&#26159;&#25968;&#25454;&#30446;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#36890;&#36807;
   <code>
    innodb_undo_tablespaces
   </code>
   &#23450;&#20041;
   <code>
    undo&#34920;&#31354;&#38388;
   </code>
   &#30340;&#25968;&#37327;&#12290;&#35813;&#21442;&#25968;&#30340;&#40664;&#35748;&#20540;&#20026;
   <code>
    0
   </code>
   &#65292;&#34920;&#26126;&#19981;&#21019;&#24314;&#20219;&#20309;
   <code>
    undo&#34920;&#31354;&#38388;
   </code>
   &#12290;
  </p>
  <p>
   &#31532;
   <code>
    33~127
   </code>
   &#21495;&#22238;&#28378;&#27573;&#21487;&#20197;&#24179;&#22343;&#20998;&#24067;&#21040;&#19981;&#21516;&#30340;
   <code>
    undo&#34920;&#31354;&#38388;
   </code>
   &#20013;&#12290;
  </p>
 </li>
</ul>
<blockquote class="warning">
 <p>
  &#23567;&#36148;&#22763;&#65306;

&#22914;&#26524;&#25105;&#20204;&#22312;&#31995;&#32479;&#21021;&#22987;&#21270;&#30340;&#26102;&#20505;&#25351;&#23450;&#20102;&#21019;&#24314;&#20102;undo&#34920;&#31354;&#38388;&#65292;&#37027;&#20040;&#31995;&#32479;&#34920;&#31354;&#38388;&#20013;&#30340;&#31532;0&#21495;&#22238;&#28378;&#27573;&#23558;&#22788;&#20110;&#19981;&#21487;&#29992;&#29366;&#24577;&#12290;
 </p>
</blockquote>
<p>
 &#27604;&#22914;&#25105;&#20204;&#22312;&#31995;&#32479;&#21021;&#22987;&#21270;&#26102;&#25351;&#23450;&#30340;
 <code>
  innodb_rollback_segments
 </code>
 &#20026;
 <code>
  35
 </code>
 &#65292;
 <code>
  innodb_undo_tablespaces
 </code>
 &#20026;
 <code>
  2
 </code>
 &#65292;&#36825;&#26679;&#23601;&#20250;&#23558;&#31532;
 <code>
  33
 </code>
 &#12289;
 <code>
  34
 </code>
 &#21495;&#22238;&#28378;&#27573;&#20998;&#21035;&#20998;&#24067;&#21040;&#19968;&#20010;
 <code>
  undo&#34920;&#31354;&#38388;
 </code>
 &#20013;&#12290;
</p>
<p>
 &#35774;&#31435;
 <code>
  undo&#34920;&#31354;&#38388;
 </code>
 &#30340;&#19968;&#20010;&#22909;&#22788;&#23601;&#26159;&#22312;
 <code>
  undo&#34920;&#31354;&#38388;
 </code>
 &#20013;&#30340;&#25991;&#20214;&#22823;&#21040;&#19968;&#23450;&#31243;&#24230;&#26102;&#65292;&#21487;&#20197;&#33258;&#21160;&#30340;&#23558;&#35813;
 <code>
  undo&#34920;&#31354;&#38388;
 </code>
 &#25130;&#26029;&#65288;truncate&#65289;&#25104;&#19968;&#20010;&#23567;&#25991;&#20214;&#12290;&#32780;&#31995;&#32479;&#34920;&#31354;&#38388;&#30340;&#22823;&#23567;&#21482;&#33021;&#19981;&#26029;&#30340;&#22686;&#22823;&#65292;&#21364;&#19981;&#33021;&#25130;&#26029;&#12290;
</p>

</div>

</div>
</div>
