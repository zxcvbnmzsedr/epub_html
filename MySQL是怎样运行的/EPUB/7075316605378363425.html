
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#19987;&#39064;&#24335;&#35762;&#35299; &#8212;&#8212; redo&#12289;undo&#12289;buffer pool&#12289;binlog&#65292;&#35841;&#20808;&#35841;&#21518;&#65292;&#26377;&#28857;&#20799;&#20081;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1>
 redo&#12289;undo&#12289;buffer pool&#12289;binlog&#65292;&#35841;&#20808;&#35841;&#21518;&#65292;&#26377;&#28857;&#20799;&#20081;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<hr>
<p>
 &#36825;&#31687;&#25991;&#31456;&#25105;&#20204;&#26469;&#35752;&#35770;&#19968;&#19979;&#19968;&#26465;DML&#35821;&#21477;&#20174;&#23458;&#25143;&#31471;&#21457;&#20986;&#21518;&#65292;&#26381;&#21153;&#22120;&#37117;&#20570;&#20102;&#21738;&#20123;&#22788;&#29702;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#34429;&#28982;SELECT&#35821;&#21477;&#30340;&#22788;&#29702;&#20063;&#24456;&#22797;&#26434;&#65292;&#20294;SELECT&#35821;&#21477;&#24182;&#19981;&#20250;&#20462;&#25913;&#25968;&#25454;&#24211;&#20013;&#30340;&#25968;&#25454;&#65292;&#20063;&#23601;&#19981;&#20250;&#35760;&#24405;&#35832;&#22914;redo&#12289;undo&#12289;binlog&#36825;&#20123;&#26085;&#24535;&#65292;&#26412;&#25991;&#20027;&#35201;&#26159;&#24819;&#35752;&#35770;redo&#12289;undo&#12289;binlog&#36825;&#20123;&#26085;&#24535;&#26159;&#22312;&#20160;&#20040;&#26102;&#20505;&#29983;&#25104;&#30340;&#65292;&#21861;&#26102;&#20505;&#20889;&#21040;&#30913;&#30424;&#30340;&#12290;
 </p>
</blockquote>
<p>
 &#20026;&#20102;&#22686;&#24378;&#25991;&#31456;&#30340;&#30495;&#23454;&#24615;&#65288;&#24635;&#26159;&#26377;&#19968;&#20123;&#23567;&#20249;&#20276;&#38382;&#23567;&#23401;&#23376;&#20026;&#20160;&#20040;&#21644;CSDN&#19978;&#30340;&#26576;&#26576;&#25991;&#31456;&#38472;&#36848;&#30340;&#19981;&#19968;&#26679;&#65289;&#65292;&#25105;&#20204;&#20250;&#21015;&#20030;&#19968;&#20123;&#20851;&#38190;&#27493;&#39588;&#30340;&#20195;&#30721;&#65292;&#26412;&#25991;&#29992;&#21040;&#30340;&#28304;&#30721;&#29256;&#26412;&#20026;MySQL 5.7.22&#12290;
</p>
<p>
 &#21478;&#22806;&#65292;&#25105;&#20204;&#20551;&#35774;&#23631;&#24149;&#21069;&#30340;&#23567;&#20249;&#20276;&#24050;&#32463;&#30693;&#36947;&#20160;&#20040;&#26159;buffer pool&#65292;&#20160;&#20040;&#26159;redo&#26085;&#24535;&#65292;&#20160;&#20040;&#26159;undo&#26085;&#24535;&#65292;&#20160;&#20040;&#26159;binlog&#65292;&#20197;&#21450;MySQL&#20026;&#20160;&#20040;&#38656;&#35201;&#23427;&#20204;&#12290;&#25105;&#20204;&#19981;&#20250;&#20877;&#23637;&#24320;&#21508;&#31181;&#26085;&#24535;&#30340;&#26684;&#24335;&#12289;&#20889;&#20837;&#26041;&#24335;&#8203;&#31561;&#32454;&#33410;&#38382;&#39064;&#65292;&#26377;&#19981;&#28165;&#26970;&#30340;&#23567;&#20249;&#20276;&#21487;&#20197;&#26597;&#30475;&#12298;MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;&#65306;&#20174;&#26681;&#20799;&#19978;&#29702;&#35299;MySQL&#12299;&#65292;&#21253;&#25945;&#21253;&#20250;&#65292;&#19981;&#20250;&#26469;&#38382;&#23567;&#23401;&#23376;&#12290;
</p>
<h2>
 &#39044;&#22791;&#30693;&#35782;
</h2>
<p>
 &#25105;&#20204;&#35752;&#35770;&#30340;&#26159;&#22522;&#20110;InnoDB&#23384;&#20648;&#24341;&#25806;&#30340;&#34920;&#65292;&#25968;&#25454;&#20250;&#34987;&#20445;&#23384;&#22312;&#30828;&#30424;&#19978;&#30340;&#34920;&#31354;&#38388;&#65288;&#25991;&#20214;&#31995;&#32479;&#20013;&#30340;&#19968;&#20010;&#25110;&#22810;&#20010;&#25991;&#20214;&#65289;&#20013;&#12290;
</p>
<p>
 InnoDB&#20250;&#23558;&#30913;&#30424;&#20013;&#30340;&#25968;&#25454;&#30475;&#25104;&#26159;&#33509;&#24178;&#20010;
 <strong>
  &#39029;
 </strong>
 &#30340;&#38598;&#21512;&#65292;
 <code>
  &#39029;
 </code>
 &#30340;&#22823;&#23567;&#40664;&#35748;&#26159;16KB&#12290;&#20854;&#20013;&#26576;&#20123;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;&#20851;&#20110;&#31995;&#32479;&#30340;&#19968;&#20123;&#23646;&#24615;&#65292;&#26576;&#20123;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;undo&#26085;&#24535;&#65292;&#26576;&#20123;&#39029;&#38754;&#29992;&#20110;&#23384;&#20648;B+&#26641;&#30340;&#33410;&#28857;&#65288;&#20063;&#23601;&#26159;&#21253;&#21547;&#35760;&#24405;&#30340;&#39029;&#38754;&#65289;&#65292;&#21453;&#27491;&#24635;&#20849;&#26377;&#21313;&#26469;&#31181;&#19981;&#21516;&#31867;&#22411;&#30340;&#39029;&#38754;&#12290;
</p>
<p>
 &#19981;&#36807;&#19981;&#35770;&#26159;&#20160;&#20040;&#31867;&#22411;&#30340;&#39029;&#38754;&#65292;&#27599;&#24403;&#25105;&#20204;&#20174;&#39029;&#38754;&#20013;&#35835;&#21462;&#25110;&#20889;&#20837;&#25968;&#25454;&#26102;&#65292;&#37117;&#24517;&#39035;&#20808;&#23558;&#20854;&#20174;&#30828;&#30424;&#19978;&#21152;&#36733;&#21040;&#20869;&#23384;&#20013;&#30340;
 <code>
  buffer pool
 </code>
 &#20013;&#65288;&#20063;&#23601;&#26159;&#35828;&#20869;&#23384;&#20013;&#30340;&#39029;&#38754;&#20854;&#23454;&#23601;&#26159;&#30828;&#30424;&#20013;&#39029;&#38754;&#30340;&#19968;&#20010;&#21103;&#26412;&#65289;&#65292;&#28982;&#21518;&#25165;&#33021;&#23545;&#20869;&#23384;&#20013;&#39029;&#38754;&#36827;&#34892;&#35835;&#21462;&#25110;&#20889;&#20837;&#12290;&#22914;&#26524;&#35201;&#20462;&#25913;&#20869;&#23384;&#20013;&#30340;&#39029;&#38754;&#65292;&#20026;&#20102;&#20943;&#23569;&#30913;&#30424;I/O&#65292;&#20462;&#25913;&#21518;&#30340;&#39029;&#38754;&#24182;&#19981;&#31435;&#21363;&#21516;&#27493;&#21040;&#30913;&#30424;&#65292;&#32780;&#26159;&#20316;&#20026;
 <code>
  &#33039;&#39029;
 </code>
 &#32487;&#32493;&#21574;&#22312;&#20869;&#23384;&#20013;&#65292;&#31561;&#24453;&#21518;&#32493;&#21512;&#36866;&#26102;&#26426;&#23558;&#20854;&#21047;&#26032;&#21040;&#30828;&#30424;&#65288;&#19968;&#33324;&#26159;&#26377;&#21518;&#21488;&#32447;&#31243;&#24322;&#27493;&#21047;&#26032;&#65289;&#12290;
</p>
<h2>
 &#20934;&#22791;&#24037;&#20316;
</h2>
<p>
 &#20026;&#20102;&#25925;&#20107;&#30340;&#39034;&#21033;&#21457;&#23637;&#65292;&#25105;&#20204;&#20808;&#24314;&#31435;&#19968;&#20010;&#34920;&#65306;
</p>
<pre><code>CREATE TABLE hero (
    number INT,
    name VARCHAR(100),
    country varchar(100),
    PRIMARY KEY (number),
    KEY idx_name (name)
) Engine=InnoDB CHARSET=utf8;
</code></pre>
<p>
 &#28982;&#21518;&#21521;&#36825;&#20010;&#34920;&#37324;&#25554;&#20837;&#20960;&#26465;&#35760;&#24405;&#65306;
</p>
<pre><code>INSERT INTO hero VALUES
    (1, 'l&#21016;&#22791;', '&#34560;'),
    (3, 'z&#35832;&#33883;&#20142;', '&#34560;'),
    (8, 'c&#26361;&#25805;', '&#39759;'),
    (15, 'x&#33600;&#24423;', '&#39759;'),
    (20, 's&#23385;&#26435;', '&#21556;');
</code></pre>
<p>
 &#28982;&#21518;&#29616;&#22312;
 <code>
  hero
 </code>
 &#34920;&#23601;&#26377;&#20102;&#20004;&#20010;&#32034;&#24341;&#65288;&#19968;&#20010;&#20108;&#32423;&#32034;&#24341;&#65292;&#19968;&#20010;&#32858;&#31751;&#32034;&#24341;&#65289;&#65292;&#31034;&#24847;&#22270;&#22914;&#19979;&#65306;
 <img alt="" src="EPUB/50ebc994-13d6-11ed-838d-acde48001122">
</p>
<h2>
 &#25191;&#34892;&#35745;&#21010;&#30340;&#29983;&#25104;
</h2>
<p>
 &#20551;&#35774;&#25105;&#20204;&#24819;&#25191;&#34892;&#19979;&#36793;&#36825;&#26465;UPDATE&#35821;&#21477;&#65306;
</p>
<pre><code>UPDATE hero SET country = '&#27721;' WHERE name &gt;= 'x&#33600;&#24423;';
</code></pre>
<p>
 MySQL&#20248;&#21270;&#22120;&#39318;&#20808;&#20250;&#20998;&#26512;&#19968;&#19979;&#20351;&#29992;&#19981;&#21516;&#32034;&#24341;&#25191;&#34892;&#26597;&#35810;&#30340;&#25104;&#26412;&#65292;&#28982;&#21518;&#36873;&#21462;&#25104;&#26412;&#26368;&#20302;&#30340;&#37027;&#20010;&#32034;&#24341;&#21435;&#25191;&#34892;&#26597;&#35810;&#12290;
</p>
<p>
 &#23545;&#20110;&#19978;&#36848;&#35821;&#21477;&#26469;&#35828;&#65292;&#21487;&#36873;&#30340;&#25191;&#34892;&#26041;&#26696;&#26377;2&#31181;&#65306;
</p>
<ul>
 <li>
  &#26041;&#26696;&#19968;&#65306;&#20351;&#29992;&#20840;&#34920;&#25195;&#25551;&#25191;&#34892;&#26597;&#35810;&#65292;&#21363;&#25195;&#25551;&#20840;&#37096;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#25105;&#20204;&#21487;&#20197;&#35748;&#20026;&#27492;&#26102;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
  <code>
   (-&#8734;, +&#8734;)
  </code>
  &#12290;
 </li>
 <li>
  &#26041;&#26696;&#20108;&#65306;&#20351;&#29992;&#20108;&#32423;&#32034;&#24341;idx_name&#25191;&#34892;&#26597;&#35810;&#65292;&#27492;&#26102;&#30340;&#25195;&#25551;&#21306;&#38388;&#23601;&#26159;
  <code>
   ['x&#33600;&#24423;', +&#8734;)
  </code>
  &#12290;
 </li>
</ul>
<p>
 &#20248;&#21270;&#22120;&#20250;&#35745;&#31639;&#19978;&#36848;&#20004;&#31181;&#26041;&#26696;&#30340;&#25104;&#26412;&#65292;&#36873;&#21462;&#25104;&#26412;&#26368;&#20302;&#30340;&#26041;&#26696;&#20316;&#20026;&#26368;&#32456;&#30340;&#25191;&#34892;&#35745;&#21010;&#12290;
</p>
<p>
 &#25105;&#20204;&#20316;&#20026;&#29992;&#25143;&#65292;&#21487;&#20197;&#36890;&#36807;EXPLAIN&#35821;&#21477;&#26469;&#30475;&#19968;&#19979;&#36825;&#20010;&#35821;&#21477;&#30340;&#25191;&#34892;&#35745;&#21010;&#65288;&#24403;&#28982;&#20063;&#21487;&#20197;&#36890;&#36807;MySQL&#25552;&#20379;&#30340;optimizer trace&#21151;&#33021;&#26597;&#30475;&#20855;&#20307;&#25191;&#34892;&#35745;&#21010;&#20998;&#26512;&#27969;&#31243;&#65289;&#65306;
</p>
<pre><code>mysql&gt; explain UPDATE hero SET country = '&#27721;' WHERE name &gt;= 'x&#33600;&#24423;';
+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
| id | select_type | table | partitions | type  | possible_keys | key      | key_len | ref   | rows | filtered | Extra       |
+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
|  1 | UPDATE      | hero  | NULL       | range | idx_name      | idx_name | 303     | const |    2 |   100.00 | Using where |
+----+-------------+-------+------------+-------+---------------+----------+---------+-------+------+----------+-------------+
1 row in set, 1 warning (0.01 sec)
</code></pre>
<p>
 &#21487;&#20197;&#30475;&#21040;&#65292;MySQL&#20248;&#21270;&#22120;&#20915;&#23450;&#37319;&#29992;&#26041;&#26696;&#20108;&#65292;&#21363;&#25195;&#25551;&#20108;&#32423;&#32034;&#24341;idx_name&#22312;
 <code>
  ['x&#33600;&#24423;', +&#8734;)
 </code>
 &#36825;&#20010;&#25195;&#25551;&#21306;&#38388;&#31181;&#30340;&#35760;&#24405;&#12290;
</p>
<h2>
 &#30495;&#27491;&#24320;&#22987;&#25191;&#34892;
</h2>
<p>
 MySQL&#20998;&#20026;server&#23618;&#21644;&#23384;&#20648;&#24341;&#25806;&#23618;&#65292;&#25105;&#20204;&#21069;&#36793;&#30340;&#22810;&#31687;&#25991;&#31456;&#26377;&#21792;&#21480;&#36825;&#20004;&#23618;&#20043;&#38388;&#30340;&#20851;&#31995;&#12290;&#32771;&#34385;&#21040;&#27809;&#26377;&#30475;&#36807;&#21069;&#36793;&#25991;&#31456;&#30340;&#23567;&#20249;&#20276;&#65292;&#25105;&#20204;&#20877;&#19981;&#21388;&#20854;&#28902;&#30340;&#21792;&#21480;&#19968;&#19979;&#22312;&#25191;&#34892;&#19978;&#36848;UPDATE&#35821;&#21477;&#26102;server&#23618;&#21644;InnoDB&#23618;&#20043;&#38388;&#26159;&#22914;&#20309;&#27807;&#36890;&#30340;&#12290;&#20248;&#21270;&#22120;&#30340;&#25191;&#34892;&#35745;&#21010;&#20013;&#24471;&#21040;&#20102;&#33509;&#24178;&#20010;&#25195;&#25551;&#21306;&#38388;&#65288;&#26412;&#20363;&#20013;&#21482;&#26377;1&#20010;&#25195;&#25551;&#21306;&#38388;
 <code>
  ['x&#33600;&#24423;', +&#8734;)
 </code>
 &#65289;&#65292;&#38024;&#23545;&#27599;&#20010;&#25195;&#25551;&#21306;&#38388;&#65292;&#37117;&#20250;&#25191;&#34892;&#19979;&#36793;&#30340;&#27493;&#39588;&#65306;
</p>
<h3>
 &#22788;&#29702;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;
</h3>
<ul>
 <li>
  <p>
   &#27493;&#39588;1&#65306;&#39318;&#20808;server&#23618;&#26681;&#25454;&#25191;&#34892;&#35745;&#21010;&#65292;&#21521;InnoDB&#23618;&#32034;&#35201;&#20108;&#32423;&#32034;&#24341;idx_name&#30340;&#25195;&#25551;&#21306;&#38388;
   <code>
    ['x&#33600;&#24423;', +&#8734;)
   </code>
   &#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;2&#65306;Innodb&#23384;&#20648;&#24341;&#25806;&#20415;&#20250;&#36890;&#36807;&#20108;&#32423;&#32034;&#24341;idx_name&#23545;&#24212;&#30340;B+&#26641;&#65292;&#20174;B+&#26641;&#26681;&#39029;&#38754;&#19968;&#23618;&#19968;&#23618;&#21521;&#19979;&#26597;&#25214;&#65288;&#22312;&#39029;&#38754;&#20013;&#26597;&#25214;&#26159;&#36890;&#36807;&#39029;&#30446;&#24405;&#30340;&#27133;&#36827;&#34892;&#20108;&#20998;&#26597;&#25214;&#30340;&#65292;&#36825;&#20010;&#36807;&#31243;&#24456;&#24555;&#65289;&#65292;&#24555;&#36895;&#22312;&#21494;&#23376;&#33410;&#28857;&#20013;&#23450;&#20301;&#21040;&#25195;&#25551;&#21306;&#38388;
   <code>
    ['x&#33600;&#24423;', +&#8734;)
   </code>
   &#30340;&#31532;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;&#25509;&#30528;&#26681;&#25454;&#36825;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#20013;&#30340;&#20027;&#38190;&#20540;&#25191;&#34892;&#22238;&#34920;&#25805;&#20316;&#65288;&#21363;&#36890;&#36807;&#32858;&#31751;&#32034;&#24341;&#30340;B+&#26641;&#26681;&#33410;&#28857;&#19968;&#23618;&#19968;&#23618;&#21521;&#19979;&#25214;&#65292;&#30452;&#21040;&#22312;&#21494;&#23376;&#33410;&#28857;&#20013;&#25214;&#21040;&#30456;&#24212;&#35760;&#24405;&#65289;&#65292;&#23558;&#33719;&#21462;&#21040;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#36820;&#22238;&#32473;server&#23618;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;3&#65306;server&#23618;&#24471;&#21040;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21518;&#65292;&#20250;&#30475;&#19968;&#19979;&#26356;&#26032;&#21069;&#30340;&#35760;&#24405;&#21644;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#26159;&#21542;&#19968;&#26679;&#65292;&#22914;&#26524;&#19968;&#26679;&#30340;&#35805;&#23601;&#19981;&#26356;&#26032;&#20102;&#65292;&#22914;&#26524;&#19981;&#19968;&#26679;&#30340;&#35805;&#23601;&#25226;&#26356;&#26032;&#21069;&#30340;&#35760;&#24405;&#21644;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#37117;&#24403;&#20316;&#21442;&#25968;&#20256;&#32473;InnoDB&#23618;&#65292;&#35753;InnoDB&#30495;&#27491;&#30340;&#25191;&#34892;&#26356;&#26032;&#35760;&#24405;&#30340;&#25805;&#20316;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;4&#65306;InnoDB&#25910;&#21040;&#26356;&#26032;&#35831;&#27714;&#21518;&#65292;&#20808;&#26356;&#26032;&#35760;&#24405;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#20877;&#26356;&#26032;&#35760;&#24405;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;&#26368;&#21518;&#23558;&#26356;&#26032;&#32467;&#26524;&#36820;&#22238;&#32473;server&#23618;&#12290;
  </p>
 </li>
</ul>
<h3>
 &#22788;&#29702;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#20108;&#26465;&#35760;&#24405;
</h3>
<ul>
 <li>
  <p>
   &#27493;&#39588;1&#65306;server&#23618;&#32487;&#32493;&#21521;InnoDB&#32034;&#35201;&#19979;&#19968;&#26465;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;2&#65306;&#27492;&#26102;&#30001;&#20110;&#24050;&#32463;&#36890;&#36807;B+&#26641;&#23450;&#20301;&#21040;&#20108;&#32423;&#32034;&#24341;&#25195;&#25551;&#21306;&#38388;
   <code>
    ['x&#33600;&#24423;', +&#8734;)
   </code>
   &#30340;&#31532;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#32780;&#35760;&#24405;&#21448;&#26159;&#34987;&#20018;&#32852;&#25104;&#21333;&#21521;&#38142;&#34920;&#65292;&#25152;&#20197;InnoDB&#30452;&#25509;&#36890;&#36807;&#35760;&#24405;&#22836;&#20449;&#24687;&#30340;
   <code>
    next_record
   </code>
   &#30340;&#23646;&#24615;&#21363;&#21487;&#33719;&#21462;&#21040;&#19979;&#19968;&#26465;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;&#28982;&#21518;&#36890;&#36807;&#35813;&#20108;&#32423;&#32034;&#24341;&#30340;&#20027;&#38190;&#20540;&#36827;&#34892;&#22238;&#34920;&#25805;&#20316;&#65292;&#33719;&#21462;&#21040;&#23436;&#25972;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#20877;&#36820;&#22238;&#32473;server&#23618;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;3&#65306;server&#23618;&#24471;&#21040;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#21518;&#65292;&#20250;&#30475;&#19968;&#19979;&#26356;&#26032;&#21069;&#30340;&#35760;&#24405;&#21644;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#26159;&#21542;&#19968;&#26679;&#65292;&#22914;&#26524;&#19968;&#26679;&#30340;&#35805;&#23601;&#19981;&#26356;&#26032;&#20102;&#65292;&#22914;&#26524;&#19981;&#19968;&#26679;&#30340;&#35805;&#23601;&#25226;&#26356;&#26032;&#21069;&#30340;&#35760;&#24405;&#21644;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#37117;&#24403;&#20316;&#21442;&#25968;&#20256;&#32473;InnoDB&#23618;&#65292;&#35753;InnoDB&#30495;&#27491;&#30340;&#25191;&#34892;&#26356;&#26032;&#35760;&#24405;&#30340;&#25805;&#20316;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27493;&#39588;4&#65306;InnoDB&#25910;&#21040;&#26356;&#26032;&#35831;&#27714;&#21518;&#65292;&#20808;&#26356;&#26032;&#35760;&#24405;&#30340;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#20877;&#26356;&#26032;&#35760;&#24405;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;&#26368;&#21518;&#23558;&#26356;&#26032;&#32467;&#26524;&#36820;&#22238;&#32473;server&#23618;&#12290;
  </p>
 </li>
</ul>
<h3>
 &#22788;&#29702;&#25195;&#25551;&#21306;&#38388;&#30340;&#21097;&#20313;&#35760;&#24405;
</h3>
<p>
 &#35813;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#20854;&#20182;&#35760;&#24405;&#30340;&#22788;&#29702;&#23601;&#21644;&#31532;2&#26465;&#35760;&#24405;&#30340;&#22788;&#29702;&#36807;&#31243;&#26159;&#19968;&#26679;&#19968;&#26679;&#30340;&#20102;&#65292;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;
</p>
<h2>
 &#35814;&#32454;&#30340;&#26356;&#26032;&#36807;&#31243;
</h2>
<p>
 MySQL&#20351;&#29992;
 <code>
  mysql_update
 </code>
 &#20989;&#25968;&#22788;&#29702;&#25105;&#20204;&#19978;&#36848;&#30340;&#26356;&#26032;&#35821;&#21477;&#65306;
</p>
<p>
 <img alt="" src="EPUB/50f98eda-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#26368;&#20027;&#35201;&#30340;&#22788;&#29702;&#27969;&#31243;&#20889;&#22312;&#20102;&#19968;&#20010;&#24490;&#29615;&#37324;&#65306;
</p>
<p>
 <img alt="" src="EPUB/5104537e-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19978;&#22270;&#25152;&#31034;&#30340;while&#24490;&#29615;&#23601;&#26159;&#20381;&#27425;&#22788;&#29702;&#21508;&#26465;&#35760;&#24405;&#30340;&#36807;&#31243;&#12290;
</p>
<p>
 &#20854;&#20013;
 <code>
  info.read_record
 </code>
 &#26159;&#29992;&#20110;&#33719;&#21462;&#25195;&#25551;&#21306;&#38388;&#30340;&#19968;&#26465;&#35760;&#24405;&#65292;&#35835;&#21462;&#21040;&#35813;&#35760;&#24405;&#21518;&#38543;&#21518;&#23637;&#24320;&#35814;&#32454;&#30340;&#26356;&#26032;&#25805;&#20316;&#12290;&#22788;&#29702;&#23436;&#20102;&#20043;&#21518;&#20877;&#22238;&#21040;&#36825;&#20010;while&#24490;&#29615;&#30340;&#36215;&#28857;&#65292;&#36890;&#36807;
 <code>
  info.read_record
 </code>
 &#33719;&#21462;&#19979;&#19968;&#26465;&#35760;&#24405;&#65292;&#28982;&#21518;&#36827;&#34892;&#35814;&#32454;&#30340;&#26356;&#26032;&#25805;&#20316;&#12290;
</p>
<p>
 &#20063;&#23601;&#26159;&#35828;&#65292;&#20854;&#23454;&#22788;&#29702;&#27599;&#19968;&#26465;&#35760;&#24405;&#30340;&#36807;&#31243;&#37117;&#26159;&#31867;&#20284;&#30340;&#65292;&#21482;&#19981;&#36807;&#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#20250;&#26377;&#28857;&#20799;&#40635;&#28902;&#65288;&#38656;&#35201;&#20174;B+&#26641;&#26681;&#39029;&#38754;&#19968;&#23618;&#19968;&#23618;&#21521;&#19979;&#25214;&#65289;&#12290;
</p>
<p>
 &#25105;&#20204;&#19979;&#36793;&#32858;&#28966;&#20110;&#19968;&#26465;&#35760;&#24405;&#30340;&#26356;&#26032;&#36807;&#31243;&#65292;&#30475;&#30475;&#36825;&#20010;&#36807;&#31243;&#37117;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;
</p>
<h3>
 &#23558;&#35760;&#24405;&#25152;&#22312;&#30340;&#39029;&#38754;&#21152;&#36733;&#21040;buffer pool
</h3>
<p>
 &#25105;&#20204;&#24819;&#26356;&#26032;&#19968;&#26465;&#35760;&#24405;&#65292;&#39318;&#20808;&#23601;&#24471;&#22312;B+&#26641;&#20013;&#23450;&#20301;&#36825;&#26465;&#35760;&#24405;&#8212;&#8212;&#21363;&#36827;&#34892;&#19968;&#27425;
 <code>
  &#21152;&#38145;&#35835;
 </code>
 &#65288;&#19978;&#22270;&#20013;&#30340;
 <code>
  info.read_record
 </code>
 &#20989;&#25968;&#29992;&#20110;&#35843;&#29992;Innodb&#35835;&#21462;&#35760;&#24405;&#30340;&#25509;&#21475;&#65292;&#20851;&#20110;&#23545;&#19968;&#26465;&#35760;&#24405;&#21152;&#38145;&#30340;&#36807;&#31243;&#25105;&#20204;&#22312;&#20043;&#21069;&#30340;&#25991;&#31456;&#20013;&#20998;&#26512;&#36807;&#65292;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;&#65289;&#12290;
</p>
<p>
 &#22914;&#26524;&#35813;&#35760;&#24405;&#25152;&#22312;&#30340;&#39029;&#38754;&#24050;&#32463;&#22312;&#20869;&#23384;&#30340;buffer pool&#20013;&#65292;&#37027;&#23601;&#21487;&#20197;&#30452;&#25509;&#35835;&#21462;&#65292;&#21542;&#21017;&#36824;&#38656;&#35201;&#23558;&#35813;&#35760;&#24405;&#25152;&#22312;&#30340;&#39029;&#38754;&#35835;&#21462;&#21040;&#20869;&#23384;&#20013;&#30340;buffer pool&#20013;&#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#20877;&#19968;&#27425;&#24378;&#35843;&#65292;&#19981;&#35770;&#25105;&#20204;&#24819;&#35835;&#20889;&#20219;&#20309;&#39029;&#38754;&#65292;&#37117;&#38656;&#35201;&#20808;&#23558;&#35813;&#39029;&#38754;&#20174;&#30828;&#30424;&#21152;&#36733;&#21040;buffer pool&#20013;&#12290;&#22312;&#23450;&#20301;&#25195;&#25551;&#21306;&#38388;&#30340;&#31532;&#19968;&#26465;&#35760;&#24405;&#26102;&#65292;&#25105;&#20204;&#39318;&#20808;&#35201;&#35835;&#21462;B+&#26641;&#26681;&#39029;&#38754;&#20013;&#30340;&#35760;&#24405;&#65292;&#25152;&#20197;&#39318;&#20808;&#38656;&#35201;&#20808;&#25226;B+&#26641;&#26681;&#39029;&#38754;&#21152;&#36733;&#21040;buffer pool&#20013;&#65292;&#28982;&#21518;&#20877;&#35835;&#21462;&#19979;&#19968;&#23618;&#30340;&#39029;&#38754;&#65292;&#28982;&#21518;&#20877;&#35835;&#21462;&#19979;&#19979;&#23618;&#30340;&#39029;&#38754;&#65292;&#30452;&#21040;&#21494;&#23376;&#33410;&#28857;&#12290;&#27599;&#24403;&#35201;&#35835;&#21462;&#30340;&#39029;&#38754;&#19981;&#22312;buffer pool&#20013;&#65292;&#37117;&#24471;&#23558;&#20854;&#20808;&#21152;&#36733;&#21040;buffer pool&#21518;&#25165;&#33021;&#20351;&#29992;&#12290;
 </p>
</blockquote>
<p>
 Innodb&#20351;&#29992;
 <code>
  row_search_mvcc
 </code>
 &#22788;&#29702;&#35835;&#21462;&#19968;&#26465;&#35760;&#24405;&#30340;&#36807;&#31243;&#65288;&#19981;&#35770;&#26159;&#21152;&#38145;&#35835;&#36824;&#26159;&#19968;&#33268;&#24615;&#35835;&#37117;&#35843;&#29992;&#36825;&#20010;&#20989;&#25968;&#65289;&#65292;&#22312;&#35813;&#20989;&#25968;&#20869;
 <code>
  btr_pcur_open_with_no_init
 </code>
 &#29992;&#20110;&#20174;B+&#26641;&#23450;&#20301;&#35760;&#24405;&#65306;
</p>
<p>
 <img alt="" src="EPUB/5110cc30-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#22312;&#23450;&#20301;&#35760;&#24405;&#26102;&#23601;&#38656;&#35201;&#23558;&#35760;&#24405;&#25152;&#22312;&#30340;&#39029;&#38754;&#21152;&#36733;&#21040;buffer pool&#65292;&#23436;&#25104;&#36825;&#20010;&#36807;&#31243;&#30340;&#20989;&#25968;&#26159;&#65306;
</p>
<p>
 <img alt="" src="EPUB/511bc824-13d6-11ed-838d-acde48001122">
</p>
<h3>
 &#26816;&#27979;&#26356;&#26032;&#21069;&#21518;&#35760;&#24405;&#26159;&#21542;&#19968;&#26679;
</h3>
<p>
 &#22312;
 <code>
  mysql_update
 </code>
 &#20989;&#25968;&#20013;&#65292;&#24403;&#36890;&#36807;
 <code>
  info.read_record
 </code>
 &#35835;&#21462;&#21040;&#19968;&#26465;&#35760;&#24405;&#20043;&#21518;&#65292;&#23601;&#35201;&#20998;&#26512;&#19968;&#19979;&#36825;&#26465;&#35760;&#24405;&#26356;&#26032;&#21069;&#21518;&#26159;&#21542;&#21457;&#29983;&#21464;&#21270;&#65306;
</p>
<p>
 <img alt="" src="EPUB/5133c3c0-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19978;&#22270;&#20013;&#30340;
 <code>
  compare_records
 </code>
 &#29992;&#20110;&#27604;&#36739;&#35760;&#24405;&#26356;&#26032;&#21069;&#21518;&#26159;&#21542;&#19968;&#26679;&#12290;
</p>
<p>
 &#22914;&#26524;&#26356;&#26032;&#21069;&#21644;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#26159;&#19968;&#26679;&#30340;&#65292;&#37027;&#23601;&#30452;&#25509;&#36339;&#36807;&#35813;&#35760;&#24405;&#65292;&#21542;&#21017;&#32487;&#32493;&#21521;&#19979;&#22788;&#29702;&#12290;
</p>
<h3>
 &#35843;&#29992;&#23384;&#20648;&#24341;&#25806;&#25509;&#21475;&#36827;&#34892;&#26356;&#26032;
</h3>
<p>
 <img alt="" src="EPUB/51468dfc-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19978;&#22270;&#20013;&#30340;
 <code>
  ha_update_row
 </code>
 &#23601;&#26159;&#35201;&#23384;&#20648;&#24341;&#25806;&#21435;&#26356;&#26032;&#35760;&#24405;&#65292;&#20854;&#20013;&#30340;
 <code>
  table-&gt;record[1]
 </code>
 &#20195;&#34920;&#26087;&#35760;&#24405;&#65292;
 <code>
  table-&gt;record[0]
 </code>
 &#20195;&#34920;&#26032;&#35760;&#24405;&#12290;
</p>
<h3>
 &#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;
</h3>
<p>
 InnoDB&#20250;&#39318;&#20808;&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#65292;&#28982;&#21518;&#20877;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;
</p>
<p>
 &#25105;&#20204;&#20808;&#30475;&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#26102;&#37117;&#21457;&#29983;&#20102;&#20160;&#20040;&#12290;&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#30340;&#20989;&#25968;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/51731ad4-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19979;&#36793;&#39318;&#20808;&#20250;&#23581;&#35797;&#22312;&#21516;&#19968;&#20010;&#39029;&#38754;&#20013;&#26356;&#26032;&#35760;&#24405;&#65292;&#36825;&#34987;&#31216;&#20316;
 <code>
  &#20048;&#35266;&#26356;&#26032;
 </code>
 &#65292;&#35843;&#29992;
 <code>
  btr_cur_optimistic_update
 </code>
 &#20989;&#25968;&#65306;
</p>
<p>
 <img alt="" src="EPUB/5186365a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#22914;&#26524;&#19981;&#33021;&#22312;&#26412;&#39029;&#38754;&#20013;&#23436;&#25104;&#26356;&#26032;&#65288;&#27604;&#26041;&#35828;&#26356;&#26032;&#21518;&#30340;&#35760;&#24405;&#38750;&#24120;&#22823;&#21834;&#65292;&#26412;&#39029;&#38754;&#23481;&#32435;&#19981;&#19979;&#65289;&#65292;&#23601;&#20250;&#23581;&#35797;
 <code>
  &#24754;&#35266;&#26356;&#26032;
 </code>
 &#65306;
</p>
<p>
 <img alt="" src="EPUB/519776c2-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#26412;&#20363;&#20013;&#20351;&#29992;
 <code>
  &#20048;&#35266;&#26356;&#26032;
 </code>
 &#21363;&#21487;&#12290;
</p>
<h4>
 &#35760;&#24405;undo&#26085;&#24535;
</h4>
<p>
 &#26356;&#26032;&#35760;&#24405;&#21069;&#65292;&#39318;&#20808;&#35201;&#35760;&#24405;&#30456;&#24212;&#30340;undo&#26085;&#24535;&#65292;&#35843;&#29992;
 <code>
  trx_undo_report_row_operation
 </code>
 &#26469;&#35760;&#24405;undo&#26085;&#24535;&#65306;
</p>
<p>
 <img alt="" src="EPUB/51aa51e8-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#39318;&#20808;&#25105;&#20204;&#35201;&#30693;&#36947;&#65292;MySQL&#30340;undo&#26085;&#24535;&#26159;&#35201;&#20889;&#21040;&#19968;&#31181;&#19987;&#38376;&#23384;&#20648;undo&#26085;&#24535;&#30340;&#39029;&#38754;&#20013;&#30340;&#12290;&#22914;&#26524;&#19968;&#20010;&#20107;&#21153;&#20889;&#20837;&#30340;undo&#26085;&#24535;&#38750;&#24120;&#22810;&#65292;&#38656;&#35201;&#21344;&#29992;&#22810;&#20010;Undo&#39029;&#38754;&#65292;&#37027;&#36825;&#20123;&#39029;&#38754;&#20250;&#34987;&#20018;&#32852;&#25104;&#19968;&#20010;&#38142;&#34920;&#65292;&#31216;&#20316;
 <code>
  Undo&#39029;&#38754;&#38142;&#34920;
 </code>
 &#12290;
</p>
<p>
 <img alt="" src="EPUB/51b60240-13d6-11ed-838d-acde48001122">
</p>
<p>
 <code>
  trx_undo_page_report_modify
 </code>
 &#20989;&#25968;&#29992;&#20110;&#30495;&#27491;&#30340;&#21521;Undo&#39029;&#38754;&#20013;&#20889;&#20837;undo&#26085;&#24535;&#12290;&#21478;&#22806;&#65292;&#30001;&#20110;&#25105;&#20204;&#36825;&#37324;&#26159;&#22312;&#20462;&#25913;&#39029;&#38754;&#65292;&#19968;&#20010;&#20107;&#21153;&#25191;&#34892;&#36807;&#31243;&#20013;&#20961;&#26159;&#20462;&#25913;&#39029;&#38754;&#30340;&#22320;&#26041;&#65292;&#37117;&#38656;&#35201;&#35760;&#24405;&#30456;&#24212;&#30340;redo&#26085;&#24535;&#65292;&#25152;&#20197;&#22312;&#36825;&#20010;&#20989;&#25968;&#30340;&#26411;&#23614;&#65292;&#26377;&#19968;&#20010;&#35760;&#24405;&#20462;&#25913;&#36825;&#20010;Undo&#39029;&#38754;&#30340;redo&#26085;&#24535;&#30340;&#20989;&#25968;
 <code>
  trx_undof_page_add_undo_rec_log
 </code>
 &#65306;
</p>
<p>
 <img alt="" src="EPUB/51d4999e-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#26377;&#21516;&#23398;&#22312;&#36825;&#37324;&#32943;&#23450;&#20250;&#30097;&#24785;&#65306;&#26159;&#20808;&#23558;undo&#26085;&#24535;&#20889;&#20837;Undo&#39029;&#38754;&#65292;&#28982;&#21518;&#20877;&#35760;&#24405;&#20462;&#25913;&#35813;&#39029;&#38754;&#23545;&#24212;&#30340;redo&#26085;&#24535;&#21527;&#65311;
</p>
<p>
 &#20808;&#35828;&#31572;&#26696;&#65306;&#26159;&#30340;&#12290;
</p>
<p>
 &#19981;&#36807;&#36825;&#37324;&#20462;&#25913;&#21518;&#30340;&#39029;&#38754;&#24182;&#27809;&#26377;&#21152;&#20837;buffer pool&#30340;flush&#38142;&#34920;&#65292;&#35760;&#24405;&#30340;redo&#26085;&#24535;&#20063;&#27809;&#26377;&#21152;&#20837;&#21040;redo log buffer&#12290;&#24403;&#36825;&#20010;&#20989;&#25968;&#25191;&#34892;&#23436;&#21518;&#65292;&#25165;&#20250;&#65306;
</p>
<ul>
 <li>
  &#20808;&#23558;&#36825;&#20010;&#36807;&#31243;&#20135;&#29983;&#30340;redo&#26085;&#24535;&#20889;&#20837;&#21040;redo log buffer&#12290;
 </li>
 <li>
  &#20877;&#23558;&#36825;&#20010;&#36807;&#31243;&#20462;&#25913;&#30340;&#39029;&#38754;&#21152;&#20837;&#21040;buffer pool&#30340;flush&#38142;&#34920;&#20013;&#12290;
 </li>
</ul>
<p>
 &#19978;&#36848;&#36807;&#31243;&#26159;&#22312;
 <code>
  mtr_commit
 </code>
 &#20013;&#23436;&#25104;&#30340;&#65306;
</p>
<p>
 <img alt="" src="EPUB/51dfb37e-13d6-11ed-838d-acde48001122">
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#35774;&#35745;MySQL&#30340;&#22823;&#21460;&#25226;&#23545;&#24213;&#23618;&#39029;&#38754;&#30340;&#19968;&#27425;&#21407;&#23376;&#20462;&#25913;&#31216;&#20316;&#19968;&#20010;Mini Trasaction&#65292;&#21363;MTR&#12290;&#19968;&#20010;MTR&#20013;&#21253;&#21547;&#33509;&#24178;&#26465;redo&#26085;&#24535;&#65292;&#22312;&#23849;&#28291;&#24674;&#22797;&#26102;&#65292;&#35201;&#20040;&#20840;&#37096;&#24674;&#22797;&#35813;MTR&#23545;&#24212;&#30340;redo&#26085;&#24535;&#65292;&#35201;&#20040;&#20840;&#37096;&#19981;&#24674;&#22797;&#12290;
 </p>
</blockquote>
<p>
 &#20063;&#23601;&#26159;&#35828;&#23454;&#38469;&#19978;&#34429;&#28982;&#20808;&#20462;&#25913;Undo&#39029;&#38754;&#65292;&#21518;&#20889;redo&#26085;&#24535;&#65292;&#20294;&#26159;&#27492;&#26102;InnoDB&#24182;&#19981;&#35748;&#20026;Undo&#39029;&#38754;&#26159;&#33039;&#39029;&#65292;&#23601;&#19981;&#20250;&#23558;&#20854;&#21047;&#26032;&#21040;&#30828;&#30424;&#65292;redo&#26085;&#24535;&#20063;&#27809;&#26377;&#20889;&#20837;&#21040;redo log buffer&#65292;&#36825;&#20123;redo&#26085;&#24535;&#20063;&#19981;&#20250;&#34987;&#21047;&#26032;&#21040;redo&#26085;&#24535;&#25991;&#20214;&#12290;&#21482;&#26377;&#24403;MTR&#25552;&#20132;&#26102;&#65292;&#25165;&#20808;&#23558;redo&#26085;&#24535;&#22797;&#21046;&#21040;redo log buffer&#65292;&#20877;&#23558;&#20462;&#25913;&#30340;Undo&#39029;&#38754;&#21152;&#20837;&#21040;flush&#38142;&#34920;&#12290;
</p>
<p>
 &#25152;&#20197;&#25105;&#20204;&#21487;&#20197;&#31895;&#30053;&#30340;&#35748;&#20026;
 <strong>
  &#20462;&#25913;Undo&#39029;&#38754;&#30340;redo&#26085;&#24535;&#26159;&#20808;&#20889;&#30340;&#65292;&#32780;&#20462;&#25913;&#39029;&#38754;&#30340;&#36807;&#31243;&#26159;&#21518;&#21457;&#29983;&#30340;
 </strong>
 &#12290;
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#26377;&#21518;&#21488;&#32447;&#31243;&#19981;&#26029;&#30340;&#23558;redo log buffer&#20013;&#30340;redo&#26085;&#24535;&#21047;&#26032;&#21040;&#30828;&#30424;&#30340;redo&#26085;&#24535;&#25991;&#20214;&#65292;&#20063;&#26377;&#21518;&#21488;&#32447;&#31243;&#19981;&#26029;&#30340;&#23558;buffer pool&#37324;&#30340;&#33039;&#39029;&#65288;&#21482;&#26377;&#21152;&#20837;&#21040;flush&#38142;&#34920;&#21518;&#30340;&#39029;&#38754;&#25165;&#33021;&#31639;&#20316;&#26159;&#33039;&#39029;&#65289;&#21047;&#26032;&#21040;&#30828;&#30424;&#20013;&#30340;&#34920;&#31354;&#38388;&#20013;&#12290;&#35774;&#35745;InnoDB&#30340;&#22823;&#21460;&#35268;&#23450;&#65292;&#22312;&#21047;&#26032;&#19968;&#20010;&#33039;&#39029;&#21040;&#30828;&#30424;&#26102;&#65292;&#35813;&#33039;&#39029;&#23545;&#24212;&#30340;redo&#26085;&#24535;&#24212;&#35813;&#34987;&#20808;&#21047;&#26032;&#21040;redo&#26085;&#24535;&#25991;&#20214;&#12290;&#32780;redo&#26085;&#24535;&#26159;&#39034;&#24207;&#21047;&#26032;&#30340;&#65292;&#20063;&#23601;&#26159;&#35828;&#65292;&#22312;&#21047;&#26032;redo log buffer&#30340;&#26576;&#26465;redo&#26085;&#24535;&#26102;&#65292;&#22312;&#23427;&#20043;&#21069;&#30340;redo&#26085;&#24535;&#20063;&#37117;&#24212;&#35813;&#34987;&#21047;&#26032;&#21040;redo&#26085;&#24535;&#25991;&#20214;&#12290;
 </p>
</blockquote>
<h4>
 &#20462;&#25913;&#39029;&#38754;&#20869;&#23481;
</h4>
<p>
 &#19978;&#19968;&#27493;&#39588;&#26159;&#20808;&#25226;undo&#26085;&#24535;&#20889;&#21040;Undo&#39029;&#38754;&#20013;&#20197;&#21450;&#35760;&#24405;&#30456;&#24212;&#30340;redo&#26085;&#24535;&#65292;&#25509;&#19979;&#26469;&#35813;&#30495;&#27491;&#20462;&#25913;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#20102;&#12290;
</p>
<p>
 &#39318;&#20808;&#26356;&#26032;&#31995;&#32479;&#23383;&#27573;trx_id&#20197;&#21450;roll_pointer&#65306;
</p>
<p>
 <img alt="" src="EPUB/51ee929a-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#28982;&#21518;&#30495;&#27491;&#30340;&#20462;&#25913;&#35760;&#24405;&#20869;&#23481;&#65306;
</p>
<p>
 <img alt="" src="EPUB/51f828c8-13d6-11ed-838d-acde48001122">
</p>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#30001;&#20110;&#26412;&#20363;&#20013;&#30340;&#26356;&#26032;&#35821;&#21477;&#26356;&#26032;&#21069;&#21518;&#30340;&#21508;&#20010;&#23383;&#27573;&#21344;&#29992;&#30340;&#23384;&#20648;&#31354;&#38388;&#22823;&#23567;&#26159;&#19981;&#21464;&#30340;&#65292;&#25152;&#20197;&#21487;&#20197;&#30452;&#25509;&#23601;&#22320;&#65288;in place&#65289;&#26356;&#26032;&#12290;
 </p>
</blockquote>
<p>
 &#28982;&#21518;&#35760;&#24405;&#26356;&#26032;&#30340;redo&#26085;&#24535;&#65306;
</p>
<p>
 <img alt="" src="EPUB/52008a72-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20687;&#21521;Undo&#39029;&#38754;&#20889;&#20837;undo&#26085;&#24535;&#19968;&#26679;&#65292;InnoDB&#35268;&#23450;&#26356;&#26032;&#19968;&#20010;&#39029;&#38754;&#20013;&#30340;&#19968;&#26465;&#35760;&#24405;&#20063;&#23646;&#20110;&#19968;&#20010;MTR&#12290;&#22312;&#35813;MTR&#25552;&#20132;&#26102;&#65292;&#20063;&#26159;&#20808;&#23558;MTR&#20013;&#30340;redo&#26085;&#24535;&#22797;&#21046;&#21040;redo log buffer&#65292;&#28982;&#21518;&#20877;&#23558;&#20462;&#25913;&#30340;&#39029;&#38754;&#21152;&#20837;&#21040;flush&#38142;&#34920;&#12290;
</p>
<p>
 &#25152;&#20197;&#25105;&#20204;&#20063;&#21487;&#20197;&#35748;&#20026;&#22312;&#36825;&#20010;&#36807;&#31243;&#20013;&#65292;
 <strong>
  &#20808;&#35760;&#24405;&#20462;&#25913;&#39029;&#38754;&#30340;redo&#26085;&#24535;&#65292;&#28982;&#21518;&#20877;&#30495;&#27491;&#30340;&#20462;&#25913;&#39029;&#38754;
 </strong>
 &#12290;
</p>
<p>
 &#33267;&#27492;&#65292;&#19968;&#26465;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#23601;&#26356;&#26032;&#23436;&#27605;&#20102;&#12290;
</p>
<h3>
 &#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;
</h3>
<p>
 &#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#30340;&#20989;&#25968;&#22914;&#19979;&#25152;&#31034;&#65306;
</p>
<p>
 <img alt="" src="EPUB/520a1b6e-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#26102;&#19981;&#20250;&#20877;&#35760;&#24405;undo&#26085;&#24535;&#65292;&#20294;&#30001;&#20110;&#26159;&#22312;&#20462;&#25913;&#39029;&#38754;&#20869;&#23481;&#65292;&#20250;&#20808;&#35760;&#24405;&#30456;&#24212;&#30340;redo&#26085;&#24535;&#12290;
</p>
<p>
 &#30001;&#20110;&#26412;&#20363;&#23376;&#20013;&#24182;&#19981;&#20250;&#26356;&#26032;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#65292;&#25152;&#20197;&#23601;&#36339;&#36807;&#26412;&#27493;&#39588;&#20102;&#12290;
</p>
<h2>
 &#35760;&#24405;binlog
</h2>
<p>
 &#22312;&#19968;&#26465;&#26356;&#26032;&#35821;&#21477;&#25191;&#34892;&#23436;&#25104;&#21518;&#65288;&#20063;&#23601;&#26159;&#23558;&#25152;&#26377;&#24453;&#26356;&#26032;&#35760;&#24405;&#37117;&#26356;&#26032;&#23436;&#20102;&#65289;&#65292;&#23601;&#38656;&#35201;&#35813;&#35821;&#21477;&#23545;&#24212;&#30340;binlog&#26085;&#24535;&#20102;&#65288;&#19979;&#22270;&#20013;&#30340;
 <code>
  thd-&gt;binlog_query
 </code>
 &#20989;&#25968;&#65289;&#65306;
</p>
<p>
 <img alt="" src="EPUB/52142276-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19981;&#36807;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;&#27492;&#26102;&#35760;&#24405;&#30340;binlog&#26085;&#24535;&#24182;&#19981;&#20250;&#34987;&#20889;&#21040;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#65292;&#32780;&#26159;&#34987;&#26242;&#26102;&#20445;&#23384;&#21040;&#20869;&#23384;&#30340;&#26576;&#20010;&#22320;&#26041;&#65292;&#31561;&#20043;&#21518;&#20107;&#21153;&#25552;&#20132;&#30340;&#26102;&#20505;&#25165;&#20250;&#30495;&#27491;&#23558;&#35813;&#20107;&#29289;&#25191;&#34892;&#36807;&#31243;&#20013;&#20135;&#29983;&#30340;&#25152;&#26377;binlog&#32479;&#19968;&#20889;&#20837;binlog&#26085;&#24535;&#25991;&#20214;&#12290;
</p>
<h2>
 &#25552;&#20132;&#20107;&#21153;&#30340;&#26102;&#20505;
</h2>
<p>
 &#32456;&#20110;&#35201;&#21792;&#21480;&#21040;&#25152;&#35859;&#30340;
 <code>
  &#20004;&#38454;&#27573;&#25552;&#20132;
 </code>
 &#65288;two phase commit&#65289;&#21862;&#65374;
</p>
<p>
 &#22312;&#20107;&#21153;&#25552;&#20132;&#26102;&#65292;binlog&#25165;&#20250;&#34987;&#30495;&#27491;&#21047;&#26032;&#21040;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#65292;redo&#26085;&#24535;&#20063;&#20250;&#34987;&#21047;&#26032;&#21040;redo&#26085;&#24535;&#25991;&#20214;&#20013;&#12290;&#19981;&#36807;&#30001;&#20110;&#36825;&#20010;&#37096;&#20998;&#28041;&#21450;&#36739;&#22810;&#30340;&#30693;&#35782;&#28857;&#65292;&#25152;&#20197;&#25105;&#20204;&#26412;&#31687;&#20808;&#19981;&#21792;&#21480;&#20102;&#65292;&#30041;&#22312;&#19979;&#19968;&#31687;&#37324;&#21543;
</p>
<p>
 &#21704;&#21704;&gt;_&gt;
</p>
<h2>
 &#24635;&#32467;
</h2>
<p>
 &#26412;&#31687;&#25991;&#31456;&#21792;&#21480;&#20102;&#25191;&#34892;&#19968;&#26465;UPDATE&#35821;&#21477;&#36807;&#31243;&#20013;&#37117;&#21457;&#29983;&#20102;&#20160;&#20040;&#20107;&#24773;&#12290;&#24403;&#20248;&#21270;&#22120;&#20998;&#26512;&#20986;&#25104;&#26412;&#26368;&#23567;&#30340;&#25191;&#34892;&#35745;&#21010;&#21518;&#65292;&#23601;&#24320;&#22987;&#23545;&#25191;&#34892;&#35745;&#21010;&#20013;&#30340;&#21508;&#20010;&#25195;&#25551;&#25195;&#25551;&#21306;&#38388;&#20013;&#30340;&#35760;&#24405;&#36827;&#34892;&#26356;&#26032;&#12290;&#20855;&#20307;&#26356;&#26032;&#19968;&#26465;&#35760;&#24405;&#30340;&#27969;&#31243;&#22914;&#19979;&#65306;
</p>
<ol>
 <li>
  &#20808;&#22312;B+&#26641;&#20013;&#23450;&#20301;&#21040;&#35813;&#35760;&#24405;&#65288;&#36825;&#20010;&#36807;&#31243;&#20063;&#34987;&#31216;&#20316;&#21152;&#38145;&#35835;&#65289;&#65292;&#22914;&#26524;&#35813;&#35760;&#24405;&#25152;&#22312;&#30340;&#39029;&#38754;&#19981;&#22312;buffer pool&#37324;&#65292;&#20808;&#23558;&#20854;&#21152;&#36733;&#21040;buffer pool&#37324;&#20877;&#35835;&#21462;&#12290;
 </li>
 <li>
  &#35835;&#21462;&#21040;&#35760;&#24405;&#21518;&#21028;&#26029;&#35760;&#24405;&#26356;&#26032;&#21069;&#21518;&#26159;&#21542;&#19968;&#26679;&#65292;&#19968;&#26679;&#30340;&#35805;&#23601;&#36339;&#36807;&#35813;&#35760;&#24405;&#65292;&#21542;&#21017;&#36827;&#34892;&#21518;&#32493;&#27493;&#39588;&#12290;
 </li>
 <li>
  &#39318;&#20808;&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#12290;
&#26356;&#26032;&#32858;&#31751;&#32034;&#24341;&#35760;&#24405;&#26102;&#65306;
&#9312;&#20808;&#21521;Undo&#39029;&#38754;&#20889;undo&#26085;&#24535;&#12290;&#19981;&#36807;&#30001;&#20110;&#36825;&#26159;&#22312;&#26356;&#25913;&#39029;&#38754;&#65292;&#25152;&#20197;&#20462;&#25913;Undo&#39029;&#38754;&#21069;&#38656;&#35201;&#20808;&#35760;&#24405;&#19968;&#19979;&#30456;&#24212;&#30340;redo&#26085;&#24535;&#12290;
&#9313;&#30495;&#27491;&#30340;&#26356;&#26032;&#35760;&#24405;&#12290;&#19981;&#36807;&#22312;&#30495;&#27491;&#26356;&#26032;&#35760;&#24405;&#21069;&#20063;&#38656;&#35201;&#35760;&#24405;&#30456;&#24212;&#30340;redo&#26085;&#24535;&#12290;
 </li>
 <li>
  &#26356;&#26032;&#20854;&#20182;&#30340;&#20108;&#32423;&#32034;&#24341;&#35760;&#24405;&#12290;
 </li>
</ol>
<p>
 &#33267;&#27492;&#65292;&#19968;&#26465;&#35760;&#24405;&#23601;&#26356;&#26032;&#23436;&#20102;&#12290;
</p>
<p>
 &#28982;&#21518;&#24320;&#22987;&#35760;&#24405;&#35813;&#35821;&#21477;&#23545;&#24212;&#30340;binlog&#26085;&#24535;&#65292;&#27492;&#26102;&#35760;&#24405;&#30340;binlog&#24182;&#27809;&#26377;&#21047;&#26032;&#21040;&#30828;&#30424;&#19978;&#30340;binlog&#26085;&#24535;&#25991;&#20214;&#65292;&#22312;&#20107;&#21153;&#25552;&#20132;&#26102;&#25165;&#20250;&#32479;&#19968;&#23558;&#35813;&#20107;&#21153;&#36816;&#34892;&#36807;&#31243;&#20013;&#30340;&#25152;&#26377;binlog&#26085;&#24535;&#21047;&#26032;&#21040;&#30828;&#30424;&#12290;
</p>
<p>
 &#21097;&#19979;&#30340;&#23601;&#26159;&#25152;&#35859;&#30340;
 <code>
  &#20004;&#38454;&#27573;&#25552;&#20132;
 </code>
 &#30340;&#20107;&#24773;&#20102;&#65292;&#25105;&#20204;&#19979;&#33410;&#20877;&#20250;&#65374;
</p>
</div>

</div>
</div>

        </body>
        
        