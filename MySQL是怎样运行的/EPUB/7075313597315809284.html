
        <html lang="en">
        <head>
        <meta charset="UTF-8"/>
        </head>
        <body>
        <div><div class="markdown-body">
    <h1>&#19987;&#39064;&#24335;&#35762;&#35299; &#8212;&#8212; binlog&#37027;&#20123;&#20107;&#20799;&#65288;&#20108;&#65289;</h1>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="style/style.css" type="text/css">

<div class="markdown-body">
    <h1>
 binlog&#37027;&#20123;&#20107;&#20799;&#65288;&#20108;&#65289;
</h1>
<p>
 &#26631;&#31614;&#65306; MySQL&#26159;&#24590;&#26679;&#36816;&#34892;&#30340;
</p>
<hr>
<p>
 &#35835;&#23436;&#19978;&#19968;&#31687;&#25991;&#31456;&#65292;&#25105;&#20204;&#24212;&#35813;&#30693;&#36947;&#65306;
</p>
<ul>
 <li>
  <p>
   binlog&#26085;&#24535;&#29992;&#20110;&#20027;&#20174;&#22797;&#21046;&#20197;&#21450;&#25968;&#25454;&#24674;&#22797;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#21551;&#21160;&#36873;&#39033;
   <code>
    --log-bin[=basename]
   </code>
   &#21487;&#20197;&#25511;&#21046;MySQL&#26381;&#21153;&#22120;&#26159;&#21542;&#29983;&#25104;binlog&#65292;&#24182;&#19988;&#25511;&#21046;binlog&#26085;&#24535;&#25991;&#20214;&#25152;&#22312;&#36335;&#24452;&#20197;&#21450;&#25991;&#20214;&#21517;&#31216;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20026;&#20102;&#35760;&#24405;binlog&#65292;MySQL&#26381;&#21153;&#22120;&#22312;&#25991;&#20214;&#31995;&#32479;&#19978;&#21019;&#24314;&#20102;&#19968;&#31995;&#21015;&#23384;&#20648;&#30495;&#23454;binlog&#25968;&#25454;&#30340;&#25991;&#20214;&#65288;&#36825;&#20123;&#25991;&#20214;&#37117;&#20197;&#25968;&#23383;&#32534;&#21495;&#65289;&#65292;&#20197;&#21450;binlog&#32034;&#24341;&#25991;&#20214;&#12290;
  </p>
 </li>
 <li>
  <p>
   binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#35760;&#36733;&#20102;&#25968;&#25454;&#24211;&#21457;&#29983;&#26356;&#25913;&#30340;&#33509;&#24178;&#20107;&#20214;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#20351;&#29992;SHOW BINLOG EVENTS&#35821;&#21477;&#21487;&#20197;&#26597;&#30475;&#26576;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#20013;&#23384;&#20648;&#30340;&#21508;&#31181;&#20107;&#20214;&#12290;
  </p>
 </li>
 <li>
  <p>
   mysqlbinlog&#23454;&#29992;&#24037;&#20855;&#21487;&#20197;&#29992;&#25991;&#26412;&#24418;&#24335;&#26597;&#30475;&#26576;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#25152;&#35760;&#36733;&#21508;&#31181;&#20107;&#20214;&#12290;
  </p>
 </li>
</ul>
<p>
 &#25484;&#25569;&#20102;&#19978;&#36848;&#20869;&#23481;&#20043;&#21518;&#65292;&#25105;&#20204;&#21487;&#20197;&#32487;&#32493;&#23637;&#24320;&#20102;&#12290;
</p>
<h2>
 binlog&#26085;&#24535;&#29256;&#26412;
</h2>
<p>
 binlog&#26159;&#33258;MySQL 3.23.14&#29256;&#26412;&#24320;&#22987;&#35806;&#29983;&#30340;&#65292;&#21040;&#29616;&#22312;&#20026;&#27490;&#65292;&#20849;&#32463;&#21382;&#20102;4&#20010;&#29256;&#26412;&#65306;
</p>
<ul>
 <li>
  v1
 </li>
 <li>
  v2
 </li>
 <li>
  v3
 </li>
 <li>
  v4
 </li>
</ul>
<p>
 &#20854;&#20013;&#30340;v4&#29256;&#26412;&#20174;MySQL 5.0&#23601;&#24320;&#22987;&#20351;&#29992;&#65292;&#30452;&#21040;&#20170;&#22825;&#12290;
</p>
<p>
 &#25152;&#20197;&#26412;&#25991;&#30528;&#37325;&#20171;&#32461;v4&#29256;&#26412;&#30340;binlog&#26684;&#24335;&#65292;&#20854;&#20182;&#29256;&#26412;&#23601;&#19981;&#20851;&#27880;&#20102;&#12290;
</p>
<h2>
 binlog&#26085;&#24535;&#25991;&#20214;&#32467;&#26500;&#27010;&#35272;
</h2>
<p>
 &#24223;&#35805;&#23569;&#35828;&#65292;&#20808;&#30475;&#19968;&#19979;&#19968;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#30340;&#22522;&#26412;&#26684;&#24335;&#65306;
</p>
<p>
 <img alt="" src="EPUB/50460608-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20174;&#19978;&#22270;&#20013;&#21487;&#20197;&#30475;&#20986;&#65306;
</p>
<ul>
 <li>
  &#27599;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#30340;&#21069;4&#20010;&#23383;&#33410;&#26159;&#22266;&#23450;&#30340;&#65292;&#21363;&#65306;
  <code>
   0xfe626963
  </code>
  &#12290;
 </li>
</ul>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  0xfe626963&#20013;&#30340;0x626963&#30340;ascii&#30721;&#26159;'bin'&#65292;0xfe626963&#20063;&#34987;&#31216;&#20316;&#39764;&#25968;&#65288;magic number&#65289;&#65292;&#22914;&#26524;&#19968;&#20010;&#25991;&#20214;&#19981;&#20197;0xfe626963&#24320;&#22836;&#65292;&#37027;&#36825;&#20010;&#25991;&#20214;&#32943;&#23450;&#19981;&#31639;&#26159;&#19968;&#20010;binlog&#26085;&#24535;&#12290;&#24456;&#22810;&#36719;&#20214;&#37117;&#20250;&#22312;&#30913;&#30424;&#25991;&#20214;&#30340;&#26576;&#20010;&#22320;&#26041;&#28155;&#21152;&#19968;&#20010;&#31867;&#20284;&#30340;&#39764;&#25968;&#26469;&#34920;&#26126;&#35813;&#25991;&#20214;&#26159;&#26412;&#36719;&#20214;&#22788;&#29702;&#30340;&#25991;&#20214;&#26684;&#24335;&#65292;&#27604;&#26041;&#35828;Intel&#22788;&#29702;&#22120;&#30340;BIOS&#20250;&#23558;&#30913;&#30424;&#19978;&#30340;&#31532;&#19968;&#20010;&#25159;&#21306;&#21152;&#36733;&#21040;&#20869;&#23384;&#20013;&#65292;&#36825;&#20010;&#25159;&#21306;&#30340;&#26368;&#21518;&#20004;&#20010;&#23383;&#33410;&#24517;&#39035;&#20026;&#39764;&#25968;0x55aa&#65292;Java&#30340;class&#25991;&#20214;&#23383;&#33410;&#30721;&#30340;&#24320;&#22836;&#22235;&#20010;&#23383;&#33410;&#20026;&#39764;&#25968;0xCAFEBABE&#12290;
 </p>
</blockquote>
<ul>
 <li>
  <p>
   &#27599;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#37117;&#26159;&#30001;&#33509;&#24178;&#20107;&#20214;&#26500;&#25104;&#30340;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#27599;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#25152;&#23384;&#20648;&#30340;&#31532;1&#20010;&#20107;&#20214;&#37117;&#26159;&#19968;&#20010;&#31216;&#20316;
   <code>
    &#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
   </code>
   &#65288;format description event&#65289;&#30340;&#29305;&#27530;&#20107;&#20214;&#65292;&#25105;&#20204;&#31245;&#21518;&#35814;&#32454;&#21792;&#21480;&#19968;&#19979;&#36825;&#20010;&#29305;&#27530;&#20107;&#20214;&#12290;
  </p>
 </li>
</ul>
<p>
 &#20854;&#20013;&#65292;&#27599;&#20010;&#20107;&#20214;&#37117;&#21487;&#20197;&#34987;&#20998;&#25104;
 <code>
  event header
 </code>
 &#21644;
 <code>
  event data
 </code>
 &#20004;&#20010;&#37096;&#20998;&#65292;&#25105;&#20204;&#20197;&#19978;&#22270;&#30340;
 <code>
  &#20107;&#20214;2
 </code>
 &#20026;&#20363;&#23637;&#31034;&#19968;&#19979;&#65306;
</p>
<p>
 <img alt="" src="EPUB/50515670-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20854;&#20013;&#65306;
</p>
<ul>
 <li>
  <p>
   event header&#37096;&#20998;&#25551;&#36848;&#20102;&#35813;&#20107;&#20214;&#26159;&#20160;&#20040;&#31867;&#22411;&#12289;&#20160;&#20040;&#26102;&#20505;&#29983;&#25104;&#30340;&#12289;&#30001;&#21738;&#20010;&#26381;&#21153;&#22120;&#29983;&#25104;&#30340;&#31561;&#20449;&#24687;&#12290;
  </p>
 </li>
 <li>
  <p>
   event data&#37096;&#20998;&#25551;&#36848;&#20102;&#35813;&#20107;&#20214;&#25152;&#29305;&#26377;&#30340;&#19968;&#20123;&#20449;&#24687;&#65292;&#27604;&#26041;&#35828;&#22312;&#25554;&#20837;&#19968;&#26465;&#35760;&#24405;&#26102;&#65292;&#38656;&#35201;&#23558;&#36825;&#26465;&#35760;&#24405;&#30340;&#20869;&#23481;&#35760;&#24405;&#22312;event data&#20013;&#12290;
  </p>
 </li>
</ul>
<h3>
 event header&#32467;&#26500;
</h3>
<p>
 &#27599;&#20010;&#20107;&#20214;&#37117;&#20250;&#21253;&#25324;&#19968;&#20010;&#36890;&#29992;&#30340;event header&#65292;&#25105;&#20204;&#30475;&#19968;&#19979;&#36825;&#20010;event header&#30340;&#32467;&#26500;&#65306;
</p>
<p>
 <img alt="" src="EPUB/5061bb8c-13d6-11ed-838d-acde48001122">
</p>
<p>
 event header&#20013;&#21253;&#21547;&#20102;&#22914;&#19979;&#20960;&#37096;&#20998;&#20869;&#23481;&#65306;
</p>
<ul>
 <li>
  timestamp&#65288;4&#23383;&#33410;&#65289;&#65306;&#20135;&#29983;&#35813;&#20107;&#20214;&#26102;&#30340;&#26102;&#38388;&#25139;&#12290;
 </li>
 <li>
  typecode&#65288;1&#23383;&#33410;&#65289;&#65306;&#35813;&#20107;&#20214;&#30340;&#31867;&#22411;&#65292;&#20107;&#20214;&#30340;&#31867;&#22411;&#22312;&#26522;&#20030;&#32467;&#26500;
  <code>
   Log_event_type
  </code>
  &#20013;&#21015;&#20030;&#20986;&#26469;&#65288;&#19978;&#19968;&#31687;&#25991;&#31456;&#25110;&#32773;&#26412;&#25991;&#21518;&#32493;&#37096;&#20998;&#37117;&#26377;&#25552;&#21040;&#36825;&#20010;&#32467;&#26500;&#65289;&#12290;&#27604;&#26041;&#35828;
  <code>
   &#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
  </code>
  &#30340;typecode&#23601;&#26159;15&#12290;
 </li>
 <li>
  server_id&#65288;4&#23383;&#33410;&#65289;&#65306;&#20135;&#29983;&#35813;&#20107;&#20214;&#30340;&#20027;&#26426;&#30340;server_id&#12290;
 </li>
 <li>
  event_length&#65288;4&#23383;&#33410;&#65289;&#65306;&#35813;&#20107;&#20214;&#24635;&#22823;&#23567;&#65288;&#21253;&#25324;event header + event data&#65289;&#12290;
 </li>
 <li>
  next_position&#65288;4&#23383;&#33410;&#65289;&#65306;&#19979;&#19968;&#20010;&#20107;&#20214;&#30340;&#20301;&#32622;&#12290;
 </li>
 <li>
  flags&#65288;2&#23383;&#33410;&#65289;&#65306;&#35813;&#20107;&#20214;&#30340;&#19968;&#20123;&#38468;&#21152;&#23646;&#24615;&#65288;&#31216;&#20316;flags&#65289;&#12290;
 </li>
 <li>
  extra_headers&#65288;&#19981;&#30830;&#23450;&#22823;&#23567;&#65289;&#65306;&#30446;&#21069;&#36825;&#20010;&#23383;&#27573;&#23578;&#26410;&#20351;&#29992;&#65288;&#20063;&#23601;&#26159;&#21344;&#29992;&#30340;&#22823;&#23567;&#20026;0&#65289;&#65292;&#21487;&#33021;&#22312;&#23558;&#26469;&#30340;&#29256;&#26412;&#20013;&#20351;&#29992;&#65292;&#22823;&#23478;&#30446;&#21069;&#24573;&#30053;&#36825;&#20010;&#23383;&#27573;&#23601;&#22909;&#20102;&#12290;
 </li>
</ul>
<h3>
 event data
</h3>
<p>
 event data&#30001;2&#37096;&#20998;&#32452;&#25104;&#65292;&#20998;&#21035;&#26159;&#65306;
</p>
<ul>
 <li>
  &#22266;&#23450;&#22823;&#23567;&#37096;&#20998;
 </li>
 <li>
  &#21487;&#21464;&#22823;&#23567;&#37096;&#20998;
 </li>
</ul>
<p>
 <img alt="" src="EPUB/507d3fba-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#19981;&#36807;&#24182;&#19981;&#26159;&#25152;&#26377;&#20107;&#20214;&#37117;&#26377;&#36825;&#20004;&#20010;&#37096;&#20998;&#65292;
 <strong>
  &#26377;&#30340;&#20107;&#20214;&#21487;&#20197;&#20165;&#26377;&#20854;&#20013;&#30340;&#19968;&#20010;&#37096;&#20998;&#25110;&#32773;&#20004;&#20010;&#37096;&#20998;&#37117;&#27809;&#26377;
 </strong>
 &#12290;
</p>
<p>
 &#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#21792;&#21480;&#36807;&#65292;MySQL&#20013;&#25903;&#25345;&#20960;&#21313;&#31181;binlog&#20107;&#20214;&#65292;&#19981;&#21516;&#20107;&#20214;&#20855;&#26377;&#19981;&#21516;&#30340;event data&#37096;&#20998;&#12290;
</p>
<p>
 &#25105;&#20204;&#20808;&#30475;&#19968;&#19979;binlog&#30340;&#20107;&#20214;&#31867;&#22411;&#26377;&#22810;&#23569;&#65288;&#19978;&#19968;&#31687;&#25991;&#31456;&#20013;&#24341;&#29992;MySQL internal&#25991;&#26723;&#20013;&#30340;&#20869;&#23481;&#65292;&#26377;&#28857;&#38472;&#26087;&#65292;&#25152;&#20197;&#36825;&#27425;&#30452;&#25509;&#20174;MySQL5.7.22&#30340;&#28304;&#30721;&#20013;&#33719;&#21462;Log_event_type&#32467;&#26500;&#65289;&#65306;
</p>
<pre><code>enum Log_event_type
{
  /**
    Every time you update this enum (when you add a type), you have to
    fix Format_description_event::Format_description_event().
  */
  UNKNOWN_EVENT= 0,
  START_EVENT_V3= 1,
  QUERY_EVENT= 2,
  STOP_EVENT= 3,
  ROTATE_EVENT= 4,
  INTVAR_EVENT= 5,
  LOAD_EVENT= 6,
  SLAVE_EVENT= 7,
  CREATE_FILE_EVENT= 8,
  APPEND_BLOCK_EVENT= 9,
  EXEC_LOAD_EVENT= 10,
  DELETE_FILE_EVENT= 11,
  /**
    NEW_LOAD_EVENT is like LOAD_EVENT except that it has a longer
    sql_ex, allowing multibyte TERMINATED BY etc; both types share the
    same class (Load_event)
  */
  NEW_LOAD_EVENT= 12,
  RAND_EVENT= 13,
  USER_VAR_EVENT= 14,
  FORMAT_DESCRIPTION_EVENT= 15,
  XID_EVENT= 16,
  BEGIN_LOAD_QUERY_EVENT= 17,
  EXECUTE_LOAD_QUERY_EVENT= 18,

  TABLE_MAP_EVENT = 19,

  /**
    The PRE_GA event numbers were used for 5.1.0 to 5.1.15 and are
    therefore obsolete.
   */
  PRE_GA_WRITE_ROWS_EVENT = 20,
  PRE_GA_UPDATE_ROWS_EVENT = 21,
  PRE_GA_DELETE_ROWS_EVENT = 22,

  /**
    The V1 event numbers are used from 5.1.16 until mysql-trunk-xx
  */
  WRITE_ROWS_EVENT_V1 = 23,
  UPDATE_ROWS_EVENT_V1 = 24,
  DELETE_ROWS_EVENT_V1 = 25,

  /**
    Something out of the ordinary happened on the master
   */
  INCIDENT_EVENT= 26,

  /**
    Heartbeat event to be send by master at its idle time
    to ensure master's online status to slave
  */
  HEARTBEAT_LOG_EVENT= 27,

  /**
    In some situations, it is necessary to send over ignorable
    data to the slave: data that a slave can handle in case there
    is code for handling it, but which can be ignored if it is not
    recognized.
  */
  IGNORABLE_LOG_EVENT= 28,
  ROWS_QUERY_LOG_EVENT= 29,

  /** Version 2 of the Row events */
  WRITE_ROWS_EVENT = 30,
  UPDATE_ROWS_EVENT = 31,
  DELETE_ROWS_EVENT = 32,

  GTID_LOG_EVENT= 33,
  ANONYMOUS_GTID_LOG_EVENT= 34,

  PREVIOUS_GTIDS_LOG_EVENT= 35,

  TRANSACTION_CONTEXT_EVENT= 36,

  VIEW_CHANGE_EVENT= 37,

  /* Prepared XA transaction terminal event similar to Xid */
  XA_PREPARE_LOG_EVENT= 38,
  /**
    Add new events here - right above this comment!
    Existing events (except ENUM_END_EVENT) should never change their numbers
  */
  ENUM_END_EVENT /* end marker */
};
</code></pre>
<p>
 &#21487;&#35265;&#22312;MySQL 5.7.22&#36825;&#20010;&#29256;&#26412;&#20013;&#65292;&#20849;&#25903;&#25345;38&#31181;&#19981;&#21516;&#30340;binlog&#20107;&#20214;&#31867;&#22411;&#12290;&#25226;&#27599;&#19968;&#31181;&#20107;&#20214;&#26684;&#24335;&#37117;&#21792;&#21480;&#28165;&#26970;&#35201;&#33457;&#36153;&#24456;&#22810;&#31687;&#24133;&#65292;&#24182;&#19988;&#27809;&#26377;&#22810;&#22823;&#30340;&#24517;&#35201;&#65292;&#25105;&#20204;&#19979;&#36793;&#21482;&#20030;&#19968;&#20010;&#20855;&#20307;&#30340;&#20363;&#23376;&#36827;&#34892;&#25551;&#36848;&#12290;
</p>
<h3>
 &#20030;&#19968;&#20010;&#20855;&#20307;&#30340;&#20363;&#23376;&#8212;&#8212;&#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
</h3>
<p>
 &#27599;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#37117;&#20197;
 <code>
  &#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
 </code>
 &#20316;&#20026;&#31532;&#19968;&#20010;&#20107;&#20214;&#65292;&#23427;&#23545;&#24212;&#30340;Log_event_type&#23601;&#26159;FORMAT_DESCRIPTION_EVENT&#12290;&#25105;&#20204;&#30475;&#19968;&#19979;&#36825;&#31181;&#20107;&#20214;&#30340;&#32467;&#26500;&#65306;
</p>
<p>
 <img alt="" src="EPUB/50895264-13d6-11ed-838d-acde48001122">
</p>
<p>
 &#20174;&#22270;&#20013;&#25105;&#20204;&#21487;&#20197;&#30693;&#36947;&#65292;
 <code>
  &#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
 </code>
 &#20849;&#21344;&#29992;119&#23383;&#33410;&#65292;&#26159;&#30001;event header&#21644;event data&#20004;&#37096;&#20998;&#26500;&#25104;&#30340;&#65292;&#20854;&#20013;event header&#26159;&#21508;&#20010;&#20107;&#20214;&#37117;&#26377;&#30340;&#37096;&#20998;&#65292;&#25105;&#20204;&#19978;&#36793;&#35814;&#32454;&#21792;&#21480;&#36807;event header&#20013;&#21508;&#20010;&#23383;&#27573;&#30340;&#21547;&#20041;&#65292;&#36825;&#37324;&#23601;&#19981;&#36184;&#36848;&#20102;&#12290;&#21478;&#22806;&#65292;&#22312;event data&#37096;&#20998;&#65292;
 <code>
  &#26684;&#24335;&#25551;&#36848;&#20107;&#20214;
 </code>
 &#30340;event data&#20013;&#21482;&#26377;
 <code>
  &#22266;&#23450;&#38271;&#24230;&#37096;&#20998;
 </code>
 &#65292;&#27809;&#26377;
 <code>
  &#21487;&#21464;&#38271;&#24230;&#37096;&#20998;
 </code>
 &#65292;&#20854;&#20013;&#30340;&#21508;&#20010;&#23383;&#27573;&#21547;&#20041;&#22914;&#19979;&#65306;
</p>
<ul>
 <li>
  <code>
   binlog_version
  </code>
  &#65306;&#20351;&#29992;&#30340;binlog&#29256;&#26412;&#12290;
 </li>
 <li>
  <code>
   server_version
  </code>
  &#65306;&#20135;&#29983;&#27492;&#20107;&#20214;&#30340;MySQL&#26381;&#21153;&#22120;&#30340;&#29256;&#26412;&#12290;
 </li>
 <li>
  <code>
   create_timestamp
  </code>
  &#65306;&#20135;&#29983;&#27492;&#20107;&#20214;&#26102;&#30340;&#26102;&#38388;&#25139;&#65292;&#35813;&#23383;&#27573;&#30340;&#20540;&#21644;event header&#20013;timestamp&#20013;&#30340;&#20540;&#19968;&#26679;&#12290;
 </li>
 <li>
  <code>
   header_length
  </code>
  &#65306;&#27492;&#20107;&#20214;&#30340;event header&#21344;&#29992;&#30340;&#23384;&#20648;&#31354;&#38388;&#22823;&#23567;&#12290;
 </li>
 <li>
  <code>
   post-header length
  </code>
  &#65306;&#20351;&#29992;1&#20010;&#23383;&#33410;&#26469;&#34920;&#31034;&#27599;&#20010;&#20107;&#20214;&#30340;event data&#37096;&#20998;&#21344;&#29992;&#30340;&#23384;&#20648;&#31354;&#38388;&#22823;&#23567;&#65288;&#19981;&#21253;&#25324;&#26657;&#39564;&#21644;&#30456;&#20851;&#23383;&#27573;&#65289;&#65292;&#24403;&#21069;&#25105;&#20351;&#29992;&#30340;MySQL&#29256;&#26412;&#20026;5.7.22&#65292;&#20849;&#21253;&#21547;38&#31181;&#19981;&#21516;&#30340;&#20107;&#20214;&#65292;
  <code>
   post-header length
  </code>
  &#23383;&#27573;&#23601;&#21344;&#29992;&#20102;38&#20010;&#23383;&#33410;&#12290;
 </li>
 <li>
  <code>
   checksum_alg
  </code>
  &#65306;&#34920;&#31034;&#35745;&#31639;&#20107;&#20214;&#26657;&#39564;&#21644;&#30340;&#31639;&#27861;&#65288;&#35813;&#23383;&#27573;&#20026;1&#26102;&#34920;&#31034;&#37319;&#29992;CRC32&#31639;&#27861;&#65289;&#12290;
 </li>
 <li>
  <code>
   checksum
  </code>
  &#65306;&#34920;&#31034;&#26412;&#20107;&#20214;&#30340;&#26657;&#39564;&#21644;&#12290;
 </li>
</ul>
<p>
 &#21792;&#21480;&#20102;&#24456;&#22810;&#65292;&#22823;&#23478;&#30495;&#27491;&#25171;&#24320;&#19968;&#20010;binlog&#26085;&#24535;&#25991;&#20214;&#26469;&#30475;&#19968;&#19979;&#65306;
</p>
<pre><code>&#39764;&#25968;&#65306;      FE62696E 

timestamp:     8AB5A861  
typecode:     0F          
server_id:     03000000 
event_length:     77000000 
next_postion:     7B000000 
flags:      0000     
binlog_version:    0400   
server_version:    352E37 2E32312D 6C6F6700 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 000000  
create_timestamp:    8AB5A861 
header_length:     13       
post-header length(&#20849;38&#31181;): 380D0008 00120004 04040412 00005F00 041A0800 00000808 08020000 000A0A0A 2A2A0012 3400
checksum_alg&#65306;    01 
checksum&#65306;      5B7108A3
</code></pre>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#20854;&#20182;&#20107;&#20214;&#30340;event data&#37096;&#20998;&#22823;&#23478;&#21487;&#20197;&#21442;&#32771;&#19968;&#19979;MySQL internal&#25991;&#26723;&#12290;&#21478;&#22806;&#65292;&#20063;&#21487;&#20197;&#20351;&#29992;mysqlbinlog&#65292;&#37197;&#21512;--hexdump&#21551;&#21160;&#36873;&#39033;&#26469;&#30452;&#25509;&#20998;&#26512;binlog&#30340;&#20108;&#36827;&#21046;&#26684;&#24335;&#12290;
 </p>
</blockquote>
<h2>
 &#22522;&#20110;&#35821;&#21477;&#65288;Statement&#65289;&#21644;&#22522;&#20110;&#34892;(Row)&#30340;binlog
</h2>
<p>
 &#21516;&#19968;&#26465;SQL&#35821;&#21477;&#65292;&#38543;&#30528;&#21551;&#21160;&#36873;&#39033;
 <code>
  binlog-format
 </code>
 &#30340;&#19981;&#21516;&#65292;&#21487;&#33021;&#29983;&#25104;&#19981;&#21516;&#31867;&#22411;&#30340;binlog&#20107;&#20214;&#65306;
</p>
<ul>
 <li>
  <p>
   &#24403;&#20197;&#21551;&#21160;&#36873;&#39033;
   <code>
    --binlog-format=STATEMENT
   </code>
   &#21551;&#21160;MySQL&#26381;&#21153;&#22120;&#26102;&#65292;&#29983;&#25104;&#30340;binlog&#31216;&#20316;
   <code>
    &#22522;&#20110;&#35821;&#21477;&#30340;&#26085;&#24535;
   </code>
   &#12290;&#27492;&#26102;&#21482;&#20250;&#23558;&#19968;&#26465;SQL&#35821;&#21477;&#23558;&#20250;&#34987;&#23436;&#25972;&#30340;&#35760;&#24405;&#21040;binlog&#20013;&#65292;&#32780;&#19981;&#31649;&#35813;&#35821;&#21477;&#24433;&#21709;&#20102;&#22810;&#23569;&#35760;&#24405;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20197;&#21551;&#21160;&#36873;&#39033;
   <code>
    --binlog-format=ROW
   </code>
   &#21551;&#21160;MySQL&#26381;&#21153;&#22120;&#26102;&#65292;&#29983;&#25104;&#30340;binlog&#31216;&#20316;
   <code>
    &#22522;&#20110;&#34892;&#30340;&#26085;&#24535;
   </code>
   &#12290;&#27492;&#26102;&#20250;&#23558;&#35813;&#35821;&#21477;&#25152;&#25913;&#21160;&#30340;&#35760;&#24405;&#30340;&#20840;&#37096;&#20449;&#24687;&#37117;&#35760;&#24405;&#19978;&#12290;
  </p>
 </li>
 <li>
  <p>
   &#24403;&#20197;&#21551;&#21160;&#36873;&#39033;
   <code>
    --binlog-format=MIXED
   </code>
   &#21551;&#21160;MySQL&#26381;&#21153;&#22120;&#26102;&#65292;&#29983;&#25104;&#30340;binlog&#31216;&#20316;
   <code>
    &#22522;&#20110;&#34892;&#30340;&#26085;&#24535;
   </code>
   &#12290;&#27492;&#26102;&#22312;&#36890;&#24120;&#24773;&#20917;&#19979;&#37319;&#29992;
   <code>
    &#22522;&#20110;&#35821;&#21477;&#30340;&#26085;&#24535;
   </code>
   &#65292;&#22312;&#26576;&#20123;&#29305;&#27530;&#24773;&#20917;&#19979;&#20250;&#33258;&#21160;&#36716;&#20026;
   <code>
    &#22522;&#20110;&#34892;&#30340;&#26085;&#24535;
   </code>
   &#65288;&#36825;&#20123;&#20855;&#20307;&#24773;&#20917;&#35831;&#21442;&#32771;&#65306;
   <a href="https://dev.mysql.com/doc/refman/8.0/en/binary-log-mixed.html%EF%BC%89%E3%80%82" rel="nofollow noopener noreferrer" target="_blank">
    https://dev.mysql.com/doc/refman/8.0/en/binary-log-mixed.html&#65289;&#12290;
   </a>
  </p>
 </li>
</ul>
<blockquote>
 <p>
  &#23567;&#36148;&#22763;&#65306;
  <br>
  <br>
  &#25105;&#20204;&#20063;&#21487;&#20197;&#36890;&#36807;&#20462;&#25913;&#20250;&#35805;&#32423;&#21035;&#30340;binlog_format&#31995;&#32479;&#21464;&#37327;&#30340;&#24418;&#24335;&#26469;&#20462;&#25913;&#21482;&#38024;&#23545;&#26412;&#23458;&#25143;&#31471;&#25191;&#34892;&#35821;&#21477;&#29983;&#25104;&#30340;binlog&#26085;&#24535;&#30340;&#26684;&#24335;&#12290;
 </p>
</blockquote>
<h3>
 &#22522;&#20110;&#35821;&#21477;&#30340;binlog
</h3>
<p>
 &#20551;&#22914;&#26381;&#21153;&#22120;&#21551;&#21160;&#26102;&#28155;&#21152;&#20102;
 <code>
  --binlog-format=STATEMENT
 </code>
 &#21551;&#21160;&#36873;&#39033;&#65292;&#25105;&#20204;&#25191;&#34892;&#22914;&#19979;&#35821;&#21477;&#65306;
</p>
<pre><code>UPDATE s1 SET common_field = 'xx' WHERE id &gt; 9990;
</code></pre>
<p>
 &#28982;&#21518;&#20351;&#29992;mysqlbinlog&#23454;&#29992;&#24037;&#20855;&#26597;&#30475;&#19968;&#19979;&#30456;&#24212;&#30340;binlog&#20869;&#23481;&#65306;
</p>
<pre><code>mysqlbinlog --verbose xiaohaizi-bin.000007
...&#36825;&#37324;&#30465;&#30053;&#20102;&#24456;&#22810;&#20869;&#23481;
# at 308
#211207 21:00:27 server id 3  end_log_pos 440 CRC32 0x713f80ae  Query thread_id=2 exec_time=0 error_code=0
use `xiaohaizi`/*!*/;
SET TIMESTAMP=1638882027/*!*/;
update s1 set common_field= 'xx' where id &gt; 9990
/*!*/;
...&#36825;&#37324;&#30465;&#30053;&#20102;&#24456;&#22810;&#20869;&#23481;
</code></pre>
<p>
 &#21487;&#35265;&#65292;
 <code>
  &#22522;&#20110;&#35821;&#21477;&#30340;binlog
 </code>
 &#21482;&#23558;&#26356;&#26032;&#35821;&#21477;&#26159;&#20160;&#20040;&#35760;&#24405;&#19979;&#26469;&#20102;&#12290;
</p>
<h3>
 &#22522;&#20110;&#34892;&#30340;binlog
</h3>
<p>
 &#20551;&#22914;&#26381;&#21153;&#22120;&#21551;&#21160;&#26102;&#28155;&#21152;&#20102;
 <code>
  --binlog-format=ROW
 </code>
 &#21551;&#21160;&#36873;&#39033;&#65292;&#25105;&#20204;&#25191;&#34892;&#22914;&#19979;&#35821;&#21477;&#65306;
</p>
<pre><code>UPDATE s1 SET common_field = 'xxx' WHERE id &gt; 9990;
</code></pre>
<p>
 &#28982;&#21518;&#20351;&#29992;mysqlbinlog&#23454;&#29992;&#24037;&#20855;&#26597;&#30475;&#19968;&#19979;&#30456;&#24212;&#30340;binlog&#20869;&#23481;&#65306;
</p>
<pre><code>mysqlbinlog --verbose xiaohaizi-bin.000008
...&#36825;&#37324;&#30465;&#30053;&#20102;&#24456;&#22810;&#20869;&#23481;
### UPDATE `xiaohaizi`.`s1`
### WHERE
###   @1=9991
###   @2='7cgwfh14w6nql61pvult6ok0ccwe'
###   @3='799105223'
###   @4='c'
###   @5='gjjiwstjysv1lgx'
###   @6='zg1hsvqrtyw2pgxgg'
###   @7='y244x02'
###   @8='xx'
### SET
###   @1=9991
###   @2='7cgwfh14w6nql61pvult6ok0ccwe'
###   @3='799105223'
###   @4='c'
###   @5='gjjiwstjysv1lgx'
###   @6='zg1hsvqrtyw2pgxgg'
###   @7='y244x02'
###   @8='xxx'
### UPDATE `xiaohaizi`.`s1`
### WHERE
###   @1=9992
###   @2='2sfq3oftc'
###   @3='815047282'
###   @4='ub'
###   @5='73hw14kbaaoa'
###   @6='fxnqzef3rrpc7qzxcjsvt14nypep4rqi'
###   @7='10vapb6'
###   @8='xx'
### SET
###   @1=9992
###   @2='2sfq3oftc'
###   @3='815047282'
###   @4='ub'
###   @5='73hw14kbaaoa'
###   @6='fxnqzef3rrpc7qzxcjsvt14nypep4rqi'
###   @7='10vapb6'
###   @8='xxx'
...&#36825;&#37324;&#30465;&#30053;&#20102;&#24456;&#22810;&#20869;&#23481;
</code></pre>
<p>
 &#21487;&#35265;&#65292;
 <code>
  &#22522;&#20110;&#34892;&#30340;binlog
 </code>
 &#23558;&#26356;&#26032;&#35821;&#21477;&#25191;&#34892;&#36807;&#31243;&#20013;&#27599;&#19968;&#26465;&#35760;&#24405;&#26356;&#26032;&#21069;&#21518;&#30340;&#20540;&#37117;&#35760;&#24405;&#19979;&#26469;&#20102;&#12290;
</p>
<h2>
 &#22522;&#20110;&#35821;&#21477;&#30340;binlog&#30340;&#38382;&#39064;
</h2>
<p>
 &#22312;&#26377;&#20027;&#20174;&#22797;&#21046;&#30340;&#22330;&#26223;&#20013;&#65292;&#20351;&#29992;
 <code>
  &#22522;&#20110;&#35821;&#21477;&#30340;&#26085;&#24535;
 </code>
 &#21487;&#33021;&#20250;&#36896;&#25104;&#20027;&#26381;&#21153;&#22120;&#21644;&#20174;&#26381;&#21153;&#22120;&#32500;&#25252;&#30340;&#25968;&#25454;&#19981;&#19968;&#33268;&#30340;&#24773;&#20917;&#12290;
</p>
<p>
 &#27604;&#26041;&#35828;&#25105;&#20204;&#26377;&#19968;&#20010;&#34920;t&#65306;
</p>
<pre><code>CREATE TABLE t (
    id INT UNSIGNED NOT NULL AUTO_INCREMENT,
    c VARCHAR(100),
    PRIMARY KEY(ID)
);
</code></pre>
<p>
 &#22914;&#26524;&#25105;&#20204;&#25191;&#34892;&#22914;&#19979;&#35821;&#21477;&#65306;
</p>
<pre><code>INSERT INTO t(c) SELECT c FROM other_table;
</code></pre>
<p>
 &#36825;&#20010;&#35821;&#21477;&#26159;&#24819;&#23558;
 <code>
  other_table
 </code>
 &#34920;&#20013;&#21015;
 <code>
  c
 </code>
 &#30340;&#20540;&#37117;&#25554;&#20837;&#21040;&#34920;t&#30340;&#21015;c&#20013;&#65292;&#32780;&#34920;t&#30340;id&#21015;&#26159;&#33258;&#22686;&#21015;&#65292;&#21487;&#20197;&#33258;&#21160;&#29983;&#25104;&#12290;
</p>
<p>
 &#22914;&#26524;&#20027;&#24211;&#21644;&#20174;&#24211;&#30340;&#26381;&#21153;&#22120;&#25191;&#34892;
 <code>
  SELECT c FROM other_table
 </code>
 &#36820;&#22238;&#35760;&#24405;&#30340;&#39034;&#24207;&#19981;&#21516;&#30340;&#35805;&#65288;&#19981;&#21516;&#26381;&#21153;&#22120;&#29256;&#26412;&#12289;&#19981;&#21516;&#30340;&#31995;&#32479;&#21464;&#37327;&#37197;&#32622;&#37117;&#21487;&#33021;&#23548;&#33268;&#21516;&#19968;&#26465;&#35821;&#21477;&#36820;&#22238;&#32467;&#26524;&#30340;&#39034;&#24207;&#19981;&#21516;&#65289;&#65292;&#37027;&#20040;&#38024;&#23545;&#34920;t&#30456;&#21516;id&#20540;&#30340;&#35760;&#24405;&#26469;&#35828;&#65292;&#21015;c&#23601;&#21487;&#33021;&#20855;&#26377;&#19981;&#21516;&#30340;&#20540;&#65292;&#36825;&#23601;&#20250;&#36896;&#25104;&#20027;&#20174;&#20043;&#38388;&#25968;&#25454;&#30340;&#19981;&#19968;&#33268;&#12290;
</p>
<p>
 &#32780;&#22914;&#26524;&#23558;binlog&#30340;&#26684;&#24335;&#25913;&#20026;
 <code>
  &#22522;&#20110;&#34892;&#30340;&#26085;&#24535;
 </code>
 &#30340;&#35805;&#65292;&#30001;&#20110;&#20027;&#24211;&#22312;&#25191;&#34892;&#23436;&#35821;&#21477;&#21518;&#23558;&#35813;&#35821;&#21477;&#25554;&#20837;&#30340;&#27599;&#26465;&#23436;&#25972;&#30340;&#35760;&#24405;&#37117;&#20889;&#20837;binlog&#26085;&#24535;&#65292;&#23601;&#19981;&#20250;&#36896;&#25104;&#20027;&#20174;&#20043;&#38388;&#19981;&#19968;&#33268;&#20102;&#12290;
</p>
<p>
 &#22909;&#20687;&#21448;&#20889;&#20102;&#24456;&#22810;&#26543;&#29157;&#30340;&#20869;&#23481;...
&#19979;&#27425;&#19981;&#20889;&#36825;&#20040;&#26543;&#29157;&#30340;&#20102;&#65292;&#25105;&#30475;&#30528;&#37117;&#26377;&#28857;&#20799;&#28902;~
</p>
</div>

</div>
</div>

        </body>
        
        